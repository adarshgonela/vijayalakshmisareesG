var recommendation_container=document.querySelector("[data-custom-recommendations]"),lastPageReached=!1,currentPage=1,data=[],totalPages=1,recommendationAvailable=!0;function noData(){document.querySelector(".custom-recommendations h2").classList.add("hidden")}function fetchDataWithPagination(url){try{return fetch("".concat(url,"&").concat(new URLSearchParams({page:currentPage}))).then(function(response){return response.json()}).then(function(jsonData){if(jsonData.status=="error"){recommendationAvailable=!1,noData();return}data=data.concat(jsonData.data),processFetchedData(jsonData.data),totalPages=jsonData.pagination.total_pages;var nextPage=jsonData.pagination.next_page;return currentPage===totalPages&&(lastPageReached=!0),console.log(currentPage,totalPages),console.log("lastPageReached",lastPageReached),currentPage=nextPage,nextPage}).finally(function(){lazy_pop_load()})}catch(error){return console.error("An error occurred while fetching data:",error),Promise.reject(error)}}function processFetchedData(data2){data2.forEach(function(response,i){displayResponseObject(response,i)})}function displayResponseObject(response,i){var savings=Math.trunc((response.variants[0].compareAtPrice-response.variants[0].price)*100/response.variants[0].compareAtPrice);if(!response.available){console.log(response.handle,"unavailable");return}var div=document.createElement("li");div.classList="grid__item";var currentDivID="recommended-item-"+(currentPage-1)+i;div.setAttribute("id",currentDivID),div.innerHTML='\n    <!-- custom.js---------->\n        <div class="card-wrapper" data-handle="'.concat(response.handle,'" data-available="').concat(response.available,'">\n            <a href="#" class="iWishAddColl iwishcheck" data-product="').concat(response.id,'" data-variant="').concat(response.variants[0].id,'">\n                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 378.94 378.94" style="enable-background:new 0 0 378.94 378.94;" xml:space="preserve"><g><path d="M348.151,54.514c-19.883-19.884-46.315-30.826-74.435-30.826c-28.124,0-54.559,10.942-74.449,30.826l-9.798,9.8l-9.798-9.8c-19.884-19.884-46.325-30.826-74.443-30.826c-28.117,0-54.56,10.942-74.442,30.826c-41.049,41.053-41.049,107.848,0,148.885l147.09,147.091c2.405,2.414,5.399,3.892,8.527,4.461c1.049,0.207,2.104,0.303,3.161,0.303c4.161,0,8.329-1.587,11.498-4.764l147.09-147.091C389.203,162.362,389.203,95.567,348.151,54.514z M325.155,180.404L189.47,316.091L53.782,180.404c-28.368-28.364-28.368-74.514,0-102.893c13.741-13.739,32.017-21.296,51.446-21.296c19.431,0,37.702,7.557,51.438,21.296l21.305,21.312c6.107,6.098,16.897,6.098,23.003,0l21.297-21.312c13.737-13.739,32.009-21.296,51.446-21.296c19.431,0,37.701,7.557,51.438,21.296C353.526,105.89,353.526,152.039,325.155,180.404z"></path></g></svg>\n            </a>\n        <a target="_blank" href="/products/').concat(response.handle,"?&amp;pr_rec_pid=").concat(response.id,"&amp;pr_src_id=").concat(meta.product.id,'" class="full-unstyled-link">\n            <span class="visually-hidden">').concat(response.title,'</span>\n        </a>\n        <use-animate data-animate="zoom-fade-small" class="card card--product" tabindex="-1" animate="">\n            <a target="_blank" href="/products/').concat(response.handle,"?pr_rec_pid=?").concat(response.id,'&amp" class="card__media media-wrapper" tabindex="-1">\n                <div class="image-animate media media--portrait">\n                <img src="').concat(response.imageSrc,'&amp;width=900" alt="').concat(response.title,'" \n                    srcset="').concat(response.imageSrc,"&amp;width=165 165w, ").concat(response.imageSrc,"&amp;width=360 360w, ").concat(response.imageSrc,"&amp;width=535 535w, ").concat(response.imageSrc,"&amp;width=750 750w, ").concat(response.imageSrc,"&amp;width=940 940w, ").concat(response.imageSrc,'&amp;width=1100 1100w" width="1100" height="1400" loading="lazy" class="motion-reduce" sizes="(min-width: 1600px) 367px, (min-width: 990px) calc((100vw - 10rem) / 4), (min-width: 750px) calc((100vw - 10rem) / 3), calc(100vw - 3rem)" is="lazy-image">\n                </div>\n            </a>\n        </use-animate>\n\n        <div class="card-information">\n            <div class="card-information__wrapper"><div class="card-information__top"></div><a target="_blank" href="/products/').concat(response.handle,"pr_rec_pid=").concat(response.id,'&amp;&amp;pr_seq=uniform" class="card-information__text h4" tabindex="-1">\n                ').concat(response.title,'\n                </a>\n            <span class="caption-large light"></span>\n\n            \n        <div class="price price--on-sale">\n          <dl><div class="price__regular">\n            <dt>\n                <span class="visually-hidden visually-hidden--inline">Regular price</span>\n            </dt>\n            <dd>\n                <span class="price-item price-item--regular">\n                <price-money><bdi><span class="price__prefix">\u20B9</span>').concat(response.variants[0].price,'</bdi></price-money>\n                </span>\n            </dd>\n            </div>\n              <div class="price__sale"><dt class="price__compare">\n                <span class="visually-hidden visually-hidden--inline">Regular price</span>\n                </dt>\n                <dd class="price__compare">\n                <s class="price-item price-item--regular">\n                    <price-money><bdi><span class="price__prefix">\u20B9</span>').concat(response.variants[0].compareAtPrice,'</bdi></price-money>\n                </s>\n                </dd><dt>\n                <span class="visually-hidden visually-hidden--inline">Sale price</span>\n                </dt>\n                <dd>\n                <span class="price-item price-item--sale">\n                  <price-money><bdi><span class="price__prefix">\u20B9</span>').concat(response.variants[0].price,'</bdi></price-money>\n                </span>\n                </dd>\n              </div>\n            </dl></div>\n            <div class="pop-club-listing" price="').concat(response.variants[0].price,'"></div>  \n            </div>  \n          </div>\n          \n          <div class="card__badge">\n              <span class="badge badge--onsale" aria-hidden="true">').concat(savings,"%\n            </span>\n          </div>\n      </div>\n    "),div.classList.add("recommendation"),recommendation_container.appendChild(div)}document.addEventListener("page:loaded",function(){var productId="";meta.page.resourceType==="product"&&(productId=meta.product.id);var url="https://app.marsel.ai/api/recommendations/similar_items?shop=leemboodi-store.myshopify.com&product_id=".concat(productId),options={rootMargin:"0px 0px 450px 0px"},observer=new IntersectionObserver(function(entries){entries.forEach(function(entry){if(entry.isIntersecting&&!entry.target.dataset.loaded){var fetchAllPages2=function(){fetchDataWithPagination(url).then(function(nextPage){!lastPageReached&&currentPage<=totalPages&&recommendationAvailable&&fetchAllPages2()})},fetchAllPages=fetchAllPages2;entry.target.dataset.loaded=!0,console.log("Load data when the recommendation container is in view"),console.log("FETCH INTERSECTION",url),fetchAllPages2()}})},options),recommendationContainer=recommendation_container;recommendationContainer&&observer.observe(recommendationContainer)});function updateVisitorCount(){var vistorCountElement=document.querySelector("#vistorCount.product__text strong");if(vistorCountElement){var randomCount=Math.floor(Math.random()*101)+150;vistorCountElement.innerText=randomCount}}function updateCurrentHour(){var currentHourElement=document.querySelector("#currentHour strong");if(currentHourElement){var currentDate=new Date,currentHour=currentDate.getHours(),currentMinute=currentDate.getMinutes();currentHour=currentHour%12||12;var totalMinutes=currentHour*60+currentMinute;console.log("currentHour",currentHour,"currentMinute",currentMinute,"totalMinutes",totalMinutes);var outputValue=totalMinutes<200?250+currentMinute:totalMinutes,productId=meta.product.id,lastDigit=productId%10;outputValue+=lastDigit,currentHourElement.innerText=outputValue}}updateVisitorCount(),updateCurrentHour(),setInterval(function(){updateVisitorCount(),updateCurrentHour()},3e3);
//# sourceMappingURL=/cdn/shop/t/13/assets/custom.js.map?v=66858954353762822571701918979
