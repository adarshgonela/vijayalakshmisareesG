/*! For license information please see free-gift-cart-upsell-pro.min.js.LICENSE.txt */
(()=>{var t={83433:(t,e)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){return t=function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.build=function(){return r.el},this.el=document.createElement(e)},(e=[{key:"withId",value:function(t){return this.el.setAttribute("id",t),this}},{key:"withClass",value:function(t){return this.el.setAttribute("class",t),this}},{key:"addClass",value:function(t){return this.el.classList.add(t),this}},{key:"withAttr",value:function(t,e){return this.el.setAttribute(t,e),this}},{key:"withInnerHtml",value:function(t){return this.el.innerHTML=t,this}},{key:"append",value:function(t){return"string"==typeof t?this.el.append(t):this.el.appendChild(t),this}}])&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();e.default=o},79304:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function o(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0});var a=r(18102),c="docapp-gift-choice-modal-next",u="docapp-gift-choice-modal-prev",l="docapp-pagination-container",d="docapp-pagination-dot",s="docapp-pagination-number",p="docapp-pagination-numbers-wrapper",f={490:2,768:3,1024:4},m=function(){return t=function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setItemsPerPage(r.max_items_per_page);var i=new a.default({selector:r.selector,perPage:f,draggable:!1,onInit:function(){document.getElementById("docapp-gift-choice-modal-wrapper").classList.add("visible")},onChange:function(t){"resized"===t&&r.items_count&&n.createPagination(i,e,r)}});this.createPagination(i,e,r),setTimeout((function(){return i.resizeHandler()}),0)},e=[{key:"createPagination",value:function(t,e,r){var n;if(null===(n=e.querySelector("."+l))||void 0===n||n.remove(),!(this.getItemsPerPage()>=r.items_count)){var i=document.createElement("div");switch(i.setAttribute("class",l),r.pagination_type){case"arrow":i.appendChild(this.createPaginationArrow(u)),i.appendChild(this.createPaginationArrow(c));break;case"dot":i.appendChild(this.createPaginationDots(r.items_count));break;case"numbers":i.appendChild(this.createPaginationNumbers(r.items_count));break;default:return}e.appendChild(i),this.applyPaginationHandlers(e,t,r)}}},{key:"createPaginationArrow",value:function(t){var e=document.createElement("div");return e.setAttribute("class",t),e.classList.add("docapp-gift-choice-modal-arrow"),e}},{key:"createPaginationDots",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!(this.getItemsPerPage()>=t)){var e=0,r=Math.ceil(t/this.getItemsPerPage()),n=document.createElement("div");for(n.setAttribute("class","docapp-pagination-dots-wrapper");e<r;){var i=document.createElement("span");i.classList.add(d),0===e&&i.classList.add("active"),i.setAttribute("data-index","".concat(e*this.getItemsPerPage())),n.appendChild(i),e++}return n}}},{key:"createPaginationNumbers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=document.createElement("div");if(r.setAttribute("class",p),this.getItemsPerPage()>=t)return r;var n=Math.ceil(t/this.getItemsPerPage());return this.buildArrayWithNumbers(e+1,n).forEach((function(n){var i=document.createElement("span");i.classList.add("docapp-number-pagination"),i.innerText=n.toString(),"number"==typeof n&&(n-1===e&&i.classList.add("active"),i.classList.add(s),i.setAttribute("data-index","".concat(n-1)),i.setAttribute("data-items-count","".concat(t)),i.innerText="".concat(n)),r.appendChild(i)})),r}},{key:"applyPaginationHandlers",value:function(t,e,r){switch(r.pagination_type){case"arrow":var n=t.querySelector("."+u);null==n||n.addEventListener("click",(function(){null==e||e.prev(1,(function(){}))}));var i=t.querySelector("."+c);null==i||i.addEventListener("click",(function(){null==e||e.next(1,(function(){}))}));break;case"dot":var o=t.querySelectorAll(".".concat(d));null==o||o.forEach((function(t){t.addEventListener("click",(function(){var r;o.forEach((function(t){return t.classList.remove("active")})),t.classList.add("active"),null==e||e.goTo(Number(null===(r=t.dataset)||void 0===r?void 0:r.index))}))}));break;case"numbers":this.applyPaginationNumbersHandlers(t,e);break;default:return}}},{key:"applyPaginationNumbersHandlers",value:function(t,e){var r=this,n=t.querySelectorAll(".".concat(s));null==n||n.forEach((function(n){n.addEventListener("click",(function(){var i,o;null==e||e.goTo(Number(null===(i=n.dataset)||void 0===i?void 0:i.index)*r.getItemsPerPage()),null===(o=t.querySelector("."+p))||void 0===o||o.remove();var a=r.createPaginationNumbers(Number(n.dataset.itemsCount),Number(n.dataset.index));t.querySelector("."+l).appendChild(a),r.applyPaginationNumbersHandlers(t,e)}))}))}},{key:"buildArrayWithNumbers",value:function(t,e){var r=[1];if(1===t&&1===e)return r;t>4&&r.push("…");for(var n=t-2,i=t+2,o=n>2?n:2;o<=Math.min(e,i);o++)r.push(o);return i+1<e&&r.push("…"),i<e&&r.push(e),r}},{key:"getItemsPerPage",value:function(){var t=1;for(var e in f)window.innerWidth>=Number(e)&&(t=f[e]);return t}},{key:"setItemsPerPage",value:function(t){f[490]=Math.min(2,t),f[768]=Math.min(3,t),f[1024]=Math.min(4,t)}}],e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();e.default=m},88056:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={buildConfig:function(t){return{gift_choice_modal_title:t.gift_choice_modal_title||"",gift_choice_modal_subtitle:t.gift_choice_modal_subtitle||"",gift_choice_modal_tile_type:t.gift_choice_modal_tile_type||"product",gift_choice_modal_pagination_type:t.gift_choice_modal_pagination_type||"numbers",gift_choice_modal_tiles_per_page:t.gift_choice_modal_tiles_per_page||4,gift_choice_modal_replace_price:t.gift_choice_modal_replace_price,gift_choice_modal_replace_price_pattern:t.gift_choice_modal_replace_price_pattern||"",gift_choice_modal_strikethrough_retail_price:t.gift_choice_modal_strikethrough_retail_price,gift_choice_modal_done_button_enabled:t.gift_choice_modal_done_button_enabled,gift_choice_modal_done_button_label:t.gift_choice_modal_done_button_label||"",gift_choice_modal_cart_button_enabled:t.gift_choice_modal_cart_button_enabled,gift_choice_modal_cart_button_label:t.gift_choice_modal_cart_button_label||"",gift_choice_modal_no_thanks_button_enabled:t.gift_choice_modal_no_thanks_button_enabled,gift_choice_modal_no_thanks_button_label:t.gift_choice_modal_no_thanks_button_label||"",gift_choice_modal_add_to_cart_button_label:t.gift_choice_modal_add_to_cart_button_label||""}}}},5613:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e,r){var i;return i=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==n(i)?i:i+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r(91569),a=r(42800),c=r(55882),u=r(1048),l=r(48770),d=r(14956),s=r(65149),p=r(79304),f=r(14499),m=r(88056),g=r(54522),h=r(29691),_=r(95219),y=null,v=null,w=null,b={},C=!1;e.A={setConfiguration:function(t){b=m.default.buildConfig(t)},openModal:function(t,e,r){var n=this;y=function(t){var e=(0,h.getCartHash)(t);(0,_.setLastCartHashHandled)(e),setTimeout((function(){return r(t,!0)}),350)},v=function(){return r(e)},u.default.runWithGiftVariantsData((function(e){w=t.map((function(t){return(0,l.default)(t,b.gift_choice_modal_tile_type,e)})),C=1===w.length&&!!w[0].replacesCartItem;var r=f.default.generateModal(b,w),i=c.default.openModal(r,(function(){n.resetGiftReplacementWhenNoSelection(),n.onModalExit()}),!0);n.applyModalEventHandlers(i),i.querySelectorAll(".docapp-gift-choices").forEach((function(t){var e=t.getAttribute("data-id"),r={items_count:w.find((function(t){return t.goalId.toString()===e})).choices.length,pagination_type:b.gift_choice_modal_pagination_type,max_items_per_page:b.gift_choice_modal_tiles_per_page,selector:'.docapp-gift-choices[data-id="'.concat(e,'"] .siema')};new p.default(t,r)}))}))},applyModalEventHandlers:function(t){var e=this,r=t.querySelector("#"+f.DECLINE_BUTTON_ID);null==r||r.addEventListener("click",(function(){w.forEach((function(t){return t.selections=[]})),e.onModalExit(),null==t||t.remove()}));var n=t.querySelector(".docapp-gift-choice-modal-done-button");null==n||n.addEventListener("click",(function(){e.resetGiftReplacementWhenNoSelection(),e.onModalExit(),null==t||t.remove()}));var i=t.querySelector(".docapp-gift-choice-modal-cart-button");null==i||i.addEventListener("click",(function(){e.resetGiftReplacementWhenNoSelection(),e.onModalExit().then((function(){return window.location.href="".concat(window.Shopify.routes.root||"/","cart")}))}))},onModalExit:function(){this.setDeclinedGifts();var t=this.generateAdditionsForSelections(),e=this.generateQuantityChangesForReplacements();return t.length>0||C?(0,o.applyCartUpdatesWithProperties)(t,e,y):(v(),Promise.resolve())},setDeclinedGifts:function(){var t=d.default.getGoalsData().giftGoals,e=[],r=[],n=null,i=null;w.forEach((function(o){var a=t.find((function(t){return t.id===o.goalId}));a.reward_handling_type===g.RewardHandlingType.AUTOMATIC&&o.replacesCartItem?(n=o.replacesCartItem.product_id,i=a.id):e.push(o.goalId);var c=o.selections.reduce((function(t,e){return t+e.quantity}),0),u=o.quantity-c+o.previouslyDeclinedQuantity;if(u>0){var l=t.find((function(t){return t.id===o.goalId})),d=l.reward_handling_type===g.RewardHandlingType.AUTOMATIC&&o.replacesCartItem?o.replacesCartItem.product_id:null;r.push({goal:l,productId:d,declinedQuantity:u})}})),n?(0,s.putDeclinedGiftsForAutomaticGoal)(i,n,r):(0,s.putDeclinedGiftsForMultipleGoals)(e,r)},generateAdditionsForSelections:function(){var t=[];return w.forEach((function(e){e.selections.forEach((function(r){t.push({id:Number(r.variant_id),quantity:r.quantity,properties:i({},a.default.GIFT_ID,e.goalId)})}))})),t},generateQuantityChangesForReplacements:function(){var t={};return C&&(t[w[0].replacesCartItem.key]=0),t},resetGiftReplacementWhenNoSelection:function(){C&&!w[0].selections.length&&(C=!1,w=[])}}},14499:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DECLINE_BUTTON_ID=void 0;var n=r(67805),i=r(95333),o=r(48770),a=r(88056),c=r(83433),u=r(38278),l="docapp-gift-choice-modal-wrapper",d="docapp-add-to-cart";e.DECLINE_BUTTON_ID="docapp-decline-button",e.default={generateModal:function(t,e){return new c.default("div").withId(l).append(this.createModalHeader(t)).append(this.createModalBody(t,e)).append(this.createModalFooter(t)).build()},createModalHeader:function(t){return new c.default("header").append(new c.default("div").withClass("docapp-gift-choice-modal-title").withInnerHtml(t.gift_choice_modal_title).build()).build()},createModalBody:function(t,e){var r=this,n=new c.default("div").withId("docapp-gift-choice-modal-body");return null==e||e.forEach((function(e){var i,o=new c.default("span").withClass("docapp-gift-choice-modal-sub-title").withInnerHtml(null===(i=t.gift_choice_modal_subtitle)||void 0===i?void 0:i.replace(/\[\[allowed_free_gifts]]/g,e.quantity.toString())).build(),a=new c.default("span").withClass("docapp-gift-choice-modal-counter").append(new c.default("span").withClass("docapp-gift-choice-modal-counter-selected").withInnerHtml("0").build()).append("/"+e.quantity).build(),u=new c.default("span").withClass("docapp-gift-choice-modal-restart docapp-hidden").withInnerHtml(" ×").build(),l=new c.default("span").append(a).append(u).build();t.in_preview||u.addEventListener("click",(function(){return r.triggerGiftChoiceReset(e,l)}));var d=new c.default("section").withClass("docapp-gifts-section siema");e.choices.forEach((function(n){d.append(r.createGiftItem(t,n,e))}));var s=new c.default("section").withClass("docapp-gift-choices").withAttr("data-id",e.goalId.toString()).append(new c.default("div").append(o).append(l).build()).append(d.build());n.append(s.build())})),n.build()},createGiftItem:function(t,e,r){var i=new c.default("div").withClass("docapp-gift-choice-modal-item-image-container");if(e.image){var o=new c.default("img").withClass("docapp-gift-choice-modal-item-image").withAttr("src",e.image).build();i.append(o)}var a=new c.default("div").withClass("docapp-gift-choice-modal-item-title").withInnerHtml(e.title),l=new c.default("div").withClass("docapp-gift-choice-modal-item-price"),d=new c.default("span").withClass("docapp-gift-choice-modal-gift-price"),s=(0,n.formatAmount)(0,(0,u.getMoneyFormat)(),(0,u.getCurrencyName)());if(t.gift_choice_modal_replace_price?d.withInnerHtml(t.gift_choice_modal_replace_price_pattern.replace(/\[\[amount]]/g,s)):d.withInnerHtml(s),l.append(d.build()),t.gift_choice_modal_strikethrough_retail_price&&Number(e.compare_at_price)>0){var p=new c.default("span").withClass("docapp-gift-choice-modal-original-price").withInnerHtml((0,n.formatAmount)(100*Number(e.compare_at_price),(0,u.getMoneyFormat)(),(0,u.getCurrencyName)()));l.append(p.build())}var f=this.createItemVariantChoice(t,e,r),m=new c.default("div").withClass("docapp-gift-choice-modal-item-wrapper").append(i.build()).append(a.build()).append(l.build()).append(f).build();return t.in_preview||this.setUpVariantChoiceEventHandlers(m,e),m},createItemVariantChoice:function(t,e,r){var n,i=new c.default("div").withClass("docapp-gift-choice-modal-variant-choice"),o=new c.default("input").withAttr("type","hidden").withAttr("value",e.variant_id.toString()).withAttr("name","docapp_variant_id").build();i.append(o);var a=new c.default("input").withAttr("type","hidden").withAttr("value",e.product_id.toString()).withAttr("name","docapp_product_id").build();i.append(a);var u=new c.default("input").withAttr("type","hidden").withAttr("value",e.title).withAttr("name","docapp_product_title").build();i.append(u);var l=new c.default("input").withAttr("type","hidden").withAttr("value",e.image).withAttr("name","docapp_product_image").build();i.append(l);var s=new c.default("button").withClass(d).withInnerHtml(t.gift_choice_modal_add_to_cart_button_label).build();return t.in_preview||s.addEventListener("click",this.handleSelectSingleGift(r)),i.append(s),(null===(n=e.variants)||void 0===n?void 0:n.length)>2&&i.append(this.createItemVariantOptions(e)),i.build()},createItemVariantOptions:function(t){var e=new c.default("div").withClass("docapp-gift-choice-modal-variant-options");return t.options.forEach((function(t){var r=new c.default("div").withClass("docapp-gift-choice-modal-variant-option"),n=t.values.map((function(t){return'<option value="'.concat(t.replace(/"/g,"&quot;"),'">').concat((0,i.toTitleCase)(t),"</option>")})).join("");r.withInnerHtml('<select class="docapp-real-select" name="'.concat(t.name.toLowerCase(),'">\n<option value="" disabled>').concat((0,i.toTitleCase)(t.name),"</option>\n").concat(n,"\n</select>")),e.append(r.build())}),""),e.build()},setUpVariantChoiceEventHandlers:function(t,e){var r=t.querySelector(".docapp-gift-choice-modal-item-image-container"),n=t.querySelector(".docapp-gift-choice-modal-item-title"),o=t.querySelector("."+d);t.querySelectorAll(".docapp-real-select").forEach((function(a){a.addEventListener("change",(function(){var a=e.variants.find((function(e){return 0===e.selectedOptions.filter((function(e){var r=t.querySelector('[name="'+e.name.toLowerCase()+'"]');return e.value!==r.value})).length}));if(!a||!a.available)return r.innerHTML='<span class="docapp-variant-sold-out">Sold out!</span>',r.style.display="inline-block",void(o.disabled=!0);var c=(0,i.toTitleCase)(e.title+" | "+a.title);n.innerHTML=c,r.innerHTML=a.image||e.image?'<img alt="Gift image" class="docapp-gift-choice-modal-item-image" src="'.concat(a.image||e.image,'">'):"",o.disabled=!1,t.querySelector("[name=docapp_variant_id]").value=a.id.toString(),t.querySelector("[name=docapp_product_title]").value=c,t.querySelector("[name=docapp_product_image]").value=a.image||""})),a.addEventListener("click",(function(t){t.stopPropagation()})),a.addEventListener("focus",(function(t){return t.stopPropagation()}),{capture:!0}),a.addEventListener("focusin",(function(t){return t.stopPropagation()}),{capture:!0})}))},createModalFooter:function(t){var r=new c.default("footer");if(t.gift_choice_modal_no_thanks_button_enabled){var n=new c.default("button").withClass("docapp-gift-choice-modal-decline-button").withAttr("id",e.DECLINE_BUTTON_ID).withInnerHtml(t.gift_choice_modal_no_thanks_button_label);r.append(n.build())}else r.addClass("docapp-no-thank-you");var i=new c.default("div").withClass("docapp-gift-choice-modal-right-buttons");if(t.gift_choice_modal_done_button_enabled){var o=new c.default("button").withClass("docapp-gift-choice-modal-done-button").withInnerHtml(t.gift_choice_modal_done_button_label);i.append(o.build())}if(t.gift_choice_modal_cart_button_enabled){var a=new c.default("button").withClass("docapp-gift-choice-modal-cart-button").withInnerHtml(t.gift_choice_modal_cart_button_label);i.append(a.build())}return r.append(i.build()).build()},handleSelectSingleGift:function(t){return function(e){var r,n=t.selections.reduce((function(t,e){return t+e.quantity}),0);if(!(n>=t.quantity)){var i=e.target.closest(".docapp-gift-choice-modal-item-wrapper"),o=Number(i.querySelector("[name=docapp_product_id]").value),a=Number(i.querySelector("[name=docapp_variant_id]").value),c=i.querySelector("[name=docapp_product_title]").value,u=i.querySelector("[name=docapp_product_image]").value,l=t.selections.find((function(t){return t.product_id===o&&t.variant_id===a}));l?l.quantity++:t.selections.push({product_id:o,variant_id:a,title:c,image:u||null,quantity:1}),n++;var s=i.closest(".docapp-gift-choices");s.querySelector(".docapp-gift-choice-modal-counter-selected").innerHTML=n,null===(r=s.querySelector(".docapp-gift-choice-modal-restart"))||void 0===r||r.classList.remove("docapp-hidden"),n>=t.quantity&&s.querySelectorAll("."+d).forEach((function(t){return t.disabled=!0}))}}},triggerGiftChoiceReset:function(t,e){t.selections=[],e.querySelector(".docapp-gift-choice-modal-counter-selected").innerHTML="0",e.querySelector(".docapp-gift-choice-modal-restart").classList.add("docapp-hidden")},generatePreview:function(t,e){(0,u.setDefaultCurrencyName)(t.currency||"USD"),(0,u.setDefaultMoneyFormat)(t.money_format_pattern||"<span>$[[amount]]</span>");var r=a.default.buildConfig(e);r.in_preview=!0;var n=[(0,o.buildPreviewGiftChoice)()],i=document.createElement("div");return i.setAttribute("id",l),i.appendChild(this.createModalHeader(r)),i.appendChild(this.createModalBody(r,n)),i.appendChild(this.createModalFooter(r)),i}}},48770:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildPreviewGiftChoice=void 0;var n=r(40703);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=Object.assign({},t);return r.variants=(null==e?void 0:e.variants)||[],r.options=r.variants.length>1?null==e?void 0:e.options:[],r}e.default=function(t,e,r){var n={quantity:t.quantity,totalAwardedQuantity:t.totalAwardedQuantity,previouslyDeclinedQuantity:t.previouslyDeclinedQuantity,replacesCartItem:t.replacesCartItem||null,goalId:t.goalId,choices:[],selections:[]};return t.products.forEach((function(t){var o,a=(null==r?void 0:r[t.product_id])||[];"product"===e||(null===(o=null==a?void 0:a.variants)||void 0===o?void 0:o.length)<=1?n.choices.push(i(t,a)):a.variants.forEach((function(e){var r=Object.assign(Object.assign({},t),{variant_id:e.id,image:e.image||t.image,title:e.title?t.title+" | "+e.title:t.title,compare_at_price:e.compareAtPrice||t.compare_at_price,quantity:e.inventoryQuantity||t.quantity});n.choices.push(i(r))}))})),n};e.buildPreviewGiftChoice=function(){return{quantity:2,totalAwardedQuantity:2,previouslyDeclinedQuantity:0,replacesCartItem:null,goalId:-1,choices:[{title:"Example Gift",image:n.GIFT_IMAGE,compare_at_price:"9.99",quantity:2,product_id:1234,variant_id:6789,variants:[],options:[]}],selections:[]}}},67805:(t,e,r)=>{"use strict";r.r(e),r.d(e,{amountToInt:()=>c,extractAmount:()=>u,formatAmount:()=>o});var n=r(95333),i=["BHD","JOD","KWD"],o=function(t,e,r,o){var c=Math.floor(t),u=100;"MRO"!==r&&"MGA"!==r||(u=5);var l=c/u,d=l.toFixed(0),s=l.toFixed(i.includes(r)?3:2),p=a(d),f=o?p:a(s),m=a(d,"."),g=a(d," "),h=o?m:a(s.replace(".",","),"."),_=a(o?d:s,"'"),y=e.replace(/\[\[amount]]/g,f).replace(/\[\[amount_no_decimals]]/g,p).replace(/\[\[amount_with_comma_separator]]/g,h).replace(/\[\[amount_no_decimals_with_comma_separator]]/g,m).replace(/\[\[amount_no_decimals_with_space_separator]]/g,g).replace(/\[\[amount_with_apostrophe_separator]]/g,_),v=(0,n.stripTags)(y);return v!==y?y:'<span class="money geolizr-currency buckscc-money" data-geolizr-price="'.concat(c,'" data-currency-').concat(r.toLowerCase(),'="').concat(v,'" data-money-convertible doubly-currency-').concat(r.toLowerCase(),'="').concat(c,'" doubly-currency="').concat(r,'" ge-data-original-price="').concat(c/100,'">').concat(v,"</span>")};function a(t,e){return e=e||",",t.replace(/\B(?=(\d{3})+(?!\d))/g,e)}function c(t){var e=100*t;return isNaN(e)?e:parseInt(e.toFixed())}function u(t){var e=t.replace(/[a-zA-Z]+\/?\.?/g,"");if(e.match(/^\D*0[.,]\d+$/))return c(e.replace(",",".").replace(/[^\d.]/g,""));if(e.match(/\.\d{3}($|,)/)||e.match(/,(\d{2}|\d{4,})($|\D)/))return c(e.replace(/[^\d,]/g,"").replace(/,/g,"."));var r=e.replace(/[^\d.]/g,"").match(/\d(.*\d)?/);return r&&r.length?c(r[0]):NaN}},45345:(t,e,r)=>{"use strict";r.d(e,{X:()=>n});var n=function(t){return t&&t.length&&t.map?t.map((function(t){return parseInt(t)})):[]}},42800:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n={GIFT_ID:"Gift ID "}},6696:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});const n={SUBTOTAL:1,COUNT:2,DISCOUNT:3}},18335:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});const n={GIFT:1,DISCOUNT:2,SHIPPING:3}},54522:(t,e,r)=>{"use strict";r.r(e),r.d(e,{RewardHandlingType:()=>n});var n={AUTOMATIC:"automatic",MANUAL:"manual"}},94240:(t,e,r)=>{"use strict";r.d(e,{Fn:()=>a,LQ:()=>c,ep:()=>o,n9:()=>u});var n={},i=null,o="docapp-last-cart-price",a=function(t,e){l(),!0===i?window.localStorage.setItem(t,e):n[t]=e},c=function(t){return l(),!0===i?window.localStorage.getItem(t):n[t]||null},u=function(t){l(),!0===i?window.localStorage.removeItem(t):delete n[t]};function l(){if(null===i)try{window.localStorage.getItem("1"),i=!0}catch(t){window.docappLocalStorage=!1,i=!1}}},55882:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var n='<div class="docapp-overlay-container"><div class="docapp-overlay-content{CONTENT_CLASS}"><div class="docapp-overlay-close">&times;</div>{CONTENT}</div></div>';const i={openModal:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.removeModal();var o="string"!=typeof t,a=document.createElement("div");(a.classList.add("docapp-overlay-modal"),a.innerHTML='<div class="docapp-overlay-background">&nbsp;</div>'+n.replace("{CONTENT}",o?"":t).replace("{CONTENT_CLASS}",i?" docapp-overlay-content__fullscreen":""),o)&&a.querySelector(".docapp-overlay-content").append(t);return document.body.append(a),document.querySelectorAll(".docapp-overlay-background, .docapp-overlay-container, .docapp-overlay-close").forEach((function(t){return t.addEventListener("click",(function(){e.removeModal(),r&&r()}))})),document.querySelector(".docapp-overlay-content").addEventListener("click",(function(t){return t.stopPropagation()})),a},removeModal:function(){document.querySelectorAll(".docapp-overlay-background, .docapp-overlay-container").forEach((function(t){return t.remove()}))},confirm:function(t,e,r){var n=this,i=t.includes("docapp-confirm-button")?t:"<div><p>".concat(t,'</p><br/><button class="docapp-confirm-button">OK</button></div>');this.openModal(i,r).querySelector(".docapp-confirm-button").addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),n.removeModal(),e()}))}}},84659:(t,e,r)=>{"use strict";r.d(e,{E9:()=>o,_y:()=>u,i_:()=>a,mI:()=>c});var n={},i=null,o="docapp-free-gift-ei",a=function(t,e){l(),!0===i?window.sessionStorage.setItem(t,e):n[t]=e},c=function(t){return l(),!0===i?window.sessionStorage.getItem(t):n[t]||null},u=function(t){l(),!0===i?window.sessionStorage.removeItem(t):delete n[t]};function l(){if(null===i)try{window.sessionStorage.getItem("1"),i=!0}catch(t){window.docappSessionStorage=!1,i=!1}}},18102:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function o(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}r.r(e),r.d(e,{default:()=>a});var a=function(){return t=function t(e){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=t.mergeSettings(e),this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,null===this.selector)throw new Error("Something wrong with your selector 😭");this.resolveSlidesNumber(),this.selectorWidth=this.selector.offsetWidth,this.innerElements=[].slice.call(this.selector.children),this.currentSlide=this.config.loop?this.config.startIndex%this.innerElements.length:Math.max(0,Math.min(this.config.startIndex,this.innerElements.length-this.perPage)),this.transformProperty=t.webkitOrNot(),["resizeHandler","touchstartHandler","touchendHandler","touchmoveHandler","mousedownHandler","mouseupHandler","mouseleaveHandler","mousemoveHandler","clickHandler"].forEach((function(t){r[t]=r[t].bind(r)})),this.init()},e=[{key:"attachEvents",value:function(){window.addEventListener("resize",this.resizeHandler),this.config.draggable&&(this.pointerDown=!1,this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:!1},this.selector.addEventListener("touchstart",this.touchstartHandler),this.selector.addEventListener("touchend",this.touchendHandler),this.selector.addEventListener("touchmove",this.touchmoveHandler),this.selector.addEventListener("mousedown",this.mousedownHandler),this.selector.addEventListener("mouseup",this.mouseupHandler),this.selector.addEventListener("mouseleave",this.mouseleaveHandler),this.selector.addEventListener("mousemove",this.mousemoveHandler),this.selector.addEventListener("click",this.clickHandler))}},{key:"detachEvents",value:function(){window.removeEventListener("resize",this.resizeHandler),this.selector.removeEventListener("touchstart",this.touchstartHandler),this.selector.removeEventListener("touchend",this.touchendHandler),this.selector.removeEventListener("touchmove",this.touchmoveHandler),this.selector.removeEventListener("mousedown",this.mousedownHandler),this.selector.removeEventListener("mouseup",this.mouseupHandler),this.selector.removeEventListener("mouseleave",this.mouseleaveHandler),this.selector.removeEventListener("mousemove",this.mousemoveHandler),this.selector.removeEventListener("click",this.clickHandler)}},{key:"init",value:function(){this.attachEvents(),this.selector.style.overflow="hidden",this.selector.style.direction=this.config.rtl?"rtl":"ltr",this.buildSliderFrame(),this.config.onInit.call(this)}},{key:"buildSliderFrame",value:function(){var t=this.config.loop?this.innerElements.length+2*this.perPage:this.innerElements.length,e=this.selectorWidth/(t>=this.perPage?this.perPage:t);this.sliderFrame=document.createElement("div"),this.sliderFrame.style.width="".concat(e*t,"px"),this.enableTransition(),this.config.draggable&&(this.selector.style.cursor="-webkit-grab");var r=document.createDocumentFragment();if(this.config.loop)for(var n=this.innerElements.length-this.perPage;n<this.innerElements.length;n++){var i=this.buildSliderFrameItem(this.innerElements[n].cloneNode(!0));r.appendChild(i)}for(var o=0;o<this.innerElements.length;o++){var a=this.buildSliderFrameItem(this.innerElements[o]);r.appendChild(a)}if(this.config.loop)for(var c=0;c<this.perPage;c++){var u=this.buildSliderFrameItem(this.innerElements[c].cloneNode(!0));r.appendChild(u)}this.sliderFrame.appendChild(r),this.selector.innerHTML="",this.selector.appendChild(this.sliderFrame),this.slideToCurrent()}},{key:"buildSliderFrameItem",value:function(t){var e=document.createElement("div");return e.style.cssFloat=this.config.rtl?"right":"left",e.style.float=this.config.rtl?"right":"left",e.style.width="".concat(this.config.loop?100/(this.innerElements.length+2*this.perPage):100/this.innerElements.length,"%"),e.appendChild(t),e}},{key:"resolveSlidesNumber",value:function(){if("number"==typeof this.config.perPage)this.perPage=this.config.perPage;else if("object"===n(this.config.perPage))for(var t in this.perPage=1,this.config.perPage)window.innerWidth>=t&&(this.perPage=this.config.perPage[t])}},{key:"prev",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0;if(!(this.innerElements.length<=this.perPage)){var r=this.currentSlide;if(this.config.loop)if(this.currentSlide-t<0){this.disableTransition();var n=this.currentSlide+this.innerElements.length,i=n+this.perPage,o=(this.config.rtl?1:-1)*i*(this.selectorWidth/this.perPage),a=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]="translate3d(".concat(o+a,"px, 0, 0)"),this.currentSlide=n-t}else this.currentSlide=this.currentSlide-t;else this.currentSlide=Math.max(this.currentSlide-t,0);r!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),e&&e.call(this))}}},{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0;if(!(this.innerElements.length<=this.perPage)){var r=this.currentSlide;if(this.config.loop)if(this.currentSlide+t>this.innerElements.length-this.perPage){this.disableTransition();var n=this.currentSlide-this.innerElements.length,i=n+this.perPage,o=(this.config.rtl?1:-1)*i*(this.selectorWidth/this.perPage),a=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]="translate3d(".concat(o+a,"px, 0, 0)"),this.currentSlide=n+t}else this.currentSlide=this.currentSlide+t;else this.currentSlide=Math.min(this.currentSlide+t,this.innerElements.length-this.perPage);r!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),e&&e.call(this))}}},{key:"disableTransition",value:function(){this.sliderFrame.style.webkitTransition="all 0ms ".concat(this.config.easing),this.sliderFrame.style.transition="all 0ms ".concat(this.config.easing)}},{key:"enableTransition",value:function(){this.sliderFrame.style.webkitTransition="all ".concat(this.config.duration,"ms ").concat(this.config.easing),this.sliderFrame.style.transition="all ".concat(this.config.duration,"ms ").concat(this.config.easing)}},{key:"goTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(this.innerElements.length<=this.perPage)){var r=this.currentSlide;this.currentSlide=this.config.loop?t%this.innerElements.length:Math.min(Math.max(t,0),this.innerElements.length-this.perPage),r!==this.currentSlide&&(this.slideToCurrent(),this.config.onChange.call(this),e&&e.call(this))}}},{key:"slideToCurrent",value:function(t){var e=this,r=this.config.loop?this.currentSlide+this.perPage:this.currentSlide,n=(this.config.rtl?1:-1)*r*(this.selectorWidth/this.perPage);t?requestAnimationFrame((function(){requestAnimationFrame((function(){e.enableTransition(),e.sliderFrame.style[e.transformProperty]="translate3d(".concat(n,"px, 0, 0)")}))})):this.sliderFrame.style[this.transformProperty]="translate3d(".concat(n,"px, 0, 0)")}},{key:"updateAfterDrag",value:function(){var t=(this.config.rtl?-1:1)*(this.drag.endX-this.drag.startX),e=Math.abs(t),r=this.config.multipleDrag?Math.ceil(e/(this.selectorWidth/this.perPage)):1,n=t>0&&this.currentSlide-r<0,i=t<0&&this.currentSlide+r>this.innerElements.length-this.perPage;t>0&&e>this.config.threshold&&this.innerElements.length>this.perPage?this.prev(r):t<0&&e>this.config.threshold&&this.innerElements.length>this.perPage&&this.next(r),this.slideToCurrent(n||i)}},{key:"resizeHandler",value:function(){var t=this.perPage;this.resolveSlidesNumber(),this.currentSlide+this.perPage>this.innerElements.length&&(this.currentSlide=this.innerElements.length<=this.perPage?0:this.innerElements.length-this.perPage),this.selectorWidth=this.selector.offsetWidth,t!==this.perPage&&this.config.onChange.call(this,"resized"),this.buildSliderFrame()}},{key:"clearDrag",value:function(){this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:this.drag.preventClick}}},{key:"touchstartHandler",value:function(t){-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(t.target.nodeName)||(t.stopPropagation(),this.pointerDown=!0,this.drag.startX=t.touches[0].pageX,this.drag.startY=t.touches[0].pageY)}},{key:"touchendHandler",value:function(t){t.stopPropagation(),this.pointerDown=!1,this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"touchmoveHandler",value:function(t){if(t.stopPropagation(),null===this.drag.letItGo&&(this.drag.letItGo=Math.abs(this.drag.startY-t.touches[0].pageY)<Math.abs(this.drag.startX-t.touches[0].pageX)),this.pointerDown&&this.drag.letItGo){t.preventDefault(),this.drag.endX=t.touches[0].pageX,this.sliderFrame.style.webkitTransition="all 0ms ".concat(this.config.easing),this.sliderFrame.style.transition="all 0ms ".concat(this.config.easing);var e=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),r=this.drag.endX-this.drag.startX,n=this.config.rtl?e+r:e-r;this.sliderFrame.style[this.transformProperty]="translate3d(".concat((this.config.rtl?1:-1)*n,"px, 0, 0)")}}},{key:"mousedownHandler",value:function(t){-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(t.target.nodeName)||(t.preventDefault(),t.stopPropagation(),this.pointerDown=!0,this.drag.startX=t.pageX)}},{key:"mouseupHandler",value:function(t){t.stopPropagation(),this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"mousemoveHandler",value:function(t){if(t.preventDefault(),this.pointerDown){"A"===t.target.nodeName&&(this.drag.preventClick=!0),this.drag.endX=t.pageX,this.selector.style.cursor="-webkit-grabbing",this.sliderFrame.style.webkitTransition="all 0ms ".concat(this.config.easing),this.sliderFrame.style.transition="all 0ms ".concat(this.config.easing);var e=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),r=this.drag.endX-this.drag.startX,n=this.config.rtl?e+r:e-r;this.sliderFrame.style[this.transformProperty]="translate3d(".concat((this.config.rtl?1:-1)*n,"px, 0, 0)")}}},{key:"mouseleaveHandler",value:function(t){this.pointerDown&&(this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.drag.endX=t.pageX,this.drag.preventClick=!1,this.enableTransition(),this.updateAfterDrag(),this.clearDrag())}},{key:"clickHandler",value:function(t){this.drag.preventClick&&t.preventDefault(),this.drag.preventClick=!1}},{key:"remove",value:function(t,e){if(t<0||t>=this.innerElements.length)throw new Error("Item to remove doesn't exist 😭");var r=t<this.currentSlide,n=this.currentSlide+this.perPage-1===t;(r||n)&&this.currentSlide--,this.innerElements.splice(t,1),this.buildSliderFrame(),e&&e.call(this)}},{key:"insert",value:function(t,e,r){if(e<0||e>this.innerElements.length+1)throw new Error("Unable to inset it at this index 😭");if(-1!==this.innerElements.indexOf(t))throw new Error("The same item in a carousel? Really? Nope 😭");var n=e<=this.currentSlide>0&&this.innerElements.length;this.currentSlide=n?this.currentSlide+1:this.currentSlide,this.innerElements.splice(e,0,t),this.buildSliderFrame(),r&&r.call(this)}},{key:"prepend",value:function(t,e){this.insert(t,0),e&&e.call(this)}},{key:"append",value:function(t,e){this.insert(t,this.innerElements.length+1),e&&e.call(this)}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;if(this.detachEvents(),this.selector.style.cursor="auto",t){for(var r=document.createDocumentFragment(),n=0;n<this.innerElements.length;n++)r.appendChild(this.innerElements[n]);this.selector.innerHTML="",this.selector.appendChild(r),this.selector.removeAttribute("style")}e&&e.call(this)}}],r=[{key:"mergeSettings",value:function(t){var e={selector:".siema",duration:200,easing:"ease-out",perPage:1,startIndex:0,draggable:!0,multipleDrag:!0,threshold:20,loop:!1,rtl:!1,onInit:function(){},onChange:function(){}},r=t;for(var n in r)e[n]=r[n];return e}},{key:"webkitOrNot",value:function(){return"string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform"}}],e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}()},95333:(t,e,r)=>{"use strict";function n(t){return t.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substring(1)}))}function i(t){return t.replace(/\w/,(function(t){return t.charAt(0).toUpperCase()+t.substring(1)}))}function o(t){var e,r=0;if(0===t.length)return r;for(e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return r}function a(t){var e=t.replace(/(^|\s)[<>](\s|$)/,""),r=document.createElement("div");return r.innerHTML=e,r.innerHTML.replace(/&amp;/g,"&").replace(/\s+/g,"")===e.replace(/&amp;/g,"&").replace(/\s+/g,"")}function c(t){return t?t.split("+").map((function(t){return encodeURIComponent(encodeURIComponent(t))})).join("+"):t}function u(t){if(!t)return t;if(0===t.replace("+","").trim().length)return null;try{return t.split("+").map((function(t){return decodeURIComponent(decodeURIComponent(t))})).join("+")}catch(e){return console.error("Failed to decodeURIComponent discount code! ",t),null}}function l(t){if(!t)return t;try{t=t.split("+").map((function(t){return decodeURIComponent(t)})).join(" ")}catch(e){return console.error("Failed to decodeURIComponent discount code cookie! ",t),null}return 0===t.trim().length?null:t}function d(t){return!isNaN(t-parseFloat(t))}function s(t){return t?t.replace(/(<([^>]+)>)/gi,""):""}r.r(e),r.d(e,{capitalize:()=>i,decodeDiscount:()=>u,decodeDiscountCookie:()=>l,encodeDiscount:()=>c,isNumeric:()=>d,isValidHTML:()=>a,stringHash:()=>o,stripTags:()=>s,toTitleCase:()=>n})},80748:(t,e,r)=>{"use strict";r.d(e,{H:()=>n});var n='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1 1c0-.552.45-1 1.004-1h1.505c.831 0 1.505.672 1.505 1.5v.56l12.574.908c.877.055 1.52.843 1.397 1.71l-.866 6.034A1.504 1.504 0 0116.63 12H5.014v2h10.043a3.005 3.005 0 013.011 3c0 1.657-1.348 3-3.01 3a3.005 3.005 0 01-2.84-4H6.85a3.005 3.005 0 01-2.84 4A3.005 3.005 0 011 17c0-1.306.838-2.418 2.007-2.83V3.01 2H2.004A1.002 1.002 0 011 1zm4.014 3.064V10h11.18l.727-5.07-11.907-.866zM14.054 17c0-.552.449-1 1.003-1 .554 0 1.004.448 1.004 1s-.45 1-1.004 1a1.002 1.002 0 01-1.003-1zM3.007 17c0-.552.45-1 1.004-1s1.003.448 1.003 1-.449 1-1.003 1a1.002 1.002 0 01-1.004-1z"/></svg>'},40703:(t,e,r)=>{"use strict";r.r(e),r.d(e,{GIFT_IMAGE:()=>v,getCartIntegrationDefaults:()=>s,getDiscountGoalDefaults:()=>m,getGeneralDefaults:()=>d,getGiftChoiceModalDefaults:()=>y,getGiftFloatDefaults:()=>h,getGiftGoalDefaults:()=>f,getGiftProgressDefaults:()=>p,getGiftPromotionDefaults:()=>_,getShippingGoalDefaults:()=>g});var n=r(6696),i=r(18335),o=r(54522);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){var n;return n=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==a(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=function(){return{enabled:"0",allow_subscription_discounts:"1",expire_single_use_discounts:"0",use_app_block_speed_up:"0",use_draft_orders:"0",allow_gift_page:"0",cancel_fraudulent_orders:"0",cancel_fraudulent_orders_email:"1",detect_fraudulent_orders_email:"1",notify_fraudulent_orders_unexpected_gifts:"0",include_discounts_in_unexpected_gifts_detection:"0",use_checkout_blocker:"1",hide_branding:"0",redirect_to_cart:"0",use_draft_gifts:"0",multi_currency_draft_order:"0",should_wait_for_discount_app:"1",gifts_inventory_sync:"0"}},s=function(){return u({replace_gift_amount:"1",replace_gift_amount_pattern:"<strong>FREE!</strong>",replace_gift_amount_size:"14px",replace_gift_amount_color:"#000000",variant_change_enabled:"1",variant_change_trigger_label:"Select options",variant_change_trigger_size:"12px",variant_change_trigger_color:"#3b3b3b",variant_change_trigger_alignment:"center",variant_change_trigger_style:"",variant_change_save_button_text:"Save",variant_change_sold_out_text:"Sold out!",variant_change_quantity_label:"Items to change"},window.optionDefaults?window.optionDefaults.cart_integration:{})},p=function(){var t=window.optionDefaults?window.optionDefaults.gift_progress:{};return u({gift_progress_alignment:"center",gift_progress_height:"16px",gift_progress_border_radius:"15px",gift_progress_initial_color:"#f4f4f4",gift_progress_completed_color:"#2560f9",gift_progress_completed_check_color:"#ffffff",gift_progress_goal_image_enabled:"1",gift_progress_goal_label_enabled:"1",gift_progress_goal_title_size:"13px",gift_progress_goal_title_color:"#000000",gift_progress_goal_title_style:"bold",gift_progress_goal_target_size:"13px",gift_progress_goal_target_color:"#000000",gift_progress_goal_target_style:"",gift_progress_label_enabled:"1",gift_progress_label_size:"13px",gift_progress_label_color:"#000000",gift_progress_label_style:"",gift_progress_label_alignment:"center",gift_progress_text_background_color:"#ffffff",gift_progress_goal_target_enabled:"1",gift_progress_background:"",gift_progress_padding:"0px",gift_progress_custom_note_enabled:"0",gift_progress_custom_note_size:"13px",gift_progress_custom_note_color:"#000000",gift_progress_custom_note_style:"",gift_progress_custom_note_alignment:"center",gift_progress_custom_note_position:"bottom",gift_progress_custom_note_label:"",gift_progress_current_state_on_hover_enabled:"1",gift_progress_goal_state_on_hover_enabled:"1",gift_progress_add_link_to_gift:"0",gift_progress_hide_when_no_progress:"0",gift_progress_default_metric:n.A.SUBTOTAL.toString()},t)},f=function(){return{free_gifts:[],name:"Free Gift",goal_type:i.A.GIFT,gift_quantity:1,max_applications:1,requires:"50",max_requires:null,comparing:n.A.SUBTOTAL,is_active:!0,start_date:null,end_date:null,messages:{1:"Get a <strong>Free Gift</strong> when you spend {{required}}.",2:"Spend {{remaining}} more to get a <strong>Free Gift</strong>!",3:"You are only 1 item away from a <strong>Free Gift</strong>!",4:"Congrats! You got a <strong>Free Gift</strong>!"},altMessages:{1:"Get a <strong>Free Gift</strong> when you buy {{required}} items.",2:"Buy {{remaining}} more items to get a <strong>Free Gift</strong>!"},countries:[],filter_type:null,filter_applies_to_type:null,filter_applies_to_ids:null,reward_handling_type:o.RewardHandlingType.AUTOMATIC,enable_gift_removable:!1}},m=function(){return{name:"10% Off: SAVE10",goal_type:i.A.DISCOUNT,code:"",max_applications:1,requires:"75",max_requires:null,comparing:n.A.SUBTOTAL,is_active:!0,start_date:null,end_date:null,messages:{1:"Get <strong>10% Off</strong> when you spend {{required}}.",2:"Spend {{remaining}} more to get a <strong>10% Discount</strong>!",3:"You are only 1 item away from a <strong>10% Discount</strong>!",4:"Congrats! You got a <strong>10% Off Code: SAVE10</strong>!"},altMessages:{1:"Get <strong>10% Off</strong> when you buy {{required}} items.",2:"Buy {{remaining}} more items to get a <strong>10% Discount</strong>!"},countries:[],filter_type:null,filter_applies_to_type:null,filter_applies_to_ids:null}},g=function(){return{name:"Free Shipping!",goal_type:i.A.SHIPPING,max_applications:1,requires:"25",max_requires:null,comparing:n.A.SUBTOTAL,is_active:!0,start_date:null,end_date:null,messages:{1:"Get <strong>Free Shipping</strong> when you spend {{required}}.",2:"Spend {{remaining}} more to get <strong>Free Shipping</strong>!",3:"You are only 1 item away from <strong>Free Shipping</strong>!",4:"Congrats! You got <strong>Free Shipping</strong>!"},altMessages:{1:"Get <strong>Free Shipping</strong> when you buy {{required}} items.",2:"Buy {{remaining}} more items to get <strong>Free Shipping</strong>!"},countries:[],filter_type:null,filter_applies_to_type:null,filter_applies_to_ids:null}},h=function(){return u({gift_float_enabled:"0",gift_float_bounce_enabled:"1",gift_float_position:"1",gift_float_circle_enabled:"1",gift_float_icon:"1",gift_float_icon_custom_url:null,gift_float_circle_background:"#ffffff",gift_float_x_color:"#a8a8a8",gift_float_type:"gift",gift_float_text:"Get Free Gifts",gift_float_text_color:"#ffffff",gift_float_text_size:"16px",gift_float_text_background_color:"#000000",gift_float_text_background_padding_horizontal:"10px",gift_float_text_background_padding_vertical:"5px",gift_float_text_star_color:"#ffffff",gift_float_excluded_page_matches:null},window.optionDefaults?window.optionDefaults.gift_float:{})},_=function(){return u({gift_promotion_primary_color:"0, 127, 95",gift_promotion_primary_text_color:"#525252",gift_promotion_secondary_text_color:"#000000",gift_promotion_slider_primary_text_size:"12px",gift_promotion_slider_secondary_text_size:"10px",gift_promotion_popup_primary_text_size:"16px",gift_promotion_popup_secondary_text_size:"12px",gift_promotion_type:"text",gift_promotion_popup_header_title:"★ Spend More, Earn More ★",gift_promotion_popup_header_subtitle:"See your progress towards earning free gifts below. Free gifts earned will be automatically added to your cart!",gift_promotion_popup_earned_offers_label:"EARNED OFFERS",gift_promotion_popup_more_offers_label:"AVAILABLE OFFERS",gift_promotion_popup_continue_shopping_button_label:"Continue Shopping",gift_promotion_popup_in_progress_label:"Complete",gift_promotion_popup_completed_label:"Completed",gift_promotion_slider_see_all_label:"See All Deals",gift_promotion_message_size:"13px",gift_promotion_message_color:"#000000",gift_promotion_message_style:"italic",gift_promotion_message_alignment:"center",gift_promotion_message_background:"#ffffff",gift_promotion_message_auto_show_contents:"0"},window.optionDefaults?window.optionDefaults.gift_promotion:{})},y=function(){return u({gift_choice_modal_title:"Select Your Free Gift!",gift_choice_modal_title_color:"#000000",gift_choice_modal_title_size:"22px",gift_choice_modal_subtitle:"You can choose any reward.",gift_choice_modal_subtitle_color:"#000000",gift_choice_modal_subtitle_size:"17px",gift_choice_modal_background_color:"#ffffff",gift_choice_modal_tile_type:"product",gift_choice_modal_tiles_per_page:"4",gift_choice_modal_pagination_type:"dot",gift_choice_modal_replace_price:"1",gift_choice_modal_replace_price_pattern:"FREE!",gift_choice_modal_replace_price_color:"#d81621",gift_choice_modal_replace_price_size:"14px",gift_choice_modal_strikethrough_retail_price:"1",gift_choice_modal_done_button_enabled:"1",gift_choice_modal_done_button_label:"Continue Shopping",gift_choice_modal_done_button_color:"#ffffff",gift_choice_modal_done_button_size:"14px",gift_choice_modal_done_button_background:"#000000",gift_choice_modal_cart_button_enabled:"1",gift_choice_modal_cart_button_label:"Go to cart",gift_choice_modal_cart_button_color:"#ffffff",gift_choice_modal_cart_button_size:"14px",gift_choice_modal_cart_button_background:"#000000",gift_choice_modal_no_thanks_button_enabled:"1",gift_choice_modal_no_thanks_button_label:"No, thanks!",gift_choice_modal_no_thanks_button_color:"#000000",gift_choice_modal_no_thanks_button_size:"14px",gift_choice_modal_add_to_cart_button_label:"Add to Cart",gift_choice_modal_add_to_cart_button_color:"#ffffff",gift_choice_modal_add_to_cart_button_size:"14px",gift_choice_modal_add_to_cart_button_background:"#000000"},window.optionDefaults?window.optionDefaults.gift_choice_modal:{})},v="https://d2fk970j0emtue.cloudfront.net/images/gift.png"},65806:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}r.d(e,{m:()=>i});var i=function(t){return t&&t.currency&&"object"===n(window.Shopify)&&"object"===n(window.Shopify.currency)&&window.Shopify.currency.active===t.currency&&window.Shopify.currency.rate?window.Shopify.currency.rate:null}},17057:(t,e,r)=>{"use strict";r.d(e,{Ri:()=>n,TB:()=>i});var n=[".ajaxcart__qty-num",".ajaxifyCart--num",".hs-cart-plus-minus input",".product-cart__quantity",".quantity input",'.quantity-input[name="quantity"]','.quantity-input[is="quantity-input"]',".quantity-selector input",".quantity-selector",".quantity-selector__value",".satcb-cs-item-qty input",".ws-cs-item-qty input","[data-cart-item-input-quantity]","[data-cart-item-quantity]:not(div)","[data-product-quantity]:not(div)","[data-quantity-input]",'[name="quantity"]','[name="updates[]"]','[x-model="item.quantity"]',"input.cart-qty","input.cart-quantity-input","input.global-qty-text","input.item-quantity","input.js-qty-input","input.number_quantity","input.qty-input","input.quantity--input__input","input.QuantitySelector__CurrentQuantity","input.update-qty","input[data-line-id]","input.line-item__qty-selector-input",'.spinner_wrap input[type="number"][data-id]',".cart-quantity-wrap input[data-id]",".custom--quantity-wrapper .custom--quantity-dropdown",'#upcart-button-minus + input[type="number"]',".quantitySelector input",'.upcart-product-quantity-minus + input[type="number"]',".mini-cart-quantity input",'.cart__qty input[type="number"]'].join(","),i=[].concat(["#addProductsToCart","#AddToCart","#monster-upsell-cart button",'#sticky-app-client [data-cl="mini-cart"] button',"#upcart-button-plus",".add-to-cart",".ajax-cart__qty-control--up",".ajax-quantity-selector .plus",".ajaxcart__qty-adjust",".ajaxcart__qty-plus",".ajaxcart__quantity .button",".ajaxifyCart--qty-adjuster",".button--addToCart",".button-plus-slide-out",".cart--plus",".cart-item-quantity-button",".cart-item-quantity-step[data-step-up]",".cart-upsell-add",".cart__item-button",".cart__popup-qty",".cart-quantity-wrap button[data-id]",".cd-cart-quantity-plus",".edit-qty",'.f-quantity__button[name="plus"]',".go-cart-item__quantity-button",".gt_cart-quantity--number",".gt_quantity_plus",".hc-qty-btn",".hs-qtybutton",".icart-qty-input",".icartAddToCart",".icartQtyInput",'.input-quantity [data-control="+"]',".js--qty-adjuster",".js-add-single",".js-cart-drawer-qty",".js-change-quantity",".js-counter .inputCounter-up",".js-qty-button-plus",".js-qty__adjust",".js-qty__adjust--plus",".line-item-quantity-button-plus",".line-item-quantity-increment",".lt_cart-quantity--number",'.m-cart-quantity--button[name="plus"]',".minicart__ProductItem__Quantity__Button--plus",".mini-cart-quantity-button",".on-quantity",".plus-btn",".product-card__overlay span[data-id]",".product-quantity__action",".product-add-to-cart",".qty-add",".qty-adjust",'.qty-box-set [type="button"]',".qty-group .button",".qty-plus",".qty-wrapper .qty-up",".inc.qtybtn",".previewCartItem-edit",".qtyAdjust .plus",".qtybutton",".qtyplus",".qty-control .increase",".quantity .button",".quantity button",".quantity-increment",".quantity-input-plus",".quantity-plus",".quantity-select .button-wrapper",".quantity-selector--plus",".quantity-selector__button",".quantity__button",".quantity_up",".quantity__increase",".QuantitySelector__Button",".quantitySelector .numberStepper_button-up",".quick-cart__button",".quick-cart__button-increase",".quick-cart__quantity-button",".rebuy-product-actions .rebuy-button",".rebuy-cart__flyout-item-quantity-widget-button",".satcb-cs-item-qty a",".semantic-amount .incr",".slide-cart-quantity__increment-button",".spinner_wrap .spinner-plus",".upcart-product-quantity-plus",".ws-cs-item-qty a",'[\\@click*="update_line"]','[\\@click\\.prevent*="add_to_cart"]','[x-on\\:click\\.prevent*="cart.addItemQty"]','button[\\@click*="item.quantity++"]','[data-action="add-to-cart"]','[data-action="increase-quantity"]','[data-action="update-item-quantity"]',"[data-add-to-cart]","[data-cart-update]","[data-qty-change]",'[data-qty-adjust="plus"]','[name="add"]',"a.plus","a.quantity-adjust","button.plus","input.global-plus","input.plus",'quantity-btn.cart-item-quantity__button[data-action="plus"]','.qtyBtn[name="plus"]',".button-plus"],["#cart-item-remove-button","#upcart-button-minus",".ajax-cart__qty-control--down",".ajax-cart__delete",".ajax-quantity-selector .minus",".ajax-cart-item__remove",".ajaxcart__qty-remove",".ajaxcart__qty-minus",".ajaxifyCart--remove",".bt-remove-cart",".btn-remove",".button-minus-slide-out",".button_remove",".single-cart-product .cart-close-icon",".cart--minus",".cart-drawer-remove",".cart-drawer__remove",".cart-drawer__item-delete",".cart-item-quantity .remove",".cart-item-quantity-step[data-step-down]",".cart-item--remove-link",".cart-item-remove[data-remove-item]",".cart-mini-item-remove",".cart-product-remove",".cart-product__remove",".cart-remove a",".cart-remove-btn",".cart-table-prd-remove",".cart__product-remove",".cart__remove",".cart__trash",".CartItem__Remove",".cartLineItem_remove",".cartProductRmv",".cd-cart-remove-button",".cd-cart-quantity-minus",'.f-quantity__button[name="minus"]',".delete-item-cart",".go-cart-item__remove",".gt_quantity_minus",".header_delete_cartitem_js",".hs-remove-item",".icart-delete-btn",'.input-quantity [data-control="-"]',".item--remove a",".js-counter .inputCounter-down",".js-deleteitem-ajax",".js-remove-single",".js-qty-button-minus",".js-qty__adjust--minus",".js-qty__remove",".line-item-quantity-button-minus",".line-item-quantity-decrement",".line-item__quantity-remove",".line-item__remove-button",".line-item-remove",".line-item__remove",'.m-cart-quantity--button[name="minus"]',".minicart__ProductItem__Quantity__Button--minus",".minicart__trash",".minus-btn",".product-item .remove",".qty-minus",".qty-wrapper .qty-down",".dec.qtybtn",".qtyminus",".quantity-decrement",".quantity-input-minus",".quantity-minus",".quantity-selector--minus",".quantity-selector--remove",".quantity_down",".quantity__decrease",".quantitySelector .numberStepper_button-down",".qtyAdjust .minus",".qty-control .reduce",".quick-cart__button-decrease",".quick-cart__button-remove",".rebuy-cart__flyout-item-remove",".remove-from-cart",".remove_from_cart",".remove.item",".scd-item__remove",".semantic-amount .decr",".slide-cart-quantity__decrement-button",".slide-cart-product-delete",".spinner_wrap .spinner-min",".tt-item-close",".ucd-remove",".upcart-product-quantity-minus",".ws-cs-item-close",'[\\@click\\.prevent*="remove_line"]','[data-action="decrease-quantity"]','[data-action="remove-item"]',"[data-cart-item-delete]","[data-remove]",'[data-qty-adjust="minus"]','[data-qty-adjust="remove"]','[x-on\\:click\\.prevent*="cart.removeItemQty"]','[x-on\\:click\\.prevent*="cart.removeAllItemQty"]','button[\\@click*="item.quantity--"]','button[\\@click="removeVariantFromCart"]',"a.cart-remove","a.delete-link","a.minus","a.remove","a.remove_item","a.remove_item_multi","button.minus","cart-remove-button","input.global-minus","input.minus","a[data-cart-remove]","button[data-cart-remove]","li.js-cart-remove i","[data-cart-item-button-dismiss]",".cart__form-item-remove-wrapper button",".ajax-cart__item-remove",".removeItem",".product-remove a",".js-remove-mini-cart",".qty-remove",".remove__button",'quantity-btn.cart-item-quantity__button[data-action="minus"]',".item__delete",".ajax-cart__item-remove--js--icon","button[data-remove-line-item]",'.qtyBtn[name="minus"]',".button-minus"]).join(",")},29691:(t,e,r)=>{"use strict";r.r(e),r.d(e,{getCartHash:()=>o,getQuantityInputVariantId:()=>a});var n=r(91569),i=r(38278),o=function(t){if(!t||!t.items||!t.items.length)return"";var e=t.external_integration||"";return t.items.map((function(t){var e;return(t.key||t.id)+"-"+t.quantity+"-"+((null===(e=t.discounts)||void 0===e?void 0:e.length)||0)})).join("|")+"|"+t.total_price+"|"+e+"|"+t.currency+"|"+(0,i.getDefaultCurrencyName)()},a=function(t){var e,r=["data-id","data-variant_id","data-variant-id","data-vid","data-quantity-variant-id"],i=["data-line-key","data-line-id","data-qty-id","data-index","data-item-key","data-cart-update","data-cart-remove","data-remove-item","data-cart-quantity-id","id","name","data-line","data-cart-item"];e=t.classList.contains("remove-from-cart")?[].concat(r,["data-product-id"],i):[].concat(r,i);var o=(0,n.getLastCartResponse)()||window.docappCart,a=100;o&&o.items&&o.items.length&&(a=o.items.length);var c=t.getAttribute("id"),u="id";if(!c||!c.match(/^quantity([a-z-]*)?-[0-9]+$/i))for(var l in e)if((c=t.getAttribute(e[l]))&&c.match(/[0-9]+/)){u=e[l];var d=parseInt(c.replace(/[^0-9]/g,""));if(d&&(d<=a||d>1e5))break}return c?o&&o.items&&o.items.length?function(t,e,r,n){if(e.match(/^quantity([a-z-]*)?-[0-9]+$/i)){var i=parseInt(e.split("-").pop());if(i>=0&&i<=n.items.length){var o=e.replace(i,"0"),a=0===i||document.querySelector("[".concat(r,'="').concat(o,'"]'))?0:1;return n.items[i-a].variant_id.toString()}}var c=parseInt(e);if(c>=0&&c<=n.items.length){var u=function(t){var e=t.tagName;return t.classList.forEach((function(t){return e+="."+t})),e}(t),l=0===c||document.querySelector("".concat(u,"[").concat(r,'="0"]'))?0:1;return c===n.items.length&&(l=1),n.items[c-l].variant_id.toString()}return e}(t,c,u,o):c:null}},16283:(t,e,r)=>{"use strict";r.d(e,{A:()=>_});var n=r(29691),i=r(69459),o=r(84659),a=r(94240),c=r(95333),u=r(16222),l=r(68889),d=r(95219);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var p="docapp-free-gift-refresh",f=(0,o.mI)(p),m="docapp-free-gift-reloads",g=(0,o.mI)(m);g=g?JSON.parse(g):[];var h=new URLSearchParams(window.location.search);const _={redirectToCartOnChange:!1,updateCartState:function(t){var e=this;if(window.freeGiftCartUpsellProAppDisableRefresh||"1"===h.get("docapp-free-gift-disable-refresh"))return(0,i.M)("Refresh disabled. END"),!1;var r=window.Shopify&&window.Shopify.routes?window.Shopify.routes.root:"/";if("/cart"===window.location.pathname||window.location.pathname===r+"cart")return this.refreshThePage(t);if(document.querySelector(".tt-cart .tt-dropdown-menu, #cartSlideoutAside, #cart-info .ajaxcart"))return(0,i.M)("Update drawer - Known cart integration which requires a refresh"),this.refreshThePage(t);try{var n,o,d,p,f,m,g,_,y,v,w,b,C,S,A;if(window.HsCartDrawer&&"function"==typeof window.HsCartDrawer.updateSlideCart&&document.querySelector(".hs-site-cart-popup-layout, .hs-header-layout"))return(0,i.M)("Update drawer HsCartDrawer updateSlideCart"),window.HsCartDrawer.updateSlideCart(),!1;if(!window.ignoreRebuyDrawer&&window.Rebuy&&window.Rebuy.Cart&&"function"==typeof window.Rebuy.Cart.fetchCart&&document.querySelector("#rebuy-cart"))return window.Rebuy.Cart.fetchCart(),(0,i.M)("Update drawer Rebuy"),!1;if(window.SATCB&&window.SATCB.Widgets&&window.SATCB.Widgets.CartSlider&&"function"==typeof window.SATCB.Widgets.CartSlider.openSlider&&document.querySelector(".satcb-cs"))return window.SATCB.Widgets.CartSlider.openSlider(),(0,i.M)("Update drawer SATCB"),!1;if(t&&"function"==typeof window.SLIDECART_SET_CART&&document.querySelector("#slidecarthq div"))return window.SLIDECART_SET_CART(t),(0,i.M)("Update drawer SLIDECART_SET_CART"),!1;if("function"==typeof window.SLIDECART_UPDATE&&document.querySelector("#slidecarthq div"))return window.SLIDECART_UPDATE(),(0,i.M)("Update drawer SLIDECART_UPDATE"),!1;if(window.sellify&&window.sellify.ucd&&window.sellify.ucd.helpers&&window.sellify.ucd.helpers.ShopifyAPI&&"function"==typeof window.sellify.ucd.helpers.ShopifyAPI.getCart&&document.querySelector("#sellify-ucd-cart-drawer"))return window.sellify.ucd.helpers.ShopifyAPI.getCart(window.sellify.ucd.helpers.ajaxCart.buildCart),(0,i.M)("Update drawer sellify"),!1;if("function"==typeof window.upcartRegisterAddToCart&&document.querySelector("#upCart")&&document.querySelector("#UpcartPopup"))return setTimeout((function(){return window.upcartRegisterAddToCart()}),500),(0,i.M)("Update drawer upcart app - upcartRegisterAddToCart"),!1;var E,q=window.csapps?document.querySelectorAll("[data-csapp_line_wrapper] .cart-quantity-wrap input[data-id]:not([readonly])"):[];if(q.length>0)return t&&t.item_count?(q[q.length-1].dispatchEvent(new Event("change",{bubbles:!0})),(0,i.M)("Update drawer aiod cart app"),!1):((0,i.M)("Update drawer aiod cart app - empty cart = refresh"),this.refreshThePage(t));if("function"==typeof window.HS_SLIDE_CART_UPDATE&&document.querySelector(".hs-site-cart-popup-layout"))return window.HS_SLIDE_CART_UPDATE(),(0,i.M)("Update drawer HS_SLIDE_CART_UPDATE"),!1;if("function"==typeof window.CD_REFRESHCART&&document.querySelector("#cart-drawer-app .cd-cart"))return window.CD_REFRESHCART(),(0,i.M)("Update drawer CD_REFRESHCART"),!1;if("function"==typeof window.BoostPFS&&"object"===s(window.BoostPFS.Utils)&&document.querySelector(".boost-pfs-minicart-wrapper"))return(0,i.M)("Update drawer not supported for BoostPFS drawer. Refresh!"),this.refreshThePage(t);if("function"==typeof window.openeamcart&&document.querySelector("#shopify-section-eam-cart"))return window.openeamcart(),(0,i.M)("Update drawer openeamcart"),!1;if(t&&void 0!==window.vndHlp&&"function"==typeof window.vndHlp.refreshCart)return window.vndHlp.refreshCart(t),(0,i.M)("Update drawer vndHlp.refreshCart"),!1;if(t&&window.Cart&&"function"==typeof window.Cart.buildCart)return window.Cart.buildCart(t),(0,i.M)("Update drawer Cart.buildCart"),!1;if(t&&"function"==typeof window.buildCart&&document.querySelector("#mini__cart.yv_side_drawer_wrapper"))return window.buildCart(t),(0,i.M)("Update drawer window.buildCart"),!1;if(window.cartNotification&&"function"==typeof window.cartNotification.getCart&&document.querySelector("#cart-notification"))return window.cartNotification.getCart(),(0,i.M)("Update drawer cartNotification"),!1;if("function"==typeof window.do_cart_refresh)return window.do_cart_refresh(!1),(0,i.M)("Update drawer do_cart_refresh"),!1;if(window.theme&&"function"==typeof window.theme.CartDrawer&&null!==(n=window.theme)&&void 0!==n&&null!==(n=n.cart)&&void 0!==n&&n.getCartProductMarkup&&document.querySelector("#shopify-section-header #CartDrawer.drawer"))return document.dispatchEvent(new Event("cart:build")),(0,i.M)("Update drawer Motion theme cart:build event"),!1;if(window.theme&&"function"==typeof window.theme.CartDrawer&&(null===(o=window.theme)||void 0===o||null===(o=o.cart)||void 0===o||!o.getCartProductMarkup)&&"function"==typeof window.$&&document.querySelector("#shopify-section-header #CartDrawer.drawer"))return $("body").trigger("added.ajaxProduct"),(0,i.M)("Update drawer added.ajaxProduct"),!1;if(window.theme&&"function"==typeof window.theme.CartDrawer&&window.theme.CartDrawer.toString().includes("new theme.Drawers"))return setTimeout((function(){return new window.theme.CartDrawer}),250),(0,i.M)("Update drawer theme CartDrawer"),!1;if(null!==(d=window.theme)&&void 0!==d&&null!==(d=d.settings)&&void 0!==d&&d.cart_drawer&&document.querySelector("#Cart-Drawer")){if(!t||!t.item_count)return(0,i.M)("Update drawer #Cart-Drawer no items need to refresh"),this.refreshThePage(t);var P=document.createElement("input");return P.style.display="none",P.classList.add("qty"),P.dataset.index="1",P.value=t.items[0].quantity,document.querySelector("#CartDrawerItem-1").appendChild(P),P.dispatchEvent(new Event("change",{bubbles:!0})),(0,i.M)("Update drawer #Cart-Drawer"),!1}if(window.Shopify&&window.Shopify.theme&&("Expanse"===window.Shopify.theme.name||902===window.Shopify.theme.theme_store_id)&&document.querySelector("#HeaderCart.site-header__drawer"))return document.dispatchEvent(new Event("cart:build")),(0,i.M)("Update drawer cart:build"),!1;if("undefined"!=typeof slate&&void 0!==slate.cart&&"function"==typeof slate.cart.updateCart)return slate.cart.updateCart(),(0,i.M)("Update drawer slate.cart.updateCart"),!1;if(t&&"undefined"!=typeof Shopify&&"function"==typeof Shopify.updateQuickCart)return Shopify.updateQuickCart(t),(0,i.M)("Update drawer Shopify.updateQuickCart"),!1;if("undefined"!=typeof Shopify&&"function"==typeof Shopify.KT_getCart&&document.querySelector('[data-section-type="kt-cart-drawer"] .content__cart-drawer'))return Shopify.KT_getCart(),(0,i.M)("Update drawer Shopify.KT_getCart"),!1;if(t&&void 0!==window.bcActionList&&"function"==typeof window.bcActionList.atcBuildMiniCartSlideTemplate)return window.bcActionList.atcBuildMiniCartSlideTemplate(t),"function"==typeof window.openMiniCart&&window.openMiniCart(),(0,i.M)("Update drawer bcActionList"),!1;if(t&&"undefined"!=typeof Shopify&&void 0!==Shopify.updateCartInfo&&document.querySelector(".top-cart-holder .cart-target form .cart-info .cart-content"))return Shopify.updateCartInfo(t,".top-cart-holder .cart-target form .cart-info .cart-content"),(0,i.M)("Update drawer Shopify.updateCartInfo"),!1;if(t&&"undefined"!=typeof Shopify&&void 0!==Shopify.updateCartInfo&&document.querySelector("#cart-info #cart-content"))return Shopify.updateCartInfo(t,"#cart-info #cart-content"),(0,i.M)("Update drawer Shopify.updateCartInfo, selector 2"),!1;if(window.theme&&window.theme.cart&&"function"==typeof window.theme.cart._updateCart&&"function"==typeof window.$)return window.theme.cart._updateCart({}),window.$("body").trigger("updateCart"),document.dispatchEvent(new Event("cart:build")),(0,i.M)("Update drawer cart:build + updateCart"),!1;if(window.theme&&"function"==typeof window.theme.refreshCart)return window.theme.refreshCart(),(0,i.M)("Update drawer theme.refreshCart"),!1;if("function"==typeof(null===(p=window.theme)||void 0===p||null===(p=p.Cart)||void 0===p||null===(p=p.prototype)||void 0===p?void 0:p._onProductAdded)&&document.querySelector("#sidebar-cart.Drawer form.Cart.Drawer__Content"))return null===(E=window.theme)||void 0===E||null===(E=E.Cart)||void 0===E||null===(E=E.prototype)||void 0===E||E._onProductAdded(),(0,i.M)("Update drawer Pursuit _onProductAdded"),!1;if(document.querySelector("#sidebar-cart.Drawer form.Cart.Drawer__Content"))return setTimeout((function(){var t=new Event("product:added");t.detail={},t.detail.quantity=0,document.dispatchEvent(t)}),250),setTimeout((function(){document.documentElement.dispatchEvent(new Event("cart:refresh"))}),500),(0,i.M)("Update drawer BOOMR product:added / cart:refresh"),!1;if(document.querySelector("cart-drawer#cart-drawer.cart-drawer"))return setTimeout((function(){document.dispatchEvent(new Event("cart:refresh"))}),500),(0,i.M)("Update drawer BOOMR cart:refresh"),!1;if("function"==typeof window.updateQtyCart&&"function"==typeof window.$&&document.querySelector("#sidebar-cart.cart-drawer .cart-content[data-cart-content]"))return fetch("/cart?view=drawer&timestamp="+Date.now(),{credentials:"same-origin",method:"GET"}).then((function(t){t.text().then((function(t){$("[data-cart-content]").html(t)}))})),(0,i.M)("Update drawer #sidebar-cart.cart-drawer"),!1;if(document.querySelector("form#mini-cart .mini-cart__content .mini-cart__line-item"))return setTimeout((function(){return document.documentElement.dispatchEvent(new Event("cart:refresh"))}),500),(0,i.M)("Update drawer custom cart-drawer elem form#mini-cart"),!1;var T=(0,a.LQ)("shopify_cart_state");if(t&&T&&document.querySelector("form.cart-drawer")){(0,a.Fn)("shopify_cart_state",JSON.stringify(t));var k=new Event("storage");return k.key="shopify_cart_state",window.dispatchEvent(k),(0,i.M)("Update drawer BOOMR shopify_cart_state"),!1}if(document.querySelector(["#ajaxifyModal #ajaxifyCart","#ajaxifyDrawer #ajaxifyCart",".fixed-cart-wrap #slidedown-cart",".sidebar-drawer-container .sidebar-drawer"].join(",")))return t&&t.item_count?window.forceUpdateModalCart?((0,i.M)("Update drawer using custom forceUpdateModalCart"),window.forceUpdateModalCart(),!1):(console.log("Dr. Free Gift & BOGO: forceUpdateModalCart not set, but was expected."),this.refreshThePage(t)):(console.log("Dr. Free Gift & BOGO: forceUpdateModalCart reload due to empty cart."),this.refreshThePage(t));if(window.theme&&window.theme.Cart&&"function"==typeof window.theme.Cart.updateCart)return window.theme.Cart.updateCart(),(0,i.M)("Update drawer Cart updateCart"),!1;if(t&&"function"==typeof window.render_cart_drawer&&window.render_cart_drawer.toString().includes("render_cart_drawer(cart, target, oldQtd, id_variant)"))return window.render_cart_drawer(t,jQuery(".list-products"),0,""),(0,i.M)("Update drawer render_cart_drawer"),!1;if(window.cart&&"function"==typeof window.cart.getCart&&"function"==typeof window.cart.closeCartDropdown&&"function"==typeof window.cart.openCartDropdown&&document.getElementById("cart-dropdown"))return window.cart.getCart(),(0,i.M)("Update drawer cart.getCart, #cart-dropdown"),!1;if(null!==(f=window.cart)&&void 0!==f&&f.getCart&&document.getElementById("cart-drawer"))return window.cart.getCart(),(0,i.M)("Update drawer cart.getCart, #cart-drawer"),!1;if(null!==(m=window.cart)&&void 0!==m&&m.getCart&&document.querySelector(".cart-drawer"))return window.cart.getCart(),(0,i.M)("Update drawer cart.getCart, .cart-drawer"),!1;if(window.ajaxCart&&"function"==typeof window.ajaxCart.load){var O=document.querySelector("#root aside#cart.toggle");return O&&(O.innerHTML=""),window.ajaxCart.load(),(0,i.M)("Update drawer ajaxCart load"),!1}if(window.Shopify&&window.Shopify.theme&&window.Shopify.theme.jsAjaxCart&&"function"==typeof window.Shopify.theme.jsAjaxCart.updateView)return window.Shopify.theme.jsAjaxCart.updateView(),(0,i.M)("Update drawer jsAjaxCart updateView"),!1;if(window.Shopify&&window.Shopify.theme&&window.Shopify.theme.ajaxCart&&"function"==typeof window.Shopify.theme.ajaxCart.init&&document.querySelector(".js-mini-cart-trigger"))return document.querySelector(".js-mini-cart-trigger").dispatchEvent(new Event("click")),(0,i.M)("Update drawer js-mini-cart-trigger"),!1;if(window.theme&&window.theme.ajaxCart&&"function"==typeof window.theme.ajaxCart.update&&(document.querySelector("#CartDrawer.drawer")||document.querySelector("#CartModal.modal")))return window.theme.ajaxCart.update(),(0,i.M)("Update drawer theme.ajaxCart.update"),!1;if(window.Shopify&&"function"==typeof window.Shopify.addItem&&"function"==typeof window.jQuery&&document.querySelector(".cart-flyout .cart-flyout__content"))return jQuery.get("/cart?view=json",(function(t){jQuery(".cart-flyout").html(t)})),(0,i.M)("Update drawer g-addtoicart cart-flyout"),!1;if(t&&window.wetheme&&"function"==typeof window.wetheme.toggleRightDrawer)return window.wetheme.toggleRightDrawer("cart",!0,{cart:t}),(0,i.M)("Update drawer toggleRightDrawer"),!1;if(window.gfTheme&&"function"==typeof window.gfTheme.getCart)return window.gfTheme.getCart((function(){})),(0,i.M)("Update drawer gfTheme"),!1;if(t&&(0,a.LQ)("cartCurrentData")&&document.querySelector(".popup__body .js-popup-cart-ajax"))return(0,a.Fn)("cartCurrentData",JSON.stringify(t)),setTimeout((function(){return(0,a.Fn)("cartCurrentData",JSON.stringify(t))}),100),setTimeout((function(){return(0,a.Fn)("cartCurrentData",JSON.stringify(t))}),1e3),(0,i.M)("Update drawer cartCurrentData in local storage"),!1;if(document.querySelector("cart-drawer#mini-cart form#mini-cart-form, #shopify-section-mini-cart cart-drawer#mini-cart"))return t&&t.item_count?(setTimeout((function(){return document.documentElement.dispatchEvent(new Event("cart:refresh"))}),750),(0,i.M)("Update drawer custom cart-drawer elem"),!1):((0,i.M)("When cart is empty custom cart-drawer elem's event may not work. Refresh!"),this.refreshThePage(t));if(window.CartJS&&"function"==typeof window.CartJS.getCart&&document.querySelector("#cart-drawer,#cartDrawer"))return setTimeout((function(){return window.CartJS.getCart(null)}),500),(0,i.M)("Update drawer CartJS getCart"),!1;if("function"==typeof window.update_cart&&document.querySelector("#custom-drawer-cart"))return window.update_cart(),(0,i.M)("Update drawer custom-drawer-cart"),!1;if(window.fcsb&&"function"==typeof window.fcsb.fetchCart&&document.querySelector("#sticky-app-client")&&document.querySelector('#sticky-app-client [data-cl="mini-cart"]'))return window.fcsb.fetchCart(),(0,i.M)("Update drawer fcsb"),!1;if(window.theme&&"function"==typeof window.theme.updateCartSummaries)return window.theme.updateCartSummaries(),(0,i.M)("Update drawer theme.updateCartSummaries"),!1;if(window.BT&&"function"==typeof window.BT.updateHeaderCartHtml)return window.BT.updateHeaderCartHtml(!0),(0,i.M)("Update drawer BT.updateHeaderCartHtml"),!1;if(window.geckoShopify&&"function"==typeof window.geckoShopify.GetCartData)return document.querySelectorAll(".jsccount").forEach((function(t){return t.innerHTML=""})),window.geckoShopify.GetCartData(1,1),(0,i.M)("Update drawer geckoShopify.GetCartData"),!1;if(window.theme&&window.theme.classes&&"function"==typeof window.theme.classes.CoreCart&&document.querySelector('[data-view="cart"] .cart--root'))return setTimeout((function(){return document.querySelector('[data-view="cart"] .cart--root').dispatchEvent(new Event("update-html"))}),500),(0,i.M)("Update drawer cart--root"),!1;if(window.theme&&"function"==typeof window.theme.cart&&"function"==typeof window.theme.cart.updateTotals&&"function"==typeof(null===(g=document.querySelector('[data-view="cart"] .cart--root'))||void 0===g?void 0:g.updateHtml))return t&&t.item_count?(setTimeout((function(){return document.querySelector('[data-view="cart"] .cart--root').updateHtml()}),500),(0,i.M)("Update drawer cartRoot.updateHtml"),!1):((0,i.M)("When cart is empty cartRoot.updateHtml does not work. Refresh!"),this.refreshThePage(t));if(window.theme&&window.theme.classes&&"function"==typeof window.theme.classes.FrameworkCart&&document.querySelector('.cart--root[data-js-class="Cart"]')){var D=document.querySelector('.cart--root[data-js-class="Cart"]');return D.dispatchEvent(new Event("updateHtml",{bubbles:!0})),D.dispatchEvent(new Event("update-html",{bubbles:!0})),(0,i.M)("Update drawer cart--root updateHtml/update-html event"),!1}if("function"==typeof(null===(_=window.theme)||void 0===_||null===(_=_.cart)||void 0===_?void 0:_.fetchTotals)&&"function"==typeof(null===(y=document.querySelector("drawer-root.drawer--root cart-root.cart--root"))||void 0===y?void 0:y.updateHtml))return setTimeout((function(){return document.querySelector("drawer-root.drawer--root cart-root.cart--root").updateHtml()}),500),(0,i.M)("Update drawer cart-root updateHtml"),!1;var M=window.CartDrawer?document.querySelector("#shopify-section-cart-drawer cart-drawer cart-drawer-items, #CartDrawer.cart-drawer cart-drawer-items"):null;if(M&&M.onChange){if(t&&t.items.length){var I,L=document.querySelector("input#Drawer-quantity-1.quantity__input");return L?(L.value=t.items[0].quantity,I={target:L}):I={target:{dataset:{index:1},value:t.items[0].quantity}},M.onChange(I),(0,u.F)("#CartDrawer-LineItemError-1 {display: none;}"),(0,i.M)('Update drawer customCartDrawerItems["onChange"]'),!1}return(0,i.M)('Update drawer customCartDrawerItems["onChange"] - no items, force refresh!'),this.refreshThePage(t)}var x=window.themeVariables?document.querySelector("#shopify-section-cart-drawer cart-drawer, .shopify-section cart-drawer"):null;if(x&&"function"==typeof x._onCartRefreshListener)return x._onCartRefreshListener(),(0,i.M)("Update drawer #shopify-section-cart-drawer cart-drawer"),!1;var j=window.theme&&"object"===s(window.theme.CartDrawerSection)?document.querySelector(".cart-drawer-modal cart-form.cart-drawer"):null;if(j&&"function"==typeof j.refresh)return setTimeout((function(){return document.dispatchEvent(new CustomEvent("theme:cartchanged",{bubbles:!0,cancelable:!1}))}),300),t&&document.querySelectorAll(".cart-link__count").forEach((function(e){return e.innerHTML=t.item_count})),(0,i.M)("Update drawer .cart-drawer-modal cart-form.cart-drawer"),!1;var U="object"===s(null===(v=window.theme)||void 0===v?void 0:v.info)?document.querySelector("cart-drawer cart-form"):null;if(U&&"function"==typeof U.refresh)return U.refresh(),(0,i.M)("Update drawer Symmetry cart-drawer cart-form"),!1;var N=window.CartDrawer?document.querySelector("#Drawer-Cart cart-drawer"):null;if(N&&"function"==typeof N.updateCart)return N.updateCart(),(0,i.M)("Update drawer #Drawer-Cart cart-drawer updateCart"),!1;var G,R="function"==typeof CartItems?document.querySelector("cart-drawer mini-cart cart-items"):null;if(R&&"function"==typeof R.updateQuantity)return t&&t.item_count?(R.updateQuantity(1,t.items[0].quantity,"updates[]"),(0,i.M)("Update drawer beYoursThemeMiniCart"),!1):((0,i.M)("Update drawer beYoursThemeMiniCart - empty cart = refresh"),this.refreshThePage(t));if("function"==typeof window.showCart&&document.querySelector(".drawer .drawer_container"))return window.showCart(),(0,i.M)("Update drawer showCart"),!1;if(window.WAU&&window.WAU.AjaxCart&&"function"==typeof window.WAU.AjaxCart.init&&"function"==typeof window.WAU.AjaxCart.showDrawer&&document.querySelector('#slideout-ajax-cart[data-wau-slideout="ajax-cart"] #mini-cart')&&document.querySelector(".js-mini-cart-trigger.js-slideout-open"))return window.WAU.AjaxCart.hideDrawer({cart_action:"drawer"}),setTimeout((function(){return document.querySelector(".js-mini-cart-trigger.js-slideout-open").dispatchEvent(new Event("click"))}),400),(0,i.M)("Update drawer WAU - close + click"),!1;if("function"==typeof window.fetchCart&&document.querySelector(".cart-flyout .cart-drawer"))return window.fetchCart(),(0,i.M)("Update drawer fetchCart"),!1;if(window.elessiShopify&&"function"==typeof window.elessiShopify.initAddToCart&&document.querySelector(".cart__popup, .jas-mini-cart.jas-push-menu"))return t&&t.item_count?(window.elessiShopify.initAddToCart(),(0,i.M)("Update drawer elessiShopify.initAddToCart"),!1):((0,i.M)("Update drawer elessiShopify.initAddToCart - empty cart = refresh"),this.refreshThePage(t));if(window.Shopify&&window.Shopify.theme&&window.Shopify.theme.sections&&window.Shopify.theme.sections.registered&&window.Shopify.theme.sections.registered.cart&&document.querySelector(".cart__drawer .drawer__body"))return document.dispatchEvent(new Event("theme:cart:reload")),(0,i.M)("Update drawer Pipeline theme:cart:reload"),!1;if("function"==typeof window.$&&window.theme&&"function"==typeof window.theme.cartUpdatePopup&&"function"==typeof window.theme.cartUpdatePopupModel&&document.querySelector("#CartDrawer"))return $("body").trigger("completeChangeItem.ajaxCart"),(0,i.M)("Update drawer completeChangeItem.ajaxCart"),!1;if(window.wetheme&&window.wetheme.cartDrawer&&"function"==typeof window.wetheme.cartDrawer.updateCartDrawer&&document.querySelector("#cartSlideoutWrapper"))return window.wetheme.cartDrawer.updateCartDrawer(t),(0,i.M)("Update drawer updateCartDrawer"),!1;if(window.iopCart&&window.iopCart.api&&"function"==typeof window.iopCart.api.refreshCart&&document.querySelector("#iop-cart-root"))return window.iopCart.api.refreshCart(),(0,i.M)("Update drawer iopCart"),!1;if(window.theme&&window.theme.AjaxCart&&"function"==typeof window.theme.AjaxCart.fetch&&document.querySelector("#AjaxCartDrawer"))return window.theme.AjaxCart.fetch(),(0,i.M)("Update drawer theme.AjaxCart.fetch"),!1;if(window.theme&&"function"==typeof window.theme.Cart&&document.querySelector(".side-cart-popup [data-quantity-input]:not([readonly])")){if(t&&t.items.length){var H=document.querySelectorAll(".side-cart-popup [data-quantity-input]:not([readonly])");return H[H.length-1].dispatchEvent(new Event("change",{bubbles:!0})),(0,i.M)("Update drawer side-cart-popup change event"),!1}return(0,i.M)("Update drawer side-cart-popup change event - no items, force refresh!"),this.refreshThePage(t)}if(window.theme&&window.theme.dropdown&&"function"==typeof window.theme.ajax_cart_dropdown&&document.querySelector("#cart-dropdown"))return window.theme.ajax_cart_dropdown(),(0,i.M)("Update drawer ajax_cart_dropdown"),!1;if("function"==typeof CartItems&&document.querySelector("#drawer-cart"))return document.dispatchEvent(new Event("ajaxProduct:added")),(0,i.M)("Update drawer ajaxProduct:added"),(0,u.F)("#drawer-cart .cart-item__details .cart-item__error {display: none;}"),!1;if("function"==typeof(null===(w=window.PXUTheme)||void 0===w||null===(w=w.jsAjaxCart)||void 0===w?void 0:w.updateView)&&document.querySelector("#theme-ajax-cart"))return setTimeout((function(){return window.PXUTheme.jsAjaxCart.updateView()}),250),(0,i.M)("Update drawer PXUTheme.jsAjaxCart.updateView"),!1;if("function"==typeof(null===(b=window.ctzn_global)||void 0===b?void 0:b.refreshCart)&&document.querySelector("#cart-content"))return window.ctzn_global.refreshCart(),(0,i.M)("Update drawer ctzn_global.refreshCart"),!1;if("object"===("undefined"==typeof store?"undefined":s(store))&&"function"==typeof(null===(C=store)||void 0===C?void 0:C.getCart)&&document.querySelector("#drawer-items"))return store.getCart(),(0,i.M)("Update drawer store.getCart"),!1;if(null!==(S=window.Avatar)&&void 0!==S&&null!==(S=S.theme)&&void 0!==S&&null!==(S=S.sections)&&void 0!==S&&null!==(S=S.SliderCart)&&void 0!==S&&null!==(S=S.instance)&&void 0!==S&&S.refreshCartSlider&&document.querySelector('[data-section-type="slider-cart"]'))return null===(G=window.Avatar)||void 0===G||null===(G=G.theme)||void 0===G||null===(G=G.sections)||void 0===G||null===(G=G.SliderCart)||void 0===G||null===(G=G.instance)||void 0===G||G.refreshCartSlider(),(0,i.M)("Update drawer Avatar.theme"),!1;var F="function"==typeof CartItems?document.querySelector("mini-cart"):null;if(F&&"function"==typeof F.onChange)return t&&t.item_count?(F.onChange({target:{dataset:{index:1},value:t.items[0].quantity}}),(0,u.F)("#MiniCart-Line-item-error-1 {display: none;}"),(0,i.M)("Update drawer athensThemeMiniCart"),!1):((0,i.M)("Update drawer athensThemeMiniCart - empty cart = refresh"),this.refreshThePage(t));if("function"==typeof BstrEvents&&"function"==typeof BstrCart&&document.querySelector(".minicart__holder")){localStorage.setItem("bstr:cart:update",(new Date).getTime());var B=new Event("storage");return B.key="bstr:cart:update",window.dispatchEvent(B),(0,i.M)("Update drawer bstr:cart:update"),!1}if(t&&t.item_count||!window.MinimogTheme?null:document.querySelector("#MinimogCartDrawer #cart-drawer-form .m-cart-quantity--input,#MinimogCartDrawer #cart-drawer-form .m-quantity__input"))return(0,i.M)("Update drawer Minimog - empty cart = refresh"),this.refreshThePage(t);if(null!==(A=window.theme)&&void 0!==A&&A.HaloAddOn&&document.querySelector(".popup-sidebar .sidebar-cart .cart-quickview_content"))return document.querySelector("[data-cart-pc],[data-mobile-cart]").dispatchEvent(new Event("click")),(0,i.M)("Update drawer window.theme?.HaloAddOn"),!1;var W="function"==typeof CartItems?document.querySelector('form#cart-items[is="cart-items"]'):null;if(W&&"function"==typeof W.handleChange)return t&&t.item_count?((0,u.F)(".drawer__body .line-item__error[data-line-item-error-1] {display: none;}"),W.handleChange({target:{dataset:{lineItemIndex:1},value:t.items[0].quantity}}),(0,i.M)('Update drawer form#cart-items[is="cart-items"]'),!1):((0,i.M)('Update drawer form#cart-items[is="cart-items"] - empty cart = refresh'),this.refreshThePage(t));if("function"==typeof window.refreshCartContents&&document.getElementById("offcanvas-cart"))return window.refreshCartContents(fetch(r+"cart.js",{headers:{"Content-Type":"application/json"}})),(0,i.M)("Update drawer Ecomify offcanvas-cart"),!1;if(t&&"function"==typeof window.updateCart&&document.getElementById("shopify-section-cart-drawer"))return window.updateCart(t),(0,i.M)("Update drawer window.updateCart"),!1;if(document.getElementById("crt")&&document.querySelector(".cartDrawer #crt")&&"function"==typeof window.$)return window.$.get(r+"cart?view=mini",(function(e){var r;window.$("#crt").html(e),null===(r=window.$(".cartDrawer .cart-count"))||void 0===r||r.html(t.item_count)})),(0,i.M)("Update drawer #crt"),!1;if(window.Frame&&window.Frame.EventBus&&"function"==typeof window.Frame.EventBus.emit&&document.getElementById("shopify-section-cart-drawer"))return setTimeout((function(){return window.Frame.EventBus.emit("AjaxCart:requestUpdate")}),500),(0,i.M)("Update drawer AjaxCart:requestUpdate"),!1;if(window.durotan&&"function"==typeof window.durotan.refreshCart&&document.getElementById("cart-content"))return window.durotan.refreshCart(),(0,i.M)("Update drawer durotan.refreshCart"),!1;if(window.oio&&"function"==typeof window.oio.refreshCart&&document.getElementById("cart-content"))return window.oio.refreshCart(),(0,i.M)("Update drawer oio.refreshCart"),!1;if("function"==typeof window.updateCartItemJS&&document.getElementById("cart-notification")&&document.getElementById("cart-notification-product"))return t&&t.item_count?(window.updateCartItemJS(t.items[0].quantity.toString(),t.items[0].variant_id.toString()),(0,i.M)("Update drawer updateCartItemJS"),!1):((0,i.M)("Update drawer updateCartItemJS - empty cart = refresh"),this.refreshThePage(t));var z=document.querySelector("[id*=__quick-cart]");if(z&&z.querySelector('.quick-cart[data-section-type="quick-cart"]'))return"function"==typeof emit?(emit("quick-cart:updated"),(0,i.M)("Update drawer emit quick-cart:updated"),!1):(document.dispatchEvent(new Event("apps:product-added-to-cart")),(0,i.M)("Update drawer apps:product-added-to-cart"),!1);if("object"===s(window.geckoShopify)&&"function"==typeof window.geckoShopify.onCartUpdate&&document.querySelector("#shopify-section-cart_widget .nt_mini_cart"))return document.querySelectorAll(".jsccount").forEach((function(t){return t.innerHTML=""})),window.geckoShopify.onCartUpdate(1,1),(0,i.M)("Update drawer geckoShopify.onCartUpdate"),!1;if("object"===s(window.rawartShopify)&&"function"==typeof window.rawartShopify.onCartUpdate&&document.querySelector("#shopify-section-cart_widget .nt_mini_cart"))return document.querySelectorAll(".jsccount").forEach((function(t){return t.innerHTML=""})),window.rawartShopify.onCartUpdate(1,1),(0,i.M)("Update drawer rawartShopify.onCartUpdate"),!1;if(window.Alpine?document.querySelector("#side-cart.side-cart"):null)return window.dispatchEvent(new Event("cart-change")),(0,i.M)("Update drawer window cart-change event"),!1;var V=document.querySelector("#shopify-section-cart-drawer shopping-cart");if(V&&"function"==typeof V.update)return V.update(),(0,i.M)("Update drawer <shopping-cart>.update()"),!1;var Q=window.Shopify&&"function"==typeof window.Shopify.CountryProvinceSelector?document.querySelectorAll("#main-cart-items quantity-input .quantity__input:not([readonly])"):[];if(Q.length>0&&"object"===s(Q[0].parentElement.changeEvent)){if(!t||!t.item_count)return(0,i.M)("Update drawer quantity-input .quantity__input - empty cart = refresh"),this.refreshThePage(t);for(var J=Q[Q.length-1],X=parseInt(J.getAttribute("data-index")),K=0,Z=1;Z<=t.items.length;Z++){var Y,tt=null===(Y=t.items[Z-1].handle)||void 0===Y?void 0:Y.includes("docapp-free-gift");if(tt&&Z<=X&&K++,!tt&&Z<X&&K--,!tt&&Z>=X)break}return J.setAttribute("data-index",(X+K).toString()),J.dispatchEvent(J.parentElement.changeEvent),(0,u.F)("#main-cart-footer .cart-drawer__cart-error, mini-cart.cart-drawer .cart-item__error {display: none;}"),(0,i.M)("Update drawer quantity-input .quantity__input"),!1}var et=document.querySelectorAll("sidebar-drawer#site-cart .cart-item input.qty:not([readonly])");if(et.length>0)return t&&t.item_count?(et[et.length-1].dispatchEvent(new Event("input",{bubbles:!0})),(0,i.M)("Update drawer sidebar-drawer#site-cart .cart-item .qty"),!1):((0,i.M)("Update drawer sidebar-drawer#site-cart .cart-item .qty - empty cart = refresh"),this.refreshThePage(t));var rt=[".cart-drawer[data-cart-drawer] input.quantity:not([readonly])","#dropdown-cart input.item-quantity:not([readonly])","form.mini-cart .mini-cart__content input.quantity-selector__value:not([readonly])",'#cart-modal-form-body .cart-modal-qty[type="text"]:not([readonly])',".drawer .cart-drawer__content-container .cart__popup-qty--input:not([readonly])",".side-cart-item input.quantity__input:not([readonly])",".top-bar .cart-container .mini-cart__item input[data-cart-quantity-input]:not([readonly])","#t4s-mini_cart .t4s-mini_cart__item input[data-action-change]:not([readonly])",'#shopify-section-minicart .cart__item input[name="updates[]"]:not([readonly])',"#MinimogCartDrawer #cart-drawer-form .m-cart-quantity--input:not([readonly])","#MinimogCartDrawer #cart-drawer-form .m-quantity__input:not([readonly])","#cart-notification #cart-notification-product.cart-notification-product input.quantity__input:not([readonly])","#cart-popup .cart-main__item input.item__quantity-input:not([readonly])","#CartDrawer cart-items cart-quantity .quantity__input:not([readonly])","#bls-header_minicart quantity-input .bls-quantity-input:not([readonly])"],nt=document.querySelector(rt.join(","));if(t&&nt)return t.item_count?((0,l.H)(!1),setTimeout((function(){setTimeout((function(){return(0,l.H)(!0)}),300);var r=document.querySelectorAll(rt.join(","));if(!(r.length>0))return(0,i.M)("Update drawer failed due to missing element after timeout. Force refresh!"),e.refreshThePage(t);var n=r[r.length-1],o=n.getAttribute("docapp-data-protected"),a=null;if(t.items.forEach((function(t,e){a||o&&o.includes(t.variant_id)&&(a=e+1)})),a){var u=n.getAttribute("data-line");(0,c.isNumeric)(u)&&u<1e3&&n.setAttribute("data-line",a);var d=n.getAttribute("data-line-id");(0,c.isNumeric)(d)&&d<1e3&&n.setAttribute("data-line-id",a);var s=n.getAttribute("data-product_id");(0,c.isNumeric)(s)&&s<1e3&&n.setAttribute("data-product_id",a);var p=n.getAttribute("data-index");(0,c.isNumeric)(p)&&p<1e3&&n.setAttribute("data-index",a);var f=n.closest("[data-line-item-id]");if(f){var m=f.getAttribute("data-line-item-id");(0,c.isNumeric)(m)&&m<1e3&&f.setAttribute("data-line-item-id",a)}var g=n.closest("[data-line]");if(g){var h=g.getAttribute("data-line");(0,c.isNumeric)(h)&&h<1e3&&g.setAttribute("data-line",a)}var _=n.closest("[data-cart-item][data-line-id]");if(_){var y=_.getAttribute("data-line-id");(0,c.isNumeric)(y)&&y<1e3&&_.setAttribute("data-line-id",a)}}n.dispatchEvent(new Event("change",{bubbles:!0}))}),500),(0,i.M)("Update drawer cartModalQtyNonGiftChangeSelectors match pending..."),!1):((0,i.M)("Update drawer cartModalQtyNonGiftChangeSelectors - empty cart = refresh"),this.refreshThePage(t));if(window.freeGiftCartUpsellProAppDisableRefreshExceptOnCart)return(0,i.M)("Update drawer - reload disabled except on cart page. END"),!1;if(t&&"function"==typeof window.refreshCart)return window.refreshCart(t),(0,i.M)("Update drawer window.refreshCart"),!1;if(document.querySelector([".go-cart__drawer",".ajax-cart__drawer.js-ajax-cart-drawer",".halo-sidebar .previewCart",".widget_shopping_cart .mini_cart_item input.custom-qty",'.mini-products-list .item .qty-group input[name="updates[]"]',"#monster-upsell-cart",".cart-flyout__inner .quick-cart__items .quick-cart__quantity",".quick-cart__cart .quick-cart__item .quick-cart__qty",".quick-cart__cart .quick-cart__item .quick-cart__button","#shopify-section-quick-cart .quick-cart__items .quantity-input__input",".flyout__content .cart-drawer",'#right-drawer-slot [x-data="ThemeModule_CartItems"] input[\\@change]','[data-cart-row][data-cart-item-key] input[name="updates[]"][\\@change]','#modals-rightDrawer [x-data="ThemeModule_CartItems"]',".cart-mini[data-cart-mini] .cart-mini-sidebar","#site-cart.site-nav-container","body.cart-notification-active #cart-notification","#CartDrawer.drawer .cart-drawer__inner #CartContainer","cart-notification#offcanvas__mini_cart #cart-notification #cart-notification-product","#cart-notification #cart-notification-product.cart-notification-product input.quantity__input",'#shopify-section-header section.Cart[x-init="initCart()"]',"#shopify-section-ictcart","#shopify-section-sidecart #CustomCartDrawer","#cartSlider-shopper.ws-cs","#showCart [data-cart-view] .ajax-item-row","#sidebar-component-for-cart .sidebar-cart__body","#app [data-vue-app] .minicart"].join(",")))return(0,i.M)("Update drawer force refresh due to unsupported element"),this.refreshThePage(t);if(t&&window.Shopify&&"function"==typeof window.Shopify.onCartUpdate&&!window.Shopify.onCartUpdate.toString().includes("{alert(")&&!window.Shopify.onCartUpdate.toString().includes(" alert("))return window.Shopify.onCartUpdate(t),(0,i.M)("Update drawer Shopify onCartUpdate"),!1;if(document.querySelector(["#cart-summary-overlay",".cart-summary-overlay .cart-summary-overlay__actions a.to-cart",".atc-banner--container[data-atc-banner]","#added-to-cart.theme-modal .inner","#root main.grid-canvas #canvasWrapper"].join(",")))return t&&document.querySelectorAll(".cart-link__count").forEach((function(e){return e.innerHTML=t.item_count})),(0,i.M)("Update drawer not required due to found element/variable."),!1;var it=document.getElementById("CartCount")?document.querySelector(".site-header__cart #CartCount"):null;if(it)return t&&(it.innerHTML=t.item_count),(0,i.M)("Update drawer not required on Simple."),!1;var ot=document.querySelectorAll(["cart-notification #cart-notification #cart-notification-button","#cart-icon-bubble.header__icon--cart"]);if(ot.length)return t&&(ot.forEach((function(e){return e.innerHTML=e.innerHTML.replace(/\d+/,t.item_count)})),document.querySelectorAll(".cart-count-bubble span[aria-hidden]").forEach((function(e){return e.innerHTML=t.item_count}))),(0,i.M)("Update drawer not required on Dawn."),!1}catch(t){(0,i.M)("Update drawer - ERROR!!!"),console.error("Attempted to update drawer cart, Error: ",t)}return(0,i.M)("Update drawer - no integration found."),this.refreshThePage(t)},setLoadedCartState:function(t){var e=(0,n.getCartHash)(t);f=e,(0,o.i_)(p,e)},refreshThePage:function(t){var e=window.Shopify&&window.Shopify.routes?window.Shopify.routes.root:"/";if((0,d.getRedirectCart)()&&"/cart"!==window.location.pathname&&window.location.pathname!==e+"cart")return window.location.pathname=e+"cart",(0,i.M)("Redirecting to cart"),!0;var r=Date.now(),a=r-3e4;if((g=g.filter((function(t){return Number(t)>a}))).length>6)return(0,i.M)("Already reloaded more than 6 times in the last 30 seconds. Stop reloading!"),!1;var c=(0,n.getCartHash)(t);if(f===c)return(0,i.M)("Already tried to refresh this cart, not doing it again"),!1;f=c,(0,o.i_)(p,c),g.push(r),(0,o.i_)(m,JSON.stringify(g));try{window.location.href=window.location.href.toString().split("#")[0]}catch(t){console.error("Failed to reload page using href assignment!",t),window.location.reload()}return(0,i.M)("Reloading page in cart refresher!"),!0}};document.addEventListener("click",(function(t){t.target&&null!==t.target.getAttribute("data-bundle-addtocart")&&(window.freeGiftCartUpsellProAppDisableRefresh=!0)}))},91569:(t,e,r)=>{"use strict";r.r(e),r.d(e,{addItemsToCartWithoutReProcessing:()=>q,applyCartUpdates:()=>A,applyCartUpdatesWithProperties:()=>k,applyCartUpdatesWithoutReProcessing:()=>E,applyCouponToCheckout:()=>S,getCart:()=>C,getLastCartResponse:()=>y,setLastCartResponse:()=>v,setUseUpdateEndpoint:()=>b});var n=r(10827),i=r(47846),o=r(69459);const a={isLoading:!1,setLoading:function(t){(0,o.M)("Set loading ON"),this.isLoading=!0,document.querySelectorAll(t).forEach((function(t){t.classList.contains("docapp-active")||t.classList.add("docapp-active")}))},setNotLoading:function(){(0,o.M)("Set loading OFF"),this.isLoading=!1,document.querySelectorAll(".docapp-active").forEach((function(t){t.classList.remove("docapp-active")}))}};var c={success:"docapp-alert-success",danger:"docapp-alert-danger",neutral:"docapp-alert-neutral"},u=function(t,e,r){if(t){(0,o.M)("Showing custom alert for container "+t.classList.toString());var n=t.querySelector(".docapp-free-gift--message-container");Object.keys(c).forEach((function(t){t===r?n.classList.add(c[t]):n.classList.remove(c[t])})),n.querySelector(".docapp-free-gift--message-content").innerHTML=e,n.classList.remove("docapp-hide")}},l=r(94240),d=r(95333),s=r(96749),p=r(38278);function f(){f=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),c=new M(n||[]);return i(a,"_invoke",{value:T(t,r,c)}),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var p="suspendedStart",m="suspendedYield",g="executing",_="completed",y={};function v(){}function w(){}function b(){}var C={};l(C,a,(function(){return this}));var S=Object.getPrototypeOf,A=S&&S(S(I([])));A&&A!==r&&n.call(A,a)&&(C=A);var E=b.prototype=v.prototype=Object.create(C);function q(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(i,o,a,c){var u=s(t[i],t,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==h(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,r,n){var i=p;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===_){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=g;var l=s(e,r,n);if("normal"===l.type){if(i=n.done?_:m,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=_,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=s(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(h(e)+" is not iterable")}return w.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},q(P.prototype),l(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new P(d(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},q(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return c.type="throw",c.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;D(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function m(t,e,r,n,i,o,a){try{var c=t[o](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,i)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){m(o,n,i,a,c,"next",t)}function c(t){m(o,n,i,a,c,"throw",t)}a(void 0)}))}}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}var _=null,y=function(){return _},v=function(t){return _=t},w=!1,b=function(t){return w=t},C=function(t,e){var r=w?"/cart/update.js":"/cart.js";(0,n.E)(r+"?v="+Math.floor(99999*Math.random())+1,(function(t,r){(0,p.setCurrencyName)(t.currency);var n=(0,i.bc)(t);v(JSON.parse(JSON.stringify(n))),e(n,r)}),(function(e){a.setNotLoading(),t?u(t,"Error, please refresh the page.","danger"):console.error(e)}))},S=function(t,e){t=t?t.toUpperCase():t;try{t&&window.Rebuy&&window.Rebuy.Cart&&(window.Rebuy.Cart.setDiscount?window.Rebuy.Cart.setDiscount(t):window.Rebuy.Cart.discount=t),"object"===h(window.Zapiet)&&"object"===h(window.ZapietCachedSettings)&&"object"===h(window.ZapietEvent)&&(t&&window.ZapietCachedSettings.discount_code!==t||!t&&window.ZapietCachedSettings.discount_code)&&(window.ZapietCachedSettings.discount_code=t,!t&&window.ZapietCachedSettings.url_params&&(delete window.ZapietCachedSettings.url_params.discount,delete window.ZapietWidgetConfig.url_params.discount),window.Zapiet.start(window.ZapietCachedSettings));var r=document.querySelector(".hs-checkout-purchase");if(r){var i=document.querySelectorAll("input.hs-discount-code");if(i.length)i.forEach((function(e){return e.value=t||""}));else if(t){var a=document.createElement("input");a.setAttribute("class","hs-discount-code"),a.setAttribute("type","hidden"),a.setAttribute("value",t||""),r.parentNode.insertBefore(a,r)}}t&&"function"==typeof window.SLIDECART_APPLY_DISCOUNT&&document.querySelector("#slidecarthq:not(:empty)")&&"object"!==h(window.pickystory)&&window.SLIDECART_APPLY_DISCOUNT(t)}catch(t){console.error("Error in 3rd party checkout processor",t)}t&&t.trim().length?(setTimeout((function(){(0,n.E)("/discount/"+(0,d.encodeDiscount)(t),(function(){(0,o.M)("DISCOUNTS: Finished applying discount code: "+t),"function"==typeof e&&e()}),(function(t){console.error("Discount On Cart Pro: Error in while trying to apply code to Checkout",t)}),"GET",null,null,!1);var r=new Event("docapp-discount-apply-to-checkout");r.code=t,document.body.dispatchEvent(r)}),500),(0,l.Fn)("discount_code",t)):(0,l.n9)("discount_code")},A=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,n.E)("/cart/update.js",(function(t,r){var n=(0,i.bc)(t);v(JSON.parse(JSON.stringify(n))),e&&e(n,r),s.A.runCartChange(n)}),(function(t){r?u(r,"Error, please refresh the page.","danger"):console.error(t)}),"POST",JSON.stringify({updates:t}))},E=function(){var t=g(f().mark((function t(e){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",P("/cart/update.js",e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=g(f().mark((function t(e){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",P("/cart/add.js",{items:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function P(t,e){return T.apply(this,arguments)}function T(){return(T=g(f().mark((function t(e,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,o){(0,n.E)(e,(function(r){var n=null;"/cart/add.js"!==e&&(n=(0,i.bc)(r),v(JSON.parse(JSON.stringify(n)))),t(n)}),(function(t){o(t),console.error(t)}),"POST",JSON.stringify(r))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var k=function(){var t=g(f().mark((function t(e,r,n){var i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null,t.prev=1,!r||!Object.keys(r).length){t.next=6;break}return t.next=5,E({updates:r});case 5:i=t.sent;case 6:if(!e||!e.length){t.next=12;break}return t.next=9,q(e);case 9:return t.next=11,O();case 11:i=t.sent;case 12:t.next=18;break;case 14:throw t.prev=14,t.t0=t.catch(1),console.error("Free Gift on Cart: Error from Shopify API while updating the gifts!",t.t0),t.t0;case 18:"function"==typeof n&&n(i),s.A.runCartChange(i);case 20:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e,r,n){return t.apply(this,arguments)}}();function O(){return D.apply(this,arguments)}function D(){return(D=g(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){C(null,(function(e){return t(e)}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},38278:(t,e,r)=>{"use strict";r.r(e),r.d(e,{getCurrencyName:()=>d,getDefaultCurrencyName:()=>m,getDefaultMoneyFormat:()=>h,getMoneyFormat:()=>p,isReadyToFormatMoney:()=>y,setCurrencyName:()=>s,setDefaultCurrencyName:()=>g,setDefaultMoneyFormat:()=>_,setMoneyFormat:()=>f});var n=r(10827),i=r(69459),o=r(83777),a=null,c=null,u=null,l=null,d=function(){return a},s=function(t){a!==t&&(a=t,f(null),(0,n.E)(o.D_+"/money-format",(function(t){f(t.moneyFormat),u=t.defaultCurrency,l=t.defaultMoneyFormat;var e=new Event("docapp-free-gift-currency-change");document.body.dispatchEvent(e)}),(function(){(0,i.M)("Error while trying to get currency format")}),"POST",JSON.stringify({currency:a})))},p=function(){return!c&&a&&a===u&&l?l:c},f=function(t){c=t},m=function(){return u},g=function(t){a=t,u=t},h=function(){return l},_=function(t){c=t,l=t},y=function(){return!!a&&!!p()}},45858:(t,e,r)=>{"use strict";r.d(e,{A:()=>C});var n=r(84659),i="docapp-free-gift-discounts",o={discounts:[],itemDiscounts:null,docappIntegration:null},a=(0,n.mI)(i);if(a){var c=JSON.parse(a);c&&(o=c)}const u=function(){return o},l=function(t,e){o={discounts:t,itemDiscounts:e,docappIntegration:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null},(0,n.i_)(i,JSON.stringify(o))};var d=r(69459),s=r(91569);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t,e,r){var n;return n=function(t,e){if("object"!=p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==p(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=u(),h=g?g.discounts:[],_=g?g.itemDiscounts:null,y=null,v=g?g.docappIntegration:null,w=!1,b=!1;const C={subscribeToDiscountChanges:function(){this.subscribeToBodyDiscountEvents(),document.addEventListener("bundler:total_cart_values",this.handleBundlerProductBundlesAppEvent.bind(this))},subscribeToBodyDiscountEvents:function(){document.body?document.body.addEventListener("docapp-discount-applied",this.handleDiscountOnCartProEvent.bind(this)):setTimeout(this.subscribeToBodyDiscountEvents.bind(this),100)},getTotalDiscount:function(t){return A(h,t)},getManualDiscountsApplied:function(){return h&&h.length?h.filter((function(t){return"manual"===t.type})).map((function(t){return t.title||(t.title=t.code),t})):[]},getAllDiscountsApplied:function(){return h&&h.length?h.map((function(t){return t.title||(t.title=t.code),t})):[]},getDiscountedCart:function(){return y},getItemDiscounts:function(){return _?function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},_):_},setItemDiscounts:function(t){_=t},getWaitingForDiscountsToComplete:function(){return b},setWaitingForDiscountsToComplete:function(t){b=t},handleDiscountOnCartProEvent:function(t){(0,d.M)("Discount change event processing start!"),S(t.discounts)||b?(h=t.discounts||[],v=t.docappIntegration||null,y=t.cart||null,E(),l(h,_,v),(0,d.M)("Force change due to handleDiscountOnCartProEvent"),q((0,s.getLastCartResponse)(),!0)):(0,d.M)("NO Discount changes.")},handleBundlerProductBundlesAppEvent:function(){this.isDiscountOnCartAppActive()?(0,d.M)("Discounts are controlled by Dr. Discount On Cart - end bundler:total_cart_values handler"):((0,d.M)("BundlerProductBundles Discount change event processing start!"),setTimeout((function(){return q()}),1e3))},handleExternalDiscountApplied:function(t){t&&(this.isDiscountOnCartAppActive()?(0,d.M)("Discounts are controlled by Dr. Discount On Cart - end handleExternalDiscountApplied"):setTimeout((function(){return q()}),1e3))},clearDiscounts:function(){S([])?this.isDiscountOnCartAppActive()?(0,d.M)("Discounts are controlled by Dr. Discount On Cart - end clearDiscounts"):(h=[],y=null,v=null,E(),l(h,_,v),(0,d.M)("Force change due to clearDiscounts"),q((0,s.getLastCartResponse)(),!0)):(0,d.M)("NO Discount changes.")},applyDiscountCode:function(t){if(window.docappAutoApplyDiscount=t,this.isDiscountOnCartAppActive()){var e=this.getManualDiscountsApplied();return e.length&&e.find((function(e){return e.title.toUpperCase()===t.toUpperCase()}))||window.discountOnCartProApp.applyCode(t),Promise.resolve(!0)}return new Promise((function(e){(0,d.M)("DISCOUNTS: Start applying discount "+t),(0,s.applyCouponToCheckout)(t,0,(function(){e(),setTimeout((function(){return q(null,!0)}),1e3)}))}))},getDocappIntegration:function(){return v},getDiscountCalculatedBy3rdPartyApp:function(){return w},isDiscountOnCartAppActive:function(){return"object"===p(window.discountOnCartProApp)&&"function"==typeof window.discountOnCartProApp.applyCode}};function S(t){if(_){var e,r=Object.keys(_),n=(null===(e=(0,s.getLastCartResponse)())||void 0===e?void 0:e.items.map((function(t){return t.key})))||[];if(r.some((function(t){return!n.includes(t)})))return(0,d.M)("Discount are considered different due to old discount keys mismatch!",{discountItemKeys:r,cartItemKeys:n}),!0}var i=JSON.stringify(h),o=JSON.stringify(t);return(0,d.M)("Old discounts: "+i+" New discounts: "+o),!!(h&&h.length||t&&t.length)&&(i!==o||(!h||!t||h.length!==t.length||A(h)!==A(t)))}function A(t,e){return t&&t.length?t.reduce((function(t,e){return t+parseInt(e.amount)}),0):e?e.total_discount:0}function E(){y&&y.item_count&&y.items?(_={},y.items.forEach((function(t){_.hasOwnProperty(t.key)?_[t.key]+=t.total_discount||0:_[t.key]=t.total_discount||0}))):_=null}function q(t,e){window.freeGiftCartUpsellProApp&&"function"==typeof window.freeGiftCartUpsellProApp.updateWidgets&&window.freeGiftCartUpsellProApp.updateWidgets(t,e)}},64640:(t,e,r)=>{"use strict";r.d(e,{wH:()=>m,ww:()=>l,zh:()=>g});var n=r(69459),i=r(84659),o=r(16222);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t,e,r){var n;return n=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==a(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var l="docapp-free-gift-auto-install",d=null,s=null,p=new URLSearchParams(window.location.search);if(p.get(l))s={integrationId:p.get("docapp-integration-id"),divClass:p.get("docapp-install-class"),check:p.get("docapp-check")},(0,i.i_)(l,JSON.stringify(s));else{var f=(0,i.mI)(l);f&&(s=JSON.parse(f),(0,n.M)("Continuing integration found in session"))}var m=function(t){if(!t.asset_base_url)return null;if(!s)return(0,n.M)("Self-install not active"),null;if(s.integrationId&&s.integrationId.trim().length>0){if(s.integrationId=s.integrationId.trim(),t.integrations&&t.integrations.length){var e=t.integrations.filter((function(t){return t.id.toString()===s.integrationId}));1===e.length&&(d=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e[0]),(0,n.M)("Edit integration ID: "+d.id))}}else s.integrationId&&(s.integrationId=null);d||(d={id:s.integrationId||null,name:"",action:null,div_class:s.divClass,inject_selector_1:null,inject_selector_2:null,replace_selector:null,is_active:!0},(0,n.M)("Starting new integration")),window.docappWidgetInstallation=d;var r=document.createElement("script");return r.src=t.asset_base_url+"/shop/js/docapp-installer.min.js",document.head.append(r),(0,o.a)(t.asset_base_url+"/shop/css/docapp-installer.min.css"),d},g=function(){return d}},47846:(t,e,r)=>{"use strict";r.d(e,{bG:()=>F,bc:()=>G,uz:()=>H});var n=r(69459),i=r(67805),o=r(65806),a=r(91569),c=r(94240),u=r(95333),l=r(84659),d=r(92173),s=r(38278);function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){var n;return n=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==g(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var v=".docapp-free-gift-progress",w=null,b=null,C=null,S=null,A=null,E=null,q=null,P=null,T=null,k=null,O=null,D=null,M=null,I=!1,L=null,x=null,j=0,U=null,N=new URLSearchParams(window.location.search),G=function(t){var e;if(t)U=t;else{if(t||!U)return null;t=U}var r=JSON.parse(JSON.stringify(t)),a=function(t){var e,r;null!==(e=window.Shopify)&&void 0!==e&&e.country&&(t.country=null===(r=window.Shopify)||void 0===r?void 0:r.country);if("function"!=typeof window.docappCartModifier)return t;try{return window.docappCartModifier(t)||t}catch(t){console.error("Error during docappCartModifier execution",t)}return t};if(r.currency_rate=(0,o.m)(r),"function"==typeof window.xNvd){var u=0,s=(0,c.LQ)("nvdProtectionPrice"),f=(0,c.LQ)("nvdVariant");"false"===(0,c.LQ)("nvd_opted_out")&&s>0&&f>0&&(u=100*s,f=parseInt(f),0===r.items.filter((function(t){return t.variant_id===f})).length&&(r.items.push({id:f,properties:{},quantity:1,variant_id:f,key:"999999:999999",title:"Navidium Shipping Protection",price:u,original_price:u,discounted_price:u,line_price:u,original_line_price:u,total_discount:0,discounts:[],sku:"NVDPROTECTION",grams:0,vendor:"Navidium",taxable:!1,product_id:null,product_has_only_default_variant:!1,gift_card:!1,final_price:u,final_line_price:u,handle:"navidium-shipping-protection",requires_shipping:!1,product_type:"",product_title:"Navidium Shipping Protection",product_description:null,variant_title:"Navidium",variant_options:["Navidium"],options_with_values:[{name:"Title",value:"Navidium"}],line_level_discount_allocations:[],line_level_total_discount:0,has_components:!1}),r.item_count+=1,r.items_subtotal_price+=u,r.original_total_price+=u,r.total_price+=u,(0,n.M)("Modified NVD cart. price: "+r.total_price)))}if(window.bcpo&&window.bcpo.price_addons&&window.bcpo.price_addons.length){var m=0,h=!1;if(window.bcpo.price_addons.forEach((function(t){var e=!1;r.items=r.items.map((function(r){var n,i,o,a;if((!t.variant_id&&(null===(n=r.product_id)||void 0===n?void 0:n.toString())===(null===(i=t.product_id)||void 0===i?void 0:i.toString())||(null===(o=r.variant_id)||void 0===o?void 0:o.toString())===(null===(a=t.variant_id)||void 0===a?void 0:a.toString()))&&t.quantity===r.quantity&&t.price_with_addon&&!r.hasOwnProperty("final_price_unmodified")&&!e){e=!0;var c=parseInt(t.price_with_addon),u=c*t.quantity,l=c-r.original_price,d=u-r.original_line_price;if(l>0||d>0||l<0||d<0)return h=!0,m+=d,_(_({},r),{},{original_price_unmodified:r.original_price,original_line_price_unmodified:r.original_line_price,original_price:c,original_line_price:u,final_price_unmodified:r.final_price,final_line_price_unmodified:r.final_line_price,final_price:r.final_price+l,final_line_price:r.final_line_price+d,line_price:r.final_line_price+d})}return r}))})),h){var y=b;return r=R(r,m),y!==(b=r.total_price.toString())&&(0,n.M)("Modified BCPO cart. last price: "+y+" new price: "+b),r.external_integration=x="bcpo",a(r)}b=r.total_price.toString(),r.external_integration=x="bcpo"}if(window.pplr_draftorder){var v=0,I=!1,L=[];r.items=r.items.filter((function(t){return"PPLR_HIDDEN_PRODUCT"!==t.product_type||(L.push(t),v-=t.original_line_price,!1)})),r.items=r.items.map((function(t){var e,n=0,i=0;if(t.properties&&t.properties._pplr_inv_variant){var o=JSON.parse(t.properties._pplr_inv_variant);o&&"object"===g(o)&&(n+=o.reduce((function(t,e){return t+parseInt(e.price)*parseInt(e.quantity)}),0))}if(t.properties&&t.properties._pplr_addprice&&(n+=parseInt(t.properties._pplr_addprice)),t.properties&&t.properties._pc_pricing_qty_split){var a=p(t.properties._pc_pricing_qty_split.split("-"),2),c=a[0],u=a[1],l=L.find((function(t){return t.variant_id.toString()===c}));if(l){var d=parseInt(u);n+=l.price*d,l.line_level_discount_allocations.forEach((function(e){var r=e.amount/l.quantity*d*t.quantity;i+=r,t.line_level_discount_allocations.push({amount:r,discount_application:_({},e.discount_application)})}))}}if(r.currency_rate&&(n*=r.currency_rate),n=parseInt(n),e=parseInt(n*t.quantity),n>0||e>0||n<0||e<0){I=!0,v+=e;var s=t.original_price+n,f=t.original_line_price+e;return _(_({},t),{},{original_price_unmodified:t.original_price,original_line_price_unmodified:t.original_line_price,original_price:s,original_line_price:f,final_price_unmodified:t.final_price,final_line_price_unmodified:t.final_line_price,final_price:t.final_price+n-i/t.quantity,final_line_price:t.final_line_price+e-i,line_price:t.final_line_price+e-i,line_level_total_discount:t.line_level_total_discount+i,total_discount:t.total_discount+i})}return t}));var j=C;if(I)return r=R(r,v),j!==(C=r.total_price.toString())&&(0,n.M)("Modified PPLR cart. last price: "+j+" new price: "+C),r.external_integration=x="pplr",a(r);C=r.total_price.toString(),r.external_integration=x="pplr"}if(window.BSS_PO&&window.BSS_PO.enable&&window.bssProductOptionsPrices&&window.bssProductOptionsPrices.cart_subtotal){var N=0,G=!1;r.items=r.items.map((function(t){if(window.bssProductOptionsPrices.hasOwnProperty(t.key)&&t.final_line_price!==parseInt(window.bssProductOptionsPrices[t.key])){var e=window.bssProductOptionsPrices[t.key],r=Math.floor(e/t.quantity),n=r-t.final_price,i=e-t.final_line_price;if(n>0||i>0||n<0||i<0)return G=!0,N+=i,_(_({},t),{},{original_price_unmodified:t.original_price,original_line_price_unmodified:t.original_line_price,original_price:t.original_price,original_line_price:t.original_line_price,final_price_unmodified:t.final_price,final_line_price_unmodified:t.final_line_price,final_price:r,final_line_price:e,line_price:e})}return t}));var H=S;if(G)return r=R(r,N),H!==(S=r.total_price.toString())&&(0,n.M)("Modified BSS cart. last price: "+H+" new price: "+S),r.external_integration=x="bss",a(r);S=r.total_price.toString(),r.external_integration=x="bss"}if(window.dpoObserver&&window.dpoObserver.cartItems&&window.dpoObserver.cartItems.length){var F=0,B=!1;window.dpoObserver.cartItems.forEach((function(t){var e=!1;r.items=r.items.map((function(r){var n,i,o,a;if((!t.variant_id&&(null===(n=r.product_id)||void 0===n?void 0:n.toString())===(null===(i=t.product_id)||void 0===i?void 0:i.toString())||(null===(o=r.variant_id)||void 0===o?void 0:o.toString())===(null===(a=t.variant_id)||void 0===a?void 0:a.toString()))&&t.quantity===r.quantity&&!r.hasOwnProperty("final_price_unmodified")&&!e){e=!0;var c=t.original_price,u=t.original_line_price,l=c-r.original_price,d=u-r.original_line_price;if(l>0||d>0||l<0||d<0)return B=!0,F+=d,_(_({},r),{},{original_price_unmodified:r.original_price,original_line_price_unmodified:r.original_line_price,original_price:c,original_line_price:u,final_price_unmodified:r.final_price,final_line_price_unmodified:r.final_line_price,final_price:t.final_price,final_line_price:t.final_line_price,line_price:t.final_line_price})}return r}))}));var W=A;if(B)return r=R(r,F),W!==(A=r.total_price.toString())&&(0,n.M)("Modified DPO cart. last price: "+W+" new price: "+A),r.external_integration=x="dpo",a(r);A=r.total_price.toString(),r.external_integration=x="dpo"}if(window.bbCheckCart||window.bbProcessCart){var z=0,V=!1;r.items=r.items.map((function(t){if(t.properties&&t.properties._bundle_price){V=!0;var e=Math.ceil(t.properties._bundle_price),r=e*t.quantity;return z+=r-t.original_line_price,_(_({},t),{},{original_price_unmodified:t.original_price,original_line_price_unmodified:t.original_line_price,original_price:e,original_line_price:r,final_price_unmodified:t.final_price,final_line_price_unmodified:t.final_line_price,final_price:e,final_line_price:r,line_price:r})}return t}));var Q=E;if(V)return r=R(r,z),Q!==(E=r.total_price.toString())&&(0,n.M)("Modified BB cart. last price: "+Q+" new price: "+E),r.external_integration=x="bb",a(r);E=r.total_price.toString(),r.external_integration=x="bb"}if(window.is_hulkpo_installed&&window.hulkapps&&window.hulkapps.discounts&&window.hulkapps.discounts.cart&&window.hulkapps.discounts.cart.items&&window.hulkapps.discounts.cart.items.length){var J=0,X=!1;window.hulkapps.discounts.cart.items.forEach((function(t){var e=!1;r.items=r.items.map((function(r){var n,o,a,c;if(((null===(n=r.product_id)||void 0===n?void 0:n.toString())===(null===(o=t.variant_id)||void 0===o?void 0:o.toString())||(null===(a=r.variant_id)||void 0===a?void 0:a.toString())===(null===(c=t.variant_id)||void 0===c?void 0:c.toString()))&&parseInt(t.quantity)===r.quantity&&t.original_line_price_format&&t.original_price_format&&!r.hasOwnProperty("final_price_unmodified")&&!e){e=!0;var u=(0,i.extractAmount)(t.original_line_price_format),l=(0,i.extractAmount)(t.original_price_format);if(isNaN(u)||null===u||isNaN(l)||null===l)return r;var d=l-r.final_price,s=u-r.line_price;if(s>0||s<0)return X=!0,J+=s,_(_({},r),{},{original_price_unmodified:r.original_price,original_line_price_unmodified:r.original_line_price,original_price:r.original_price+d,original_line_price:r.original_line_price+s,final_price_unmodified:r.final_price,final_line_price_unmodified:r.final_line_price,final_price:l,final_line_price:u,line_price:r.final_line_price+s})}return r}))}));var K=w;if(X)return r=R(r,J),K!==(w=r.total_price.toString())&&(0,n.M)("Modified HULK cart. last price: "+K+" new price: "+w),r.external_integration=x="hulkapps",a(r);w=r.total_price.toString(),r.external_integration=x="hulkapps"}if(window.Cloudlift&&window.Cloudlift.options&&window.Cloudlift.options.config&&"options"===window.Cloudlift.options.config.app&&!0===window.Cloudlift.options.config.priceDraft){var Z=0,Y=!1;r.items=r.items.map((function(t){if(!t.has_components&&t.properties&&t.properties._cl_options_price){Y=!0;var e=parseInt(t.properties._cl_options_price);r.currency_rate&&(e*=r.currency_rate);var n=e*t.quantity,i=t.original_price+e,o=t.original_line_price+n;return Z+=n,_(_({},t),{},{original_price_unmodified:t.original_price,original_line_price_unmodified:t.original_line_price,original_price:i,original_line_price:o,final_price_unmodified:t.final_price,final_line_price_unmodified:t.final_line_price,final_price:i,final_line_price:o,line_price:o})}return t})),Y&&(r.items=r.items.filter((function(t){return!t.product_type||"options_price"!==t.product_type||(r=R(r,-1*t.line_price),!1)})));var $=q;if(Y)return r=R(r,Z),$!==(q=r.total_price.toString())&&(0,n.M)("Modified LPO cart. last price: "+$+" new price: "+q),r.external_integration=x="lpo",a(r);q=r.total_price.toString(),r.external_integration=x="lpo"}var tt=(0,l.mI)(l.E9)||(0,d.Ri)(l.E9);if(window.BOLD&&window.BOLD.apps_installed&&window.BOLD.apps_installed["Product Options"]&&window.BOLD.common&&window.BOLD.common.cartDoctor&&window.BOLD.common.cartDoctor.cart&&window.BOLD.common.cartDoctor.cart.items.length&&(window.BOLD.common.cartDoctor.cart.total_price!==r.total_price||tt||"bold"===x)){var et=0,rt=!1;r.items=r.items.filter((function(t){var e=window.BOLD.common.cartDoctor.cart.items.find((function(e){return e.variant_id===t.variant_id||"NVDPROTECTION"===t.sku}));return!(0!==t.line_price&&!e)||(rt=!0,r=R(r,-1*t.line_price),!1)})),window.BOLD.common.cartDoctor.cart.items.forEach((function(t){var e=0;r.items=r.items.map((function(r){if(e===t.raw_line_index&&r.variant_id===t.variant_id){var n=0;t.discounts&&t.discounts.length&&(n=t.discounts.reduce((function(t,e){return t+e.amount}),0));var i=t.original_price+Math.floor(n/t.quantity),o=t.original_line_price+n,a=i-r.original_price,c=o-r.original_line_price;if(a>0||c>0||a<0||c<0)return rt=!0,et+=c,_(_({},r),{},{original_price_unmodified:r.original_price,original_line_price_unmodified:r.original_line_price,original_price:i,original_line_price:o,final_price_unmodified:r.final_price,final_line_price_unmodified:r.final_line_price,final_price:t.final_price,final_line_price:t.final_line_price,line_price:t.final_line_price})}return e++,r}))}));var nt=P;if(rt)return r=R(r,et),nt!==(P=r.total_price.toString())&&(0,n.M)("Modified BOLD cart. last price: "+nt+" new price: "+P),r.external_integration=x="bold",a(r);P=r.total_price.toString(),r.external_integration=x="bold"}if(window.booster&&"code"===window.booster.discount_method&&window.booster.discounts&&window.booster.discounts.cart&&window.booster.discounts.cart.items){var it=!1,ot=window.booster.discounts.cart.items.reduce((function(t,e){return t+e.quantity}),0);if(window.booster.discounts.positive_discount&&window.booster.discounts.additional_discount_value&&ot===r.item_count){it=!0;var at=100*window.booster.discounts.additional_discount_value,ct=at/r.total_price,ut="BA_"+Math.random().toString(36).slice(2).toUpperCase();r.total_price_unmodified=r.total_price,r.total_price-=at;var lt=0,dt=0;r.items=r.items.map((function(t){var e=Math.floor(t.line_price*ct);return dt+t.quantity===r.item_count&&(e=at-lt),dt+=t.quantity,lt+=e,t.discounts.push({title:ut,amount:e}),t.discounted_price=Math.floor(t.discounted_price-e/t.quantity),t.line_price=Math.floor(t.line_price-e),t})),r.cart_level_discount_applications||(r.cart_level_discount_applications=[]),r.cart_level_discount_applications.push({total_allocated_amount:at,title:ut,type:"automatic",key:"booster-apps-mapped-discount",description:"",value:window.booster.discounts.additional_discount_value,created_at:(new Date).toString(),value_type:"fixed_amount",allocation_method:"across",target_selection:"all",target_type:"line_item"})}var st=T;if(st!==(T=r.total_price.toString())&&(0,n.M)("Modified BOOSTER cart. last price: "+st+" new price: "+T),it)return a(r);r.external_integration=x="booster"}if(window.un&&window.un.cart&&(window.un.cart.un_total_discount>0||tt)){var pt=0;window.un.cart.items.forEach((function(t){if(t.appliedDiscount){var e=!1,n=t.appliedDiscount;r.items=r.items.map((function(r){var i,o,a,c;if((!t.variant_id&&(null===(i=r.product_id)||void 0===i?void 0:i.toString())===(null===(o=t.product_id)||void 0===o?void 0:o.toString())||(null===(a=r.variant_id)||void 0===a?void 0:a.toString())===(null===(c=t.variant_id)||void 0===c?void 0:c.toString()))&&t.quantity===r.quantity&&!r.hasOwnProperty("final_price_unmodified")&&!e){e=!0;var u=100*n.discount_amount,l=100*n.total_discount_amount,d=r.final_price-u,s=r.final_line_price-l;return r.discounts.push({title:n.title,amount:l}),r.line_level_discount_allocations||(r.line_level_discount_allocations=[]),r.line_level_discount_allocations.push({amount:l,discount_application:{type:"automatic",key:"un-app-mapped-discount",title:n.title,description:"",value:n.value,value_type:n.value_type,created_at:(new Date).toString(),total_allocated_amount:l,allocation_method:"across",target_selection:"all",target_type:"line_item"}}),pt-=l,_(_({},r),{},{final_price_unmodified:r.final_price,final_line_price_unmodified:r.final_line_price,final_price:d,final_line_price:s,line_price:s})}return r}))}})),r.external_integration=x="un",r.total_price_unmodified=r.total_price,r.total_price-=pt;var ft=k;return ft!==(k=r.total_price.toString())&&(0,n.M)("Modified UN cart. last price: "+ft+" new price: "+k),a(r)}if(window.zakekeProductAdvancedProcessingDraftOrder||window.zakekeProductAdvancedProcessing){var mt=0,gt=!1;r.items=r.items.map((function(t){var e,n=0;if(t.properties&&t.properties._configurationPrice&&(n+=parseInt(t.properties._configurationPrice)),r.currency_rate&&(n*=r.currency_rate),n=parseInt(n),e=parseInt(n*t.quantity),n>0||e>0||n<0||e<0){gt=!0,mt+=e;var i=t.original_price+n,o=t.original_line_price+e;return _(_({},t),{},{original_price_unmodified:t.original_price,original_line_price_unmodified:t.original_line_price,original_price:i,original_line_price:o,final_price_unmodified:t.final_price,final_line_price_unmodified:t.final_line_price,final_price:t.final_price+n,final_line_price:t.final_line_price+e,line_price:t.final_line_price+e})}return t}));var ht=O;if(gt)return r=R(r,mt),ht!==(O=r.total_price.toString())&&(0,n.M)("Modified Zakeke cart. last price: "+ht+" new price: "+O),r.external_integration=x="zakeke",a(r);O=r.total_price.toString(),r.external_integration=x="zakeke"}if("object"===g(window.ymq)&&"function"==typeof window.ymq_ready){var _t=0,yt=!1;r.items=r.items.map((function(t){var e=0,r=0;if(t.properties&&t.properties._YmqItemPrice&&(r=(e=100*t.properties._YmqItemPrice)*t.quantity),e>0||r>0||e<0||r<0){yt=!0,_t+=r;var n=t.original_price+e,i=t.original_line_price+r;return _(_({},t),{},{original_price_unmodified:t.original_price,original_line_price_unmodified:t.original_line_price,original_price:n,original_line_price:i,final_price_unmodified:t.final_price,final_line_price_unmodified:t.final_line_price,final_price:t.final_price+e,final_line_price:t.final_line_price+r,line_price:t.final_line_price+r})}return t}));var vt=D;if(yt)return r=R(r,_t),vt!==(D=r.total_price.toString())&&(0,n.M)("Modified YMQ cart. last price: "+vt+" new price: "+D),r.external_integration=x="ymq",a(r);D=r.total_price.toString()}if("object"===("undefined"==typeof GIST?"undefined":g(GIST))&&null!==(e=GIST)&&void 0!==e&&e.bundles){var wt=0,bt=!1;r.items=r.items.map((function(t){var e=0,r=0;if(t.properties&&t.properties._gs_bundle_prices&&(r=(e=t.properties._gs_bundle_prices.reduce((function(t,e){return t+Number(e)}),0))*t.quantity),e>0||r>0||e<0||r<0){bt=!0,wt+=r;var n=t.original_price+e,i=t.original_line_price+r;return _(_({},t),{},{original_price_unmodified:t.original_price,original_line_price_unmodified:t.original_line_price,original_price:n,original_line_price:i,final_price_unmodified:t.final_price,final_line_price_unmodified:t.final_line_price,final_price:t.final_price+e,final_line_price:t.final_line_price+r,line_price:t.final_line_price+r})}return t}));var Ct=M;if(bt)return r=R(r,wt),Ct!==(M=r.total_price.toString())&&(0,n.M)("Modified Giftship cart. last price: "+Ct+" new price: "+M),r.external_integration=x="giftship",a(r);M=r.total_price.toString()}return a(r)};function R(t,e){return t.items_subtotal_price_unmodified=t.items_subtotal_price,t.items_subtotal_price+=e,t.original_total_price_unmodified=t.original_total_price,t.original_total_price+=e,t.total_price_unmodified=t.total_price,t.total_price+=e,t}var H=function(){var t,e=parseInt((new Date).getTime()/1e3);if(j===e)return!1;if(j=e,!(0,a.getLastCartResponse)())return(0,n.M)("No cart response, skip pricing app check"),!1;var r=!1;if(window.is_hulkpo_installed&&window.hulkapps&&window.hulkapps.discounts&&window.hulkapps.discounts.cart&&window.hulkapps.discounts.cart.items&&window.hulkapps.discounts.cart.items.length&&(r=!0),window.bcpo&&window.bcpo.price_addons&&window.bcpo.price_addons.length&&(r=!0),window.pplr_draft_order&&(r=!0),window.BSS_PO&&window.BSS_PO.enable&&(r=!0),window.dpoObserver&&window.dpoObserver.cartItems&&(r=!0),(window.bbCheckCart||window.bbProcessCart)&&(r=!0),window.Cloudlift&&window.Cloudlift.options&&window.Cloudlift.options.config&&"options"===window.Cloudlift.options.config.app&&(r=!0),window.BOLD&&window.BOLD.common&&window.BOLD.common.cartDoctor&&window.BOLD.common.cartDoctor.cart&&window.BOLD.common.cartDoctor.cart.items.length&&(r=!0),window.booster&&"code"===window.booster.discount_method&&window.booster.discounts&&(r=!0),window.un&&window.un.cart&&window.un.running&&(r=!0),(window.zakekeProductAdvancedProcessingDraftOrder||window.zakekeProductAdvancedProcessing)&&(r=!0),"object"===g(window.ymq)&&"function"==typeof window.ymq_ready&&(r=!0),"object"===("undefined"==typeof GIST?"undefined":g(GIST))&&null!==(t=GIST)&&void 0!==t&&t.bundles&&(r=!0),!r)return!1;var i=w,o=b,c=C,u=S,l=A,d=E,s=q,p=P,f=T,m=k,h=O,_=D,y=x,v=M,I=G();return!!I&&(I.external_integration&&y!==I.external_integration?((0,n.M)("Applying price change app update by "+I.external_integration),(0,a.setLastCartResponse)(I),!0):(i||w)&&i!==w?((0,n.M)("Applying hulk price update - late. lastTotalHulkPrice: "+i+" totalHulkPrice "+w),(0,a.setLastCartResponse)(I),!0):(o||b)&&o!==b?((0,n.M)("Applying bcpo price update - late. lastTotalBcpoPrice: "+o+" totalBcpoPrice "+b),(0,a.setLastCartResponse)(I),!0):(c||C)&&c!==C?((0,n.M)("Applying pplr price update - late. lastTotalPplrPrice: "+c+" totalPplrPrice "+C),(0,a.setLastCartResponse)(I),!0):(u||S)&&u!==S?((0,n.M)("Applying BSS price update - late. lastTotalBssPrice: "+u+" totalBssPrice "+S),(0,a.setLastCartResponse)(I),!0):(l||A)&&l!==A?((0,n.M)("Applying dpo price update - late. lastTotalDpoPrice: "+l+" totalDpoPrice "+A),(0,a.setLastCartResponse)(I),!0):(d||E)&&d!==E?((0,n.M)("Applying bb price update - late. lastTotalBbPrice: "+d+" totalBbPrice "+E),(0,a.setLastCartResponse)(I),!0):(s||q)&&s!==q?((0,n.M)("Applying lpo price update - late. lastTotalLpoPrice: "+s+" totalLpoPrice "+q),(0,a.setLastCartResponse)(I),!0):(p||P)&&p!==P?((0,n.M)("Applying bold price update - late. lastTotalBoldPrice: "+p+" totalBoldPrice "+P),(0,a.setLastCartResponse)(I),!0):(f||T)&&f!==T?((0,n.M)("Applying booster price update - late. lastTotalBoosterPrice: "+f+" totalBoosterPrice "+T),(0,a.setLastCartResponse)(I),!0):(m||k)&&m!==k?((0,n.M)("Applying UN price update - late. lastTotalUnPrice: "+m+" totalUnPrice "+k),(0,a.setLastCartResponse)(I),!0):(h||O)&&h!==O?((0,n.M)("Applying ZAKEKE price update - late. lastTotalZakekePrice: "+h+" totalZakekePrice "+O),(0,a.setLastCartResponse)(I),!0):(_||D)&&_!==D?((0,n.M)("Applying YMQ price update - late. lastTotalYMQPrice: "+_+" totalYMQPrice "+D),(0,a.setLastCartResponse)(I),!0):!(!v&&!M||v===M)&&((0,n.M)("Applying Giftship price update - late. lastTotalGiftshipPrice: "+v+" totalGiftshipPrice "+M),(0,a.setLastCartResponse)(I),!0))},F=function t(e,r,n){if((n=n||0)||I||!L||(I=!0,clearTimeout(L),L=null),!n)try{et()}catch(t){console.error("Failed to handleAjaxCarts!",t)}tt(n),void 0!==e&&(!I&&n<4?L=setTimeout((function(){t(e,r,n+1)}),1500):I=!0)},B=!1,W=!1,z=!1,V=!1,Q=!1,J=!1,X=!1,K=!1,Z=!1,Y=!1,$=!1,tt=function(t){var e=(0,s.getCurrencyName)();if(e&&e===(0,s.getDefaultCurrencyName)()&&!N.has("docapp-currency-disabled")){if(t||(B=!1,W=!1,$=!1,z=!1,V=!1,Q=!1,J=!1,X=!1,K=!1,Z=!1,Y=!1),!W&&"object"===g(window.baCurr)&&"function"==typeof window.baCurr.repeat)try{return W=!0,void window.baCurr.repeat()}catch(t){console.error("DOCAPP Error: ",t)}if(!z&&"object"===g(window.DoublyGlobalCurrency)&&"function"==typeof window.DoublyGlobalCurrency.convertAll)try{return z=!0,void window.DoublyGlobalCurrency.convertAll(window.DoublyGlobalCurrency.currentCurrency,".money")}catch(t){console.error("DOCAPP Error: ",t)}if(!V&&"object"===g(window.conversionBearAutoCurrencyConverter)&&"function"==typeof window.conversionBearAutoCurrencyConverter.convertPricesOnPage&&"function"==typeof window.conversionBearAutoCurrencyConverter.getSettings&&!0===window.conversionBearAutoCurrencyConverter.getSettings().isActive&&((0,c.LQ)("currencyWidget")||(0,c.LQ)("currencyLocation")))try{return V=!0,void window.conversionBearAutoCurrencyConverter.convertPricesOnPage()}catch(t){console.error("DOCAPP Error: ",t)}if(!J&&"object"===g(window.Currency)&&"function"==typeof window.Currency.convertAll&&"string"==typeof window.mlvedaShopCurrency&&"number"==typeof window.mlvedaCurrencyinterval&&"string"==typeof window.Currency.currentCurrency&&"object"===g(window.Currency.moneyFormats)&&"object"===g(window.Currency.moneyFormats[window.Currency.currentCurrency]))try{return J=!0,void window.Currency.convertAll(window.mlvedaShopCurrency,window.Currency.currentCurrency)}catch(t){console.error("DOCAPP Error: ",t)}if(!Y&&"string"==typeof transcy_curencyDefault&&"object"===g(window._transcy)&&"object"===g(window._transcy.methods)&&"function"==typeof window._transcy.methods.convertCurrency)try{return Y=!0,void("function"==typeof window._transcy.methods.reConvertCurrency?window._transcy.methods.reConvertCurrency():window._transcy.methods.convertCurrency())}catch(t){console.error("DOCAPP Error: ",t)}if(!$&&"object"===g(window.bucksCC)&&"function"==typeof window.bucksCC.reConvert)try{return $=!0,void window.bucksCC.reConvert()}catch(t){console.error("DOCAPP Error: ",t)}if(!B&&"function"==typeof window.convertCurrencies&&"object"===g(window.Currency))try{B=!0,window.convertCurrencies()}catch(t){console.error("DOCAPP Error: ",t)}if(!Q&&"object"===g(window.currencyConverter)&&"function"==typeof window.currencyConverter.init&&"object"===g(window.Currency))try{Q=!0,window.currencyConverter.init()}catch(t){console.error("DOCAPP Error: ",t)}if(!K&&(0,s.getCurrencyName)()&&"object"===g(window.Currency)&&"function"==typeof window.Currency.convertAll&&"string"==typeof window.Currency.currentCurrency&&(0,s.getCurrencyName)()!==window.Currency.currentCurrency&&"object"===g(window.Currency.moneyFormats)&&"object"===g(window.Currency.moneyFormats[window.Currency.currentCurrency]))try{K=!0,window.Currency.convertAll((0,s.getCurrencyName)(),window.Currency.currentCurrency)}catch(t){console.error("DOCAPP Error: ",t)}if(Z||!document.querySelector(".CurrencySelector__Select")||document.querySelector(".CurrencySelector__Select").getAttribute("onchange")&&document.querySelector(".CurrencySelector__Select").getAttribute("onchange").includes("form.submit")||(Z=!0,document.querySelector(".CurrencySelector__Select").dispatchEvent(new Event("change"))),!X&&"function"==typeof window.currenciesChange)try{X=!0,window.currenciesChange(".money")}catch(t){console.error("DOCAPP Error: ",t)}}},et=function(){if(!document.querySelector(".CartDrawer.is-expanded,cart-drawer.drawer.active")){setTimeout(rt,100);var t=document.querySelector(".ajax-cart__container .cart__checkout-holder");t&&t.querySelector(v)&&(setTimeout(rt,500),setTimeout(rt,1e3),(0,n.M)("Ran drawer height update - cart__checkout-holder"))}var e=document.querySelector(".ajaxcart__footer.ajaxcart__footer--fixed"),r=document.querySelector(".ajaxcart__inner.ajaxcart__inner--has-fixed-footer");e&&r&&e.querySelector(v)&&(nt(e,r),setTimeout((function(){return nt(e,r)}),500),setTimeout((function(){return nt(e,r)}),1e3),(0,n.M)("Ran drawer height update - ajaxcart__footer"));var i=document.querySelector(".ajax-cart__container .cart__checkout-holder");i&&i.querySelector(v)&&(i.style.setProperty("height","auto","important"),(0,n.M)("Ran drawer height update - ajax-cart__container"));var o=document.querySelector(".boost-pfs-minicart-content");if(o&&o.querySelector(v)){var a=document.querySelector(".boost-pfs-minicart-top"),c=document.querySelector(".boost-pfs-minicart-heading"),l=document.querySelector(".boost-pfs-minicart-bottom"),d=c?l.offsetHeight+c.offsetHeight:l.offsetHeight;a.style.setProperty("height","calc(100% - ".concat(d,"px)"),"important"),(0,n.M)("Ran drawer height update - boost-pfs-minicart-content")}var s=document.querySelector(".minicart .mini-content .sub-total");if(s&&s.querySelector(v)){var p=document.querySelector(".minicart .mini-content .sub-total");p.style.setProperty("height","auto","important"),p.style.setProperty("line-height","normal","important"),document.querySelector(".minicart .mini-content .prod").style.setProperty("height","calc(100vh - ".concat(p.offsetHeight,"px)"),"important"),(0,n.M)("Ran drawer height update - minicart")}var f=document.querySelector(".ajax-cart--bottom-wrapper .cart--subtotals");f&&f.querySelector(v)&&(f.style.setProperty("display","block","important"),(0,n.M)("Ran drawer height update - ajax-cart--bottom-wrapper"));var m=document.querySelector(".mini-cart .mini-cart__content");if(m&&m.querySelector(v)&&2===m.querySelectorAll(".mini-cart__items,.mini-cart__footer").length){var g=m.querySelector(".mini-cart__items"),h=m.querySelector(".mini-cart__footer"),_=h?h.offsetHeight:92;g.style.setProperty("height","calc(100% - ".concat(_,"px)"),"important"),g.style.setProperty("padding","0","important"),(0,n.M)("Ran drawer height update - mini-cart")}var y=document.querySelector(".go-cart-drawer"),w=document.querySelector(".go-cart-drawer > .go-cart-overflow");if(y&&!w&&y.querySelector(v)){var b=y.querySelector(".go-cart-drawer__header").offsetHeight,C=y.querySelector(".go-cart-drawer__wholesale_discount_bar");C&&(b+=C.offsetHeight);var S=y.querySelector(".go-cart-drawer__subtotal");S&&(S.style.setProperty("height","auto","important"),b+=S.offsetHeight);var A=y.querySelector(".go-cart-drawer__footer");A&&(A.style.setProperty("height","auto","important"),b+=A.offsetHeight);var E=y.querySelector(".go-cart-drawer__message");E&&(E.style.setProperty("height","auto","important"),b+=E.offsetHeight),y.querySelector(".go-cart-drawer__content").style.setProperty("height","calc(100% - ".concat(b,"px)"),"important"),(0,n.M)("Ran drawer height update - go-cart-drawer")}var q=document.querySelector(".Cart__Checkout .Button__SeparatorDot");if(q&&!q.parentElement.querySelector(".docapp-sync-subtotal")){var P=q.nextElementSibling,T=(0,u.stripTags)(P.textContent.trim());T.length<20&&T.match(/\d+/)&&P.classList.add("docapp-sync-subtotal"),(0,n.M)("Ran drawer height update - Cart__Checkout")}var k=document.querySelector(".dropdown-cart.js-header-dropdown-cart");if(k&&k.querySelector(v)){var O=k.querySelector("main.dropdown-cart_body"),D=k.querySelector("footer.dropdown-cart_footer");if(O&&D){O.style.setProperty("max-height","100px");var M=D.offsetHeight+75;O.style.setProperty("max-height","calc(100vh - ".concat(M,"px)"))}(0,n.M)("Ran drawer height update - dropdown-cart")}var I=document.getElementById("slidecarthq");if(I&&I.querySelector(v)){var L=I.querySelector(".footer-sticky");L&&L.style.setProperty("z-index","999999999"),(0,n.M)("Ran drawer height update - slidecarthq")}};function rt(){if("function"==typeof Event)window.dispatchEvent(new Event("resize"));else{var t=window.document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}}function nt(t,e){if(t&&e&&t.querySelector(v)){var r=t.querySelector(v);r&&(r.style.minHeight="0px",r.style.height="auto"),t.style.minHeight="0px",t.style.height="auto",t.style.height=t.offsetHeight+"px",e.style.bottom=t.offsetHeight+"px"}}function it(){setTimeout((function(){var t=document.querySelector(".Cart.Drawer__Content");if(t){var e=t.querySelector(".Cart__OffscreenNoteContainer");e&&("true"===e.getAttribute("aria-hidden")&&t.getBoundingClientRect().height<=480?e.style.transform="translateY(200%)":e.style.transform="")}}),10)}window.addEventListener&&window.addEventListener("resize",(function(){!function(){var t=document.querySelector(".Cart.Drawer__Content");if(t&&t.querySelector(v)){var e=t.querySelector(".Drawer__Footer"),r=t.querySelector(".Cart__OffscreenNoteContainer");e&&(t.querySelectorAll('.Cart__NoteButton, [data-action="toggle-cart-note"]').forEach((function(t){t.removeEventListener("click",it),t.addEventListener("click",it)})),t.getBoundingClientRect().height>480?(e.style.maxHeight="",e.style.overflowY="initial",e.removeAttribute("data-scrollable"),r&&(r.style.transform="")):(e.style.maxHeight="50%",e.style.overflowY="auto",e.setAttribute("data-scrollable",""),r&&(r.style.transform="translateY(200%)")))}}()}))},68889:(t,e,r)=>{"use strict";r.d(e,{H:()=>E,O:()=>v});var n=r(17057),i=r(69459),o=r(29691),a=r(14956),c=r(91569),u=r(49646);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}var d=[".cart-item",".CartItem",".line-item","form .cart-row","tr.cart__row",".items .item",".cart__item",".ajax-cart__cart-item",".cart-product-item",".cart-drawer__item",".cart__row",".mini-cart__line-item",".sf-cart__item",".ajaxcart__product",'[name="cart-item"]',".cart__items__row","[data-cart-item]"].join(","),s=[".cart-item-quantity-edit",".cart__edit",".cart_ac_edit",".minus_btn",".plus_btn",".plus-minus div",".product-details__edit",".quantity--input__button",".remove_item_button",'[name="update"]',"a.icon-minus","a.icon-plus","a.quantity-down","a.quantity-up",".increase.items",".reduced.items",".pro-qty .dec",".pro-qty .inc",".edit_cart_option",".t4s-mini_cart__edit",".t4s-page_cart__edit",".line-item-details .line-item-options","m-cart-remove-button",".cart-product-edit_variant",".cart-product-info__btn--remove",".cart-remove-js"].join(","),p=n.TB+","+s,f=["select[data-quantity-select]"].join(","),m="docapp-data-cart-item",g=new URLSearchParams(window.location.search),h=!1,_=!1,y=!0,v=function(t,e){h=e;var r=t.flatMap((function(t){var e;return(null===(e=t.free_gifts)||void 0===e?void 0:e.map((function(t){return t.product_id})))||[]})),d=!1,s=window.Shopify&&window.Shopify.routes?window.Shopify.routes.root:"/";document.querySelectorAll('form[action="'+s+'cart"]').forEach((function(t){return t.setAttribute("autocomplete","off")})),this.protectGiftDom=function(t){if(y&&!g.has("docapp-protector-disabled"))if(d)(0,i.M)("Protector: Already running. END.");else{if(d=!0,!window.docappFreeGiftFormRemovalDisabled&&window.location.pathname.includes("docapp-free-gift")&&document.querySelectorAll('form[action="'+s+'cart/add"],form[action="'+s+'cart/add.js"]').forEach((function(t){return t.remove()})),function(t){document.querySelectorAll('a[href*="/products/docapp"]').forEach((function(t){var e=t.closest(".add_to_cart_form");e&&e.remove()})),t?document.querySelectorAll("a[docapp-data-href]").forEach((function(t){t.setAttribute("href",t.getAttribute("docapp-data-href")),t.removeAttribute("docapp-data-href"),t.removeEventListener("click",A)})):document.querySelectorAll('a[href*="/products/docapp"]').forEach((function(t){t.setAttribute("docapp-data-href",t.getAttribute("href")),t.removeAttribute("href"),t.setAttribute("tabindex",t.getAttribute("tabindex")||"0"),t.addEventListener("click",A)}))}(e),window.location.href.includes("/collections/")&&(document.querySelectorAll('#main-collection-product-grid .boost-pfs-action-list-enabled a[href*="/products/docapp"],#main-collection-product-grid .boost-pfs-action-list-enabled a[docapp-data-href]').forEach((function(t){t.closest(".boost-pfs-action-list-enabled").style.setProperty("display","none","important")})),document.querySelectorAll('#MainContent > .t4s-collection-page .t4s-products a[href*="/products/docapp"],#MainContent > .t4s-collection-page .t4s-products a[docapp-data-href]').forEach((function(t){var e=!!t&&t.closest(".t4s-product");e&&e.remove()}))),!r.length)return _||(_=!0,(0,i.M)("Protector: No product IDs (either there are no gift goals, or all goals are disabled). END.")),window.freeGiftCartUpsellProDraftOrder=!1,void(d=!1);var f,h=[],v={},E=t||(0,c.getLastCartResponse)();if(!E||!E.items||!E.items.length)return window.freeGiftCartUpsellProDraftOrder=!1,void(d=!1);g.has("docapp-protector-log")&&(0,i.M)("PROTECTOR: START"),E.items.forEach((function(t,e){!function(t,e){var r=t.product_id+"-"+t.variant_id,n=['.drawer__inner .cart__item[data-cart-item-id="'+t.key+'"]['+m+"]","#root aside#cart ul.l4ca > li:nth-child("+(e+1)+")["+m+"]","#root .form-cart ul.l4ca > li:nth-child("+(e+1)+")["+m+"]"];document.querySelectorAll(n.join(",")).forEach((function(t){t.getAttribute(m)!==r&&(t.removeAttribute(m),t.querySelectorAll("[docapp-data-trigger]").forEach((function(t){return t.remove()})),t.querySelectorAll("[docapp-data-protected]").forEach((function(t){t.removeAttribute("docapp-data-protected"),t.style.removeProperty("visibility"),t.style.removeProperty("display")})))}))}(t,e),t.product_id&&r.includes(t.product_id.toString())&&(window.freeGiftCartUpsellProDraftOrder=!!a.default.getGoalsData().useDraftOrders&&!u.A.cartIsIncompatibleWithDraftOrders(E),t.final_price>=101||(h.push(t.variant_id),v[t.variant_id]=t.product_id,function(t,e){document.querySelectorAll('a[href*="/cart/change?line='+(e+1)+'&"],a[href*="/cart/change?quantity=0&id='+t.variant_id+'"],a[href*="/cart/change/'+t.variant_id+'"],a[href*="/cart/change?id='+t.variant_id+'"]').forEach(S(t.variant_id))}(t,e),document.querySelectorAll('input[name="id"][value="'+t.variant_id+'"]').forEach((function(t){return t.closest("form").remove()})),function(t,e,r){var n,o,a,c=t.product_id+"-"+t.variant_id;document.querySelector(".rebuy-cart__flyout-item:nth-child("+(e+1)+")")&&(0,i.M)("The ReBuy cart integration that hides quantity inputs is disabled!");document.querySelectorAll(".rebuy-cart__flyout-item:nth-child("+(e+1)+") .rebuy-cart__flyout-item-media").forEach((function(t){t.getAttribute(m)!==c&&t.setAttribute(m,c)})),document.querySelectorAll(".cd-cart .cd-cart-items .cd-cart-item:nth-child("+(e+1)+")").forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll('input[type="text"]').forEach((function(e){return C(e,t.variant_id)})),e.querySelectorAll("button").forEach((function(t){return t.remove()})))})),document.querySelectorAll("#app-minicart .minicart__ProductArea .minicart__ProductItem:nth-child("+(e+1)+")").forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll('input[type="text"]').forEach((function(e){return C(e,t.variant_id)})),e.querySelectorAll(".minicart__ProductItem__Quantity__Button--plus,.minicart__ProductItem__Quantity__Button--minus").forEach((function(t){return t.remove()})))})),document.querySelectorAll("#slidedown-cart .mini-products-list li#cart-item-"+t.variant_id).forEach((function(t){t.getAttribute(m)!==c&&(t.setAttribute(m,c),t.querySelectorAll(".btn-remove").forEach((function(t){return t.remove()})))})),document.querySelector("#cart-drawer ul.mini-products-list li.grid")&&(0,i.M)("The Avone theme cart integration that hides quantity inputs is disabled!");document.querySelectorAll('.quick-cart__item[data-id="'+t.variant_id+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll("button").forEach(S(t.variant_id)))})),document.querySelectorAll('.gt_items--content[data-variant-id="'+t.variant_id+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll("input").forEach((function(e){return C(e,t.variant_id)})),e.querySelectorAll(".gt_button-remove,.gt_quantity_plus,.gt_quantity_minus").forEach(S(t.variant_id)))})),document.querySelectorAll('.gt_items_cart[data-variant-id="'+t.variant_id+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll("input").forEach((function(e){return C(e,t.variant_id)})),e.querySelectorAll(".gt_icon_remove_product,.gt_box_quantity").forEach(S(t.variant_id)))})),document.querySelectorAll('.product-cart[data-product-variant-id="'+t.variant_id+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll("input").forEach((function(e){return C(e,t.variant_id)})),e.querySelectorAll("[data-control]").forEach(S(t.variant_id)))})),document.querySelectorAll('.qty-changer[data-variant-id="'+t.variant_id+'"]').forEach((function(e){e.hasAttribute("docapp-data-protected")||(e.setAttribute("docapp-data-protected",t.variant_id),e.querySelectorAll("button, .minicart-prd-action").forEach(S(t.variant_id)),e.querySelectorAll("input").forEach(w(t.product_id,t.variant_id)))})),document.querySelectorAll('[data-line-item-id="'+t.variant_id+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll("input").forEach(w(t.product_id,t.variant_id)),e.querySelectorAll("button").forEach(S(t.variant_id)))})),document.querySelectorAll('.icartProductContainer[data-variant-id="'+t.variant_id+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll(".icart-minus, .icart-plus, .cartProductRmv").forEach(S(t.variant_id)),e.querySelectorAll(".icart-input-num.icartQtyInput").forEach((function(e){e.style.borderLeftStyle="solid",e.style.borderLeftWidth="1px",e.style.borderRightStyle="solid",e.style.borderRightWidth="1px",e.querySelectorAll("input").forEach((function(e){return C(e,t.variant_id)}))})))}));var u=document.querySelectorAll(".icart-items .icart-bottom-new-checkout");if(u.length){var d=u[e];d.getAttribute(m)!==c&&(d.setAttribute(m,c),d.querySelectorAll(".icart-minus, .icart-plus, .icart-delete-btn").forEach(S(t.variant_id)),d.querySelectorAll(".icart-input-num.icart-qty-input").forEach((function(e){e.style.borderLeftStyle="solid",e.style.borderLeftWidth="1px",e.style.borderRightStyle="solid",e.style.borderRightWidth="1px",e.querySelectorAll("input").forEach((function(e){return C(e,t.variant_id)}))})))}document.querySelectorAll('.ws-cs-item[data-variant="'+t.variant_id+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll(".ws-cs-item-qty a, .ws-cs-item-close").forEach(S(t.variant_id)),e.querySelectorAll(".ws-cs-item-qty input").forEach((function(e){return C(e,t.variant_id)})))})),document.querySelectorAll('.satcb-cs-item[data-variant="'+t.variant_id+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll(".satcb-cs-item-qty a, .satcb-cs-item-close").forEach(S(t.variant_id)),e.querySelectorAll(".satcb-cs-item-qty input").forEach((function(e){return C(e,t.variant_id)})))})),document.querySelectorAll("#cartSlideoutAside .cart-items li:nth-child("+(e+1)+")").forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll(".cart-item-quantity-button, #cart-item-remove-button").forEach(S(t.variant_id)),e.querySelectorAll("input.cart-item-quantity").forEach((function(e){return C(e,t.variant_id)})))})),document.querySelectorAll("#custom-drawer-cart .cart-items li:nth-child("+(e+1)+")").forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll("button").forEach(S(t.variant_id)),e.querySelectorAll("input.main_qty").forEach((function(e){return C(e,t.variant_id)})))})),document.querySelectorAll('.go-cart-item__single[data-line="'+(e+1)+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll(".go-cart-item__remove,.go-cart-item__quantity-button").forEach(S(t.variant_id)))}));var s=document.querySelector('[x-html="cart_drawer_items"], [x-show="cart_drawer"]');if(s&&s.querySelectorAll(".flex.items-start").length===r.items.length){var p=s.querySelectorAll(".flex.items-start")[e];p.getAttribute(m)!==c&&(p.setAttribute(m,c),b(p,t.product_id,t.variant_id))}var f=document.querySelectorAll('form[action="/cart"] .relative.divide-y > .flex.items-start');if(f.length===r.items.length){var g=f[e];g.getAttribute(m)!==c&&(g.setAttribute(m,c),b(g,t.product_id,t.variant_id))}var h=document.querySelectorAll('form#cart_form [name="cart-item"]');if(h.length===r.items.length){var _=h[e];_.getAttribute(m)!==c&&(_.setAttribute(m,c),b(_,t.product_id,t.variant_id))}var y=document.querySelector(".ajaxcart .ajaxcart__product");if(y){var v=y.getAttribute("data-line")||0;document.querySelectorAll('.ajaxcart .ajaxcart__product[data-line="'+(e+parseInt(v))+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll(".remove-from-cart").forEach(S(t.variant_id)))}))}document.querySelectorAll('.cart-item[data-variant="'+t.variant_id+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),e.querySelectorAll(".cart-item-decrease, .cart-item-increase").forEach(S(t.variant_id)),e.querySelectorAll(".cart-item-quantity-display").forEach((function(e){return C(e,t.variant_id)})))})),document.querySelectorAll('#ajaxifyCart form .cart-row[data-line="'+(e+1)+'"]').forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),b(e,t.product_id,t.variant_id))}));var A=document.querySelectorAll('.icart-pg-skelton-hide .icart-pg-cart-item[data-page-type="1"]');if(A.length){var E=A[e];E.getAttribute(m)!==c&&(E.setAttribute(m,c),E.querySelectorAll("button").forEach(S(t.variant_id)),E.querySelectorAll("input").forEach((function(e){return C(e,t.variant_id)})))}var q=document.querySelector('#shopify-section-eam-cart .eam-cc-item[data-product-line="'+(e+1)+'"]');q&&q.getAttribute(m)!==c&&(q.setAttribute(m,c),q.querySelectorAll('input[type="button"], .eam-cc-item-delete-container').forEach(S(t.variant_id)),q.querySelectorAll('input[type="number"]').forEach((function(e){return C(e,t.variant_id)})));var P=document.querySelector(".cart-item-list__body .cart-item #cart-item-image-"+t.variant_id),T=document.querySelector('.cart-item-list__body .cart-item .cart-item__quantity-input[data-line="'+(e+1)+'"]');if(P&&document.querySelectorAll(".cart-item-list__body .cart-item .cart-item__quantity-input").length===r.items.length){var k=P.closest(".cart-item");k.getAttribute(m)!==c&&(k.setAttribute(m,c),b(k,t.product_id,t.variant_id))}else if(T&&document.querySelectorAll(".cart-item-list__body .cart-item .cart-item__quantity-input").length===r.items.length){var O=T.closest(".cart-item");O.getAttribute(m)!==c&&(O.setAttribute(m,c),b(O,t.product_id,t.variant_id))}var D=document.querySelector("cart-form .cart-item-list__body .cart-item.product-"+t.handle);D&&D.getAttribute(m)!==c&&(D.setAttribute(m,c),D.querySelectorAll(".quantity-down, .quantity-up ").forEach(S(t.variant_id)),D.querySelectorAll('input[name="updates[]"]').forEach((function(e){return C(e,t.variant_id)})));var M=document.querySelector('ul.cart-items li.cart-item-container input.quantity__number[data-line="'+(e+1)+'"]');if(M){var I=M.closest(".cart-item-container");if(I.getAttribute(m)!==c){I.setAttribute(m,c),b(I,t.product_id,t.variant_id);var L=I.querySelector(".description");if(L){var x=document.createElement("div");x.classList.add("docapp-free-gift-variant-select"),L.append(x)}}}var j=document.querySelector('.cart-form .cart-items .cart-item .qty-adjuster input.qty-adjuster__value[data-line="'+(e+1)+'"]');if(j){var U=j.closest(".cart-item");U.getAttribute(m)!==c&&(U.setAttribute(m,c),b(U,t.product_id,t.variant_id))}var N=document.querySelectorAll("cart-drawer#mini-cart #mini-cart-form line-item.line-item");if(N.length===r.items.length){var G=N[e];G.getAttribute(m)!==c&&(G.setAttribute(m,c),b(G,t.product_id,t.variant_id))}var R="object"===l(window.theme)&&"object"===l(window.theme.AjaxCart)&&"function"==typeof window.theme.AjaxCart.fetch&&document.querySelector("#AjaxCartTemplate .ajaxcart__products .line-item:nth-child("+(e+1)+")");R&&R.getAttribute(m)!==c&&(R.setAttribute(m,c),R.querySelectorAll("button, input").forEach((function(t){return t.setAttribute("docapp-data-protected","disabled-integration")})));document.querySelector('[data-csapp_line_index] .cart-quantity-wrap input[data-id="'+t.variant_id+'"]')&&(0,i.M)("The AIOD cart app cart integration that hides quantity inputs is disabled!");var H=!!window.iopCart&&document.querySelector('#iop-cart-page .line-item [for="'+t.variant_id+'"]');if(H){var F=H.closest(".line-item");F.getAttribute(m)!==c&&(F.setAttribute(m,c),b(F,t.product_id,t.variant_id))}else window.iopCart&&(0,i.M)("The iop-cart integration that hides quantity inputs is disabled due to no ids!");var B,W=null!==(n=window.Avatar)&&void 0!==n&&null!==(n=n.theme)&&void 0!==n&&null!==(n=n.sections)&&void 0!==n&&null!==(n=n.SliderCart)&&void 0!==n&&null!==(n=n.instance)&&void 0!==n&&n.refreshCartSlider?document.querySelector('.cart-item[data-cart-item][data-item-key="'+t.key+'"]'):null;W&&W.getAttribute(m)!==c&&(W.setAttribute(m,c),b(W,t.product_id,t.variant_id));if(document.getElementById("CartDrawer-Form")&&(B=document.getElementById("CartDrawer-CartItems"))){var z,V='a[docapp-data-href*="/products/'+encodeURIComponent(t.handle)+'"],a[href*="/products/'+encodeURIComponent(t.handle)+'"]';if(B.querySelectorAll("["+m+'="'+c+'"]').forEach((function(t){t.querySelector(V)?z=t:(t.removeAttribute(m),t.querySelectorAll("[docapp-data-trigger]").forEach((function(t){return t.remove()})),t.querySelectorAll("[docapp-data-protected]").forEach((function(t){t.removeAttribute("docapp-data-protected"),t.style.removeProperty("visibility"),t.style.removeProperty("display")})))})),!z){var Q=B.querySelector(V);z=null==Q?void 0:Q.closest(".cart-item")}z&&!z.querySelector("[docapp-data-protected]")&&(z.setAttribute(m,c),z.querySelectorAll("button").forEach(S(t.variant_id)),z.querySelectorAll("input").forEach((function(e){return C(e,t.variant_id)})))}var J=null===(o=document.getElementById("Form-cart-drawer"))||void 0===o?void 0:o.querySelector("ul li[data-line-item]:nth-child("+(e+1)+")");J&&J.getAttribute(m)!==c&&(J.setAttribute(m,c),J.querySelectorAll("label a[data-line]").forEach((function(t){return t.remove()})),J.querySelectorAll("label input[data-line]").forEach((function(e){return C(e,t.variant_id)})));var X=null!==(a=window.corner)&&void 0!==a&&a.cartInfo?document.querySelector("#corner-cowi-cart-item-"+e):null;X&&X.getAttribute(m)!==c&&(X.setAttribute(m,c),X.querySelectorAll("button").forEach(S(t.variant_id)));document.querySelector("#drawer-items .mini-cart-rows .mini-cart-item:nth-child("+(e+1)+")")&&(0,i.M)("The Unknown theme drawer cart integration that hides quantity inputs is disabled!");var K=['.line-item[data-line-item="'+t.key+'"]','.cart__card[data-cart-item="'+t.key+'"]','.ajax-cart__product[data-cart-item="'+t.key+'"]','li[data-product-id="'+t.variant_id+'"]','.cart-mini-item[data-cart-mini-item="'+t.variant_id+'"]','.cart-item[data-cart-item-key="'+t.key+'"]','.items_content[data-key="'+t.key+'"]','.drawer__inner .cart__item[data-cart-item-id="'+t.key+'"]','.product__list .cart__product--row[data-cart-item-key="'+t.key+'"]','.upcart-product-item[id="'+t.variant_id+'"]','.upcart-product-item[id="'+t.key+'"]','.quick-cart .quick-cart__items .cart__item[data-id="'+t.variant_id+'"]','.cart-form .cart-items article[data-cart-item-variant-id="'.concat(t.variant_id,'"].cart-item'),'#wowcart-cart-form .slide-cart-product-item[data-variant_id="'.concat(t.variant_id,'"]'),'#CartContainer [data-cart-row][data-cart-item-key="'+t.key+'"]',".cart-drawer__products.item-"+t.variant_id,'.products-cart[data-id-cart="'+t.variant_id+'"]','#sca_fg_cart .cart-item-grouping .cart__item[data-key="'+t.key+'"]','#CartDrawer [data-cart-item="'+t.key+'"]',"#CartItem-"+(e+1)+".f-cart-item",".cart-item-wrap ul.cart-wrap:nth-child("+(e+1)+")",".item-wrap ul.cart-wrap:nth-child("+(e+1)+")","#sca_fg_cart ul.cart-items li.cart-item:nth-child("+(e+2)+")",".cart-table-container table.cart-table tr:nth-child("+(e+1)+")",".cart-table.shopping-cart-table table tr:nth-child("+(e+1)+")","table.order-summary .order-summary__body tr:nth-child("+(e+1)+")",".cart .productsCart div .cart__row:nth-child("+(e+1)+")",".mini-cart-item-list .mini-cart-item:nth-child("+(e+1)+")","#root aside#cart ul.l4ca > li:nth-child("+(e+1)+")","#root .form-cart ul.l4ca > li:nth-child("+(e+1)+")",'#cart ul li.grid[key="'+t.key+'"]',"#cart tr.cart-item#CartItem-"+(e+1),'#MinimogCartDrawer .m-cart-item[data-id="'+t.key+'"]','#MinimogCart .m-cart-item[data-id="'+t.key+'"]','#main-cart-items .cart-items__product[data-cart-item="'+t.key+'"]',"#cartx-CrtpageMainFrm .cart-section-items .cart-section-item:nth-child("+(e+1)+")","#showCart [data-cart-view] .grid-x .ajax-item-row:nth-child("+(e+2)+")",'#CartDrawerForm cart-item[data-variant-id="'+t.variant_id+'"]'];document.querySelectorAll(K.join(",")).forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),b(e,t.product_id,t.variant_id))}));var Z=['.ajaxcart__product .ajaxcart__row[data-line="'+(e+1)+'"]',".cart-product-container .single-cart-product:nth-child("+(e+1)+")",'.ajax-cart-item__single[data-line="'+(e+1)+'"]',".cart-summary .cart-summary__product-list .cart-summary__product:nth-child("+(e+1)+")",".cart-loop > div:nth-child("+(e+1)+") [data-csapp_line_index]",".cart-drawer__line-items line-item.line-item:nth-child("+(e+1)+")","#cart-info #cart-content .items-inner:nth-child("+(e+1)+")",".drawer .cartLineItems .cartLineItem:nth-child("+(e+1)+")","#cartSlideoutWrapper div.cart-items div.cart-item:nth-child("+(e+1)+")","header .tt-cart-list .tt-item:nth-child("+(e+1)+")","#cart-dropdown .cart-product:nth-child("+(e+1)+")"];setTimeout((function(){return document.querySelectorAll(Z.join(",")).forEach((function(e){e.getAttribute(m)!==c&&(e.setAttribute(m,c),b(e,t.product_id,t.variant_id))}))}),350)}(t,e,E)))})),function(t,e,r){e.forEach((function(e){t.querySelectorAll('[id*="Updates_'+e+'"]').forEach(w(r[e],e)),t.querySelectorAll('[id*="updates_'+e+'"]').forEach(w(r[e],e))})),t.querySelectorAll(n.Ri).forEach((function(t){if(!t.getAttribute("docapp-data-protected")){var n=(0,o.getQuantityInputVariantId)(t);if(n){for(var i in e)if(n.toString().includes(e[i])){w(r[e[i]],e[i])(t);break}t.setAttribute("docapp-data-protected",n)}else t.setAttribute("docapp-data-protected","no-id")}}))}(document,h,v),function(t,e,r){t.querySelectorAll(p).forEach((function(t){if(!t.getAttribute("docapp-data-protected")){var n=(0,o.getQuantityInputVariantId)(t);if(n){for(var i in e)if(n.toString().includes(e[i])){S(e[i])(t),b(t,r[e[i]],e[i]);break}t.setAttribute("docapp-data-protected",n)}else t.setAttribute("docapp-data-protected","no-id")}}))}(document,h,v),f=['#CartDrawer input[name="updates[]"]','#drawer-cart .cart-item__actions input[name="updates[]"]'],document.querySelectorAll(f.join(",")).forEach((function(t){t.docappEnterBlocked||(t.addEventListener("keydown",(function(t){(void 0!==t.key&&"Enter"===t.key||void 0!==t.keyCode&&13===t.keyCode||void 0!==t.code&&("Enter"===t.code||"NumpadEnter"===t.code))&&(t.stopImmediatePropagation(),t.preventDefault())}),{capture:!0}),t.docappEnterBlocked=!0)})),d=!1,g.has("docapp-protector-log")&&(0,i.M)("PROTECTOR: END")}}};function w(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(n){n.getAttribute("docapp-data-protected")!==e.toString()&&("select"===n.nodeName.toLowerCase()?n.disabled=!0:C(n,e),n.setAttribute("docapp-data-protected",e),r&&(n.parentNode.querySelectorAll("button").forEach((function(t){t.disabled=!0,t.style.visibility="hidden"})),b(n,t,e)))}}function b(t,e,r){var o=e+"-"+r,a=t.closest("["+m+'="'+o+'"]');if(!a&&t.parentNode){var c=t.parentNode.querySelectorAll(n.Ri).length;if(!(a=t.closest(d))&&c>0){for(var u=1,l=t.parentNode;u<10&&"form"!==l.nodeName.toLowerCase()&&"body"!==l.nodeName.toLowerCase()&&l.parentNode&&l.parentNode.querySelectorAll(n.Ri).length===c;)u++,l=l.parentNode;a=l}}a&&((0,i.M)("Protector: Protecting parent cart item..."),a.setAttribute(m,o),a.querySelectorAll(p).forEach(S(r)),a.querySelectorAll(n.Ri+","+f).forEach((function(t){t.getAttribute("docapp-data-protected")!==r.toString()&&("select"===t.nodeName.toLowerCase()?t.disabled=!0:C(t,r),t.setAttribute("docapp-data-protected",r))})),a.getAttribute("data-cart-item-url")&&a.querySelectorAll("img").forEach((function(t){t.getAttribute("docapp-data-protected")||(t.addEventListener("click",(function(t){t.stopPropagation(),t.preventDefault()})),t.setAttribute("docapp-data-protected",r))})))}function C(t,e){t.setAttribute("autocomplete","off"),t.getAttribute("id")||t.setAttribute("id","variant-"+e),t.readOnly=!0}function S(t){return function(e){e.style.setProperty("visibility","hidden","important"),e.style.setProperty("display","none","important"),e.setAttribute("docapp-data-protected",t)}}function A(t){t.target&&t.target.closest(".docapp-variant-options-trigger")||h||(t.preventDefault(),t.stopImmediatePropagation())}var E=function(t){y=!!t}},18263:(t,e,r)=>{"use strict";r.d(e,{A:()=>x});var n=r(29691),i=r(6696),o=r(67805),a=r(69459),c=r(80748),u=r(14956),l=r(18335),d=r(65806),s=r(47846),p=r(45858),f=r(54522),m=r(38278),g=[],h=null,_=null,y=null,v=null,w=0,b=0,C=0,S=[],A=!1,E=!1,q=0,P="",T="",k=!1,O=!1,D=!0,M=i.A.SUBTOTAL,I=null,L=!1;const x={detectWidgets:function(){g=document.querySelectorAll(".docapp-free-gift-progress")},setShopOptions:function(t){if(P="",T="",t.gift_progress_custom_note_enabled&&t.gift_progress_custom_note_label&&t.gift_progress_custom_note_label.length){var e='<div class="docapp-fg-progress-custom-note {CLASS}">{LABEL}</div>'.replace("{LABEL}",t.gift_progress_custom_note_label);"top"===t.gift_progress_custom_note_position?P=e.replace("{CLASS}","docapp-on-top"):T=e.replace("{CLASS}","docapp-on-bottom")}k=!!t.gift_progress_add_link_to_gift,O=!!t.gift_progress_hide_when_no_progress,M=t.gift_progress_default_metric||i.A.SUBTOTAL,D=!!t.gift_progress_goal_label_enabled},populateWidgets:function(t,e,r){var i=this;if(t&&!A){if(e!==t.currency&&!(0,d.m)(t))return(0,a.M)("PROGRESS: Need cart currency rate! Progress Bar End."),h=null,void g.forEach((function(t){return t.innerHTML=""}));if((0,m.isReadyToFormatMoney)()){(this.goalTargetsHaveChanged()||this.goalVisibilityHasChanged())&&((0,a.M)("PROGRESS: Goal targets or visibility has changed!"),h=null,g.forEach((function(t){return t.innerHTML=""}))),h||this.generateInitialProgressBarHtml(),E||(E=!0,window.addEventListener&&window.addEventListener("resize",(function(){return i.setBarHeight()})));var o=!1;g.forEach((function(t){t.querySelector(".docapp-fg-progress-container")||((0,a.M)("PROGRESS: Widget had no content: ",t.innerHTML),t.innerHTML=h,i.addGoalClickHandlers(t),o=!0)}));var c=(0,n.getCartHash)(t),u=p.A.getTotalDiscount();(r||o||c!==_||u!==y)&&((0,a.M)("PROGRESS: Start applying new cart response to widgets due to changes:",{newWidgetFound:o,cartHash:c,lastCartHash:_,newDiscount:u,lastDiscount:y}),_=c,y=u,this.shouldHideProgressBars()?(g.forEach((function(t){return t.classList.add("docapp-hidden")})),L=!0):L&&(g.forEach((function(t){return t.classList.remove("docapp-hidden")})),L=!1),this.applyCurrentCartStateToWidgets(),this.fixOtherZIndexContent(),(0,s.bG)())}else(0,a.M)("PROGRESS: Skip applying new cart response due to missing currency formatting.")}},generateInitialProgressBarHtml:function(){var t=this;(0,a.M)("PROGRESS: generateInitialProgressBarHtml!");var e=[],r=[];if(h=null,v=M,w=0,b=0,S=[],u.default.getGoalsData().giftGoals.forEach((function(t){var n=t.filter_type&&t.current_progress<=0&&t.current_progress_pre_discount<=0&&t.gifts_awarded<=0,o=!!t.complete_and_removed&&t.gifts_awarded<=0;O&&(n||o)||(t.comparing===i.A.SUBTOTAL?w=Math.max(w,t.current_requires):t.comparing===i.A.COUNT&&(b=Math.max(b,t.current_requires)),t.comparing===i.A.SUBTOTAL?e.push(t):t.comparing===i.A.COUNT&&r.push(t))})),v!==i.A.SUBTOTAL||e.length?v!==i.A.COUNT||r.length||(v=i.A.SUBTOTAL):v=i.A.COUNT,S=v===i.A.SUBTOTAL?e:r,I="",!S.length)return h='<div class="docapp-fg-progress-container docapp-no-goals-to-display" style="display: none !important;"></div>',void(0,a.M)("PROGRESS: No Goals, No Bar!");S.sort((function(t,e){return t.current_requires>e.current_requires?1:-1}));var n=S.reduce((function(e,r,n){var o;if(I=I+"|"+r.current_requires,r.goal_type===l.A.DISCOUNT)o='<div class="docapp-fg-discount"></div>';else if(r.goal_type===l.A.SHIPPING)o='<div class="docapp-fg-free-shipping"></div>';else{var a;o='<img src="'.concat((null===(a=r.free_gifts)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.image)||"https://d2fk970j0emtue.cloudfront.net/images/gift.png",'" alt="').concat(r.name,'">')}var u,d,s=r.name;r.reward_handling_type===f.RewardHandlingType.MANUAL?u=r.gift_quantity||0:u=null===(d=r.free_gifts)||void 0===d?void 0:d.reduce((function(t,e){return t+e.quantity}),0);if(-1===r.max_applications||r.max_applications>1||u>1){var p=r.times_awarded;(-1===r.max_applications||r.max_applications>r.times_awarded)&&(p+=1),s+=" x"+p*u}var m,g=(100/S.length*(n+1)).toFixed(2);r.requires<=0?m="":r.comparing===i.A.SUBTOTAL?m="".concat(c.H," ").concat(t.formatAmount(r.current_requires)):r.comparing===i.A.COUNT&&(m="".concat(c.H," ").concat(r.current_requires));var h,_="",y="",v="",w="40px",b=n+"_"+r.id;(1===S.length&&(g="50.00",w="65px",_=" docapp-bubble-hidden",v='<div class="docapp-fg-progress-goal docapp-bubble-only" docapp-data-fg-goal="{GOAL_ID}" style="left: calc(100% - 40px);">\n  <div class="docapp-fg-goal-bubble">✓</div>\n</div>'.replace("{GOAL_ID}",b)),r.goal_type===l.A.GIFT&&k)&&(_+=" docapp-clickable",y+=' docapp-data-handle="'+(null===(h=r.free_gifts)||void 0===h||null===(h=h[0])||void 0===h?void 0:h.handle)+'"');return e+'<div class="docapp-fg-progress-goal{CLASS}" docapp-data-fg-goal="{GOAL_ID}" style="left: calc({PERCENTAGE}% - {OFFSET});" {ATTR}>\n  <div class="docapp-fg-pin">\n      <svg viewBox="0 -0.5 60 61" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M54.2308 24.5455C54.2308 43.6364 30.0001 60 30.0001 60C30.0001 60 5.76929 43.6364 5.76929 24.5455C5.76929 18.0356 8.32216 11.7924 12.8663 7.1892C17.4105 2.58603 23.5737 0 30.0001 0C36.4265 0 42.5896 2.58603 47.1338 7.1892C51.6779 11.7924 54.2308 18.0356 54.2308 24.5455Z"/>\n      </svg>\n      <div class="docapp-fg-pin-cropper">\n        {IMAGE}\n      </div>\n  </div>\n  <div class="docapp-fg-pin-label"></div>\n  <div class="docapp-fg-goal-text-content">\n      <div class="docapp-fg-goal-title">{NAME}</div>\n      <div class="docapp-fg-goal-target">{TARGET}</div>\n  </div>\n  <div class="docapp-fg-goal-bubble">✓</div>\n</div>'.replace("{GOAL_ID}",b).replace("{IMAGE}",o).replace("{NAME}",s).replace("{TARGET}",m).replace("{PERCENTAGE}",g).replace("{OFFSET}",w).replace("{ATTR}",y).replace("{CLASS}",_)+v}),"");return h=P+'<div class="docapp-fg-progress-container">\n    <div class="docapp-fg-progress-track">\n        <div class="docapp-fg-active-track"></div>\n        {GOALS}\n        <div class="docapp-fg-current docapp-fg-on-hover">\n          <div class="docapp-fg-current-amount"></div>\n        </div>\n    </div>\n    <div class="docapp-fg-progress-label"></div>\n</div>'.replace("{GOALS}",n)+T},applyCurrentCartStateToWidgets:function(){this.detectWidgets(),this.applyChangesToGoals(),this.applyChangeToProgress(),this.setBarHeight(),this.emitWidgetUpdatedEvent()},applyChangesToGoals:function(){if(g.length||document.querySelector(".docapp-free-gift-float")){var t=!1,e=!1,r=S.length,n=r;q=0;var i=!0,o=0,a=0,c=0,u=100/r;C=0;var l="docapp-fg-goal-completed",d="docapp-fg-goal-next";document.querySelectorAll("."+d).forEach((function(t){return t.classList.remove(d)})),S.forEach((function(t){return a=Math.max(a,t.current_progress)})),S.forEach((function(s,p){var f='.docapp-fg-progress-goal[docapp-data-fg-goal="'.concat(p,"_").concat(s.id,'"]'),m=document.querySelectorAll(f),g=s.current_progress<=0&&s.current_progress_pre_discount<=0;if(s.complete||s.complete_and_removed)C=u*(c+=1),o=s.current_requires;else{var h=Math.max(s.current_requires-o,0),_=Math.max(s.current_progress-o,0),y=h>0?_/h:0;y>0&&(C=u*(c+y),o=s.current_requires),a>s.current_requires&&(c+=1)}q=Math.max(q,n),s.complete?(i=!1,m.forEach((function(t){s.complete_and_removed?t.classList.remove(l):t.classList.add(l),D&&S.length>2&&t.style.setProperty("z-index",n)}))):(i=!0,m.forEach((function(t){t.classList.remove(l),D&&S.length>2&&t.style.setProperty("z-index",n)}))),n+=i?-1:1;var v=!1,w=!t&&!s.complete,b=e&&!s.complete&&!g;(w||b)&&(v=!0,t=!0,e=g),t||p!==r-1||(v=!0,t=!0),document.querySelectorAll(f+" .docapp-fg-pin-label").forEach((function(t){t.innerHTML=s.current_message,s.complete_and_removed?t.parentElement.classList.add("docapp-fg-pin-gift-removed"):t.parentElement.classList.remove("docapp-fg-pin-gift-removed")})),v&&(document.querySelectorAll(".docapp-fg-progress-label").forEach((function(t){return t.innerHTML=s.current_message})),document.querySelectorAll(".docapp-free-gift-float-message").forEach((function(t){t.innerHTML=s.current_message,t.parentElement.classList.remove("docapp-hidden")}))),v&&!s.complete&&m.forEach((function(t){return t.classList.add(d)}))}))}},applyChangeToProgress:function(){if(g.length){var t=0,e=0,r=0,n=0;S.forEach((function(o){v===i.A.SUBTOTAL?(e=Math.max(e,o.current_progress),t=Math.max(t,o.current_progress_pre_discount)):(n=Math.max(n,o.current_progress),r=Math.max(r,o.current_progress_pre_discount))}));var o,a=Math.min(100,C).toFixed(2);o=v===i.A.SUBTOTAL?t>e?'<span class="docapp-line-through">'+this.formatAmount(t)+"</span> "+this.formatAmount(e):this.formatAmount(e):r>n?'<span class="docapp-line-through">'+r+"</span> "+n:n;var u="".concat(c.H," ").concat(o);document.querySelectorAll(".docapp-fg-active-track").forEach((function(t){t.style.width=a+"%","100.00"===a?t.classList.add("docapp-fg-active-track-complete"):t.classList.remove("docapp-fg-active-track-complete")})),document.querySelectorAll(".docapp-fg-current .docapp-fg-current-amount").forEach((function(t){return t.innerHTML=u}))}},formatAmount:function(t,e){return(0,o.formatAmount)(t,(0,m.getMoneyFormat)(),(0,m.getCurrencyName)(),e)},setBarHeight:function(t){if(t=t||1,!g.length)return(0,a.M)("BarHeight: no widgets to fix. End."),null;var e=0,r=0,n=!1;return document.querySelectorAll(".docapp-fg-progress-container").forEach((function(t){if(!n){var i=t.parentElement;if(0!==i.offsetWidth&&0!==i.offsetHeight){t.querySelectorAll(".docapp-fg-progress-goal").forEach((function(t){t.offsetHeight>300||(e=Math.max(e,t.offsetHeight))})),r=Math.max(0,e-t.querySelector(".docapp-fg-active-track").offsetHeight),!isNaN(r)&&r>0&&r<500&&(n=!0)}}})),n?(document.querySelectorAll(".docapp-fg-progress-container").forEach((function(t){t.style.setProperty("padding-top",r+"px","important"),1===S.length&&(t.style.paddingRight="5px")})),document.querySelectorAll(".docapp-fg-progress-custom-note").forEach((function(t){1===S.length&&(t.style.paddingRight="5px")})),r):(setTimeout(this.setBarHeight.bind(this,t+1),500),null)},blockWidgetGeneration:function(){A=!0},goalTargetsHaveChanged:function(){var t="";return S.forEach((function(e){t=t+"|"+e.current_requires})),I!==t},fixOtherZIndexContent:function(){!D||!g.length||S.length<=2||q<1||document.querySelectorAll("#shopify-section-header, .header-bottom[data-sticky-mb], .wrapper-navigation[data-sticky-pc]").forEach((function(t){if(!t.className.includes(" z-")){var e=t.style.zIndex||"0";t.style.removeProperty("z-index");var r=window.getComputedStyle(t),n=parseInt(r.zIndex)||0,i=q+1;if(e>i)t.style.setProperty("z-index",e,"important");else if(!(n>i))t.style.setProperty("z-index",i.toFixed(0),"important"),document.querySelectorAll(".Drawer,.drawer .drawer_container,.mini-cart").forEach((function(t){var e=window.getComputedStyle(t),r=parseInt(e.zIndex),n=i+1;r>n||t.style.setProperty("z-index",n.toFixed(0),"important")}))}}))},addGoalClickHandlers:function(t){t.querySelectorAll(".docapp-clickable").forEach((function(t){return t.addEventListener("click",(function(){var e=t.getAttribute("docapp-data-handle");if(e){(0,a.M)("PROGRESS: Redirecting to "+e);var r=window.Shopify&&window.Shopify.routes?window.Shopify.routes.root:"/";window.location.href=r+"products/"+e}}))}))},shouldHideProgressBars:function(){return!!O&&!S.find((function(t){var e=t.filter_type&&t.current_progress<=0&&t.current_progress_pre_discount<=0&&t.gifts_awarded<=0,r=!!t.complete_and_removed&&t.gifts_awarded<=0;return!e&&!r}))},goalVisibilityHasChanged:function(){if(!O)return!1;var t=S.reduce((function(t,e){return t.push(e.id),t}),[]),e=!1;return u.default.getGoalsData().giftGoals.forEach((function(r){r.comparing!==i.A.DISCOUNT&&(e||(!t.length||r.comparing===v)&&(r.filter_type?r.current_progress<=0&&r.current_progress_pre_discount<=0&&r.gifts_awarded<=0||r.complete_and_removed?t.includes(r.id)&&(e=!0):t.includes(r.id)||(e=!0):r.complete_and_removed?t.includes(r.id)&&(e=!0):t.includes(r.id)||(e=!0)))})),e},emitWidgetUpdatedEvent:function(){var t=new Event("docapp-free-gift-progress-updated");document.body.dispatchEvent(t)}}},14956:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>m});var n=r(84659),i=r(18335),o=r(45345);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){var n;return n=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==a(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d="docapp-free-gift-goals",s={giftGoals:[],useDraftOrders:!1,excludedProductIds:[],includedProductIds:[],giftGoalsIgnoreDiscounts:!1},p=u({},s);function f(){var t=(0,n.mI)(d);if(t){var e=JSON.parse(t);e&&((p=u(u({},p),e)).giftGoals=p.giftGoals.map((function(t){return t.goal_type===i.A.GIFT&&(t._ignoreDiscounts=!!p.giftGoalsIgnoreDiscounts),t})))}}f();const m={getGoalsData:function(){return p},setGoalsData:function(t){p=u(u({},p),{},{giftGoals:t.map((function(t){if(t.goal_type===i.A.GIFT&&(t._ignoreDiscounts=!!p.giftGoalsIgnoreDiscounts),t.goal_type!==i.A.DISCOUNT)return t;var e=p.giftGoals.find((function(e){return e.id===t.id}));return e&&(t.is_applied=e.is_applied),t}))}),this.saveGoalsData()},saveGoalsData:function(){(0,n.i_)(d,JSON.stringify(p))},clearGoalsData:function(){p=u({},s),(0,n._y)(d)},populateGoalsDataFromOptions:function(t){p.useDraftOrders=!!t.use_draft_orders,p.excludedProductIds=(0,o.X)(t.excluded_product_ids),p.includedProductIds=(0,o.X)(t.included_product_ids),p.giftGoalsIgnoreDiscounts=!!t.gift_goals_ignore_discounts,this.setGoalsData(t.gift_goals||[])},_populateDataFromStorage:function(){f()}}},49646:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var n=r(91569);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}const o={cartIsIncompatibleWithDraftOrders:function(t){return!(!(t=t||(0,n.getLastCartResponse)())||!t.items)&&(!!this.rechargeAppLegacySubscriptionPresent()||t.items.some((function(t){var e,r;return!(null===(e=t.properties)||void 0===e||!e.shipping_interval_frequency)||(!(null===(r=t.selling_plan_allocation)||void 0===r||!r.selling_plan)||!!t.has_components)})))},shouldBeDisabledForRecharge:function(t){var e;return!(null===(e=window.freeGiftCartUpsellProApp)||void 0===e||!e.disabledForReCharge)&&(!!this.rechargeAppLegacySubscriptionPresent()||!(!(t=t||(0,n.getLastCartResponse)())||!t.items)&&t.items.some((function(t){var e,r;return!(null===(e=t.properties)||void 0===e||!e.shipping_interval_frequency)||!(null===(r=t.selling_plan_allocation)||void 0===r||null===(r=r.selling_plan)||void 0===r||!r.recurring_deliveries)})))},rechargeAppLegacySubscriptionPresent:function(){return"object"===i(window.ReCharge)&&"object"===i(window.ReCharge.cart_options)&&window.ReCharge.cart_options.has_subscriptions},shippingProtectionAppIsPresent:function(){return"object"===("undefined"==typeof shipping_insurance_variants?"undefined":i(shipping_insurance_variants))&&shipping_insurance_variants.length>0}}},73573:(t,e,r)=>{"use strict";r.d(e,{D1:()=>s,H7:()=>f,_l:()=>p});r(69459);var n=r(64640),i=r(84659),o="docapp-free-gift-test",a=(0,i.mI)(o);a||(0,i.mI)(n.ww)&&(a=JSON.stringify({active:!0,installationId:null}));var c=new URLSearchParams(window.location.search),u=c.get(o),l=c.get("docapp-free-gift-inst-test"),d={active:!1,installationId:null};"1"===u?(d.active=!0,d.installationId=l||null,(0,i.i_)(o,JSON.stringify(d))):"0"===u?(d.active=!1,d.installationId=null,(0,i.i_)(o,JSON.stringify(d))):window.Shopify&&window.Shopify.designMode?(d.active=!0,(0,i.i_)(o,JSON.stringify(d))):a&&(d=JSON.parse(a));var s=function(){return d.active},p=function(){return s()?d.installationId:null},f=function(){document.querySelectorAll(".docapp-replaces").forEach((function(t){t.style.setProperty("display","")})),document.querySelectorAll(".docapp-free-gift-progress").forEach((function(t){t.style.setProperty("display","none","important")}))}},96749:(t,e,r)=>{"use strict";r.d(e,{A:()=>D});var n=r(69459),i=r(91569),o=r(95333);r(47846);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}var c="/account/",u=["/cart/add","/cart/update","/cart/change","/cart/clear","/api/variant-id-checker-api-march"],l=["/discount/","/checkout?discount="],d=["/discount/get_cart_details","/cart-discount/","/apps/","SD_CLEAR_DISCOUNT","_tbn_ignored","/api/"],s=!1,p=!1,f={},m={},g=null,h=null,_=null,y=!0,v=!1,w=!1,b=window.__docappRequestInterceptor||{onCartChange:function(t,e){f[t]=e},onDiscountApplied:function(t,e){m[t]=e},start:function(){!function(){if(s)return!1;s=!0,P(),window.fetch&&T();k(),setTimeout(k,2e3),window.docappDisableOnClickCartTracker||function(){return location.pathname.includes(c)}()||document.addEventListener("click",(function(){!window.docappDisableOnClickCartTracker&&y&&(_=setTimeout(q,1e3))}));setTimeout((function(){return v=!0}),3e3),O(),setTimeout((function(){return O()}),4e3)}()},check:function(){},runCartChange:function(t){Object.keys(f).forEach((function(e){return f[e](t)}))}};function C(t,e){!v||window.Fondue||window.FGSECOMAPP||(y=!1);var r=t[1],i=t[0]||"GET";(0,n.M)("#### onLoad ####",{path:r,method:i}),A(r,i)&&(w=!1,q())}function S(t){if(!Object.keys(m).length||!t)return!1;var e,r=l.find((function(e){return t.includes(e)})),n=d.find((function(e){return t.includes(e)}));if(!r||n)return!1;if(t.includes("/checkout")&&t.includes("?")){var i=t.split("?")[1];e=new URLSearchParams(i).get("discount")}else{var a=t.split(r).pop();a=a.split("?")[0],e=(0,o.decodeDiscount)(a)}return!!(e&&e.trim().length>0)&&(function(t){var e=Object.keys(m);if(!e.length)return!1;g&&(clearTimeout(g),g=null);var r=function(){return e.forEach((function(e){return m[e](t)}))};g=setTimeout(r,25)}(e),!0)}function A(t,e){if(!Object.keys(f).length||!t)return!1;var r=d.find((function(e){return t.includes(e)}));return(u.find((function(e){return t.includes(e)}))||t.includes("/cart.html")&&e&&"POST"===e.toUpperCase())&&!r}function E(t,e){var r=d.find((function(e){return t.includes(e)}));if(!(u.find((function(e){return t.includes(e)}))||t.includes("/cart.html")&&e&&"POST"===e.toUpperCase())||r)return!1;var i=new Event("docapp-cart-change");return document.body.dispatchEvent(i),w=!0,setTimeout((function(){w&&((0,n.M)("#### MISSING LOAD EVENT VERIFICATION FIRED ####"),w=!1,q())}),1e3),!0}function q(){_&&(clearTimeout(_),_=null);var t=Object.keys(f);if(t.length){h&&(clearTimeout(h),h=null);h=setTimeout((function(){return(0,i.getCart)(null,(function(e){return t.forEach((function(t){return f[t](e)}))}))}),25)}}function P(){var t=XMLHttpRequest.prototype.open;XMLHttpRequest.callbacks||(XMLHttpRequest.callbacks=[]),XMLHttpRequest.prototype.open=function(){try{if(!this.isDocappHandledRequest){var e=arguments;setTimeout((function(){return function(t){var e=t[1],r=t[0]||"GET";(0,n.M)("#### onOpen ####",{path:e,method:r}),E(e,r),S(e)}(e)}),1)}}catch(t){console.error("Error during XMLHttpRequest.prototype.open handler!",t)}return this.isDocappHandledRequest||this.addEventListener("load",C.bind(window,arguments,this)),this.isDocappHandledRequest=!0,t.apply(this,arguments)}}function T(){var t=window.fetch;window.fetch=function(){var e=arguments;try{var r=arguments;setTimeout((function(){return function(t){var e,r;"string"==typeof t[0]?(E(e=t[0],r="object"===a(t[1])&&"string"==typeof t[1].method?t[1].method:"GET"),S(e)):"object"===a(t[0])&&t[0].url&&(E(e=t[0].url,r=t[0].method||"GET"),S(e)),(0,n.M)("#### onFetch ####",{path:e,method:r})}(r)}),1)}catch(t){console.error("Error during fetch call handler!",t)}var i=t.apply(window,arguments);return i.then((function(t){try{var r=e;t.clone();setTimeout((function(){return function(t,e){var r,i;!v||window.Fondue||window.FGSECOMAPP||(y=!1),"string"==typeof t[0]?A(r=t[0],i="object"===a(t[1])&&"string"==typeof t[1].method?t[1].method:"GET")&&(w=!1,q()):"object"===a(t[0])&&t[0].url&&A(r=t[0].url,i=t[0].method||"GET")&&(w=!1,q()),(0,n.M)("#### onFetchResponse ####",{path:r,method:i})}(r)}),1)}catch(t){console.error("Error during onFetchResponse handler!",t)}})),i}}function k(){p||"function"==typeof $&&"function"==typeof $.ajaxSetup&&(p=!0,$.ajaxSetup({beforeSend:function(t,e){A(e.url,e.type)&&t.then(q)}}))}function O(){document.querySelectorAll('form[action*="/account"], form[action*="/localization"]').forEach((function(t){t.addEventListener("click",(function(){y=!1}),{capture:!0})}))}window.__docappRequestInterceptor=b;const D=b},92173:(t,e,r)=>{"use strict";r.d(e,{Ri:()=>o,TV:()=>i});var n=r(95333);var i=function(t,e,r){var n="";if(r){var i=new Date;-1!==r?i.setTime(i.getTime()+24*r*60*60*1e3):i.setTime(i.getTime()+5),n="expires="+i.toUTCString()}document.cookie=t+"="+encodeURIComponent(e)+";"+n+";path=/"},o=function(t){var e="discount_code"===t,r=t+"=",i="";try{i=e?document.cookie:decodeURIComponent(document.cookie)}catch(t){return console.error("decodeURIComponent failed due to invalid cookies!"),null}for(var o=i.split(";"),a=0;a<o.length;a++){for(var c=o[a];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(r)){var u=c.substring(r.length,c.length);return e?(0,n.decodeDiscountCookie)(u):u}}return null}},83777:(t,e,r)=>{"use strict";r.d(e,{Cu:()=>i,D_:()=>o});var n=r(65606),i=n&&{NODE_ENV:"production",TEST_APP_URL:"https://dawid.ngrok.io/",SHOPIFY_APP_PROXY_PATH:"free-gift-cart-upsell-pro"}&&!1,o="/apps/"+(null===n||void 0===n||null===(n={NODE_ENV:"production",TEST_APP_URL:"https://dawid.ngrok.io/",SHOPIFY_APP_PROXY_PATH:"free-gift-cart-upsell-pro"})||void 0===n?void 0:n.SHOPIFY_APP_PROXY_PATH)+"/"},69459:(t,e,r)=>{"use strict";r.d(e,{M:()=>l,c:()=>d});var n=r(83777),i=r(84659),o=new URLSearchParams(window.location.search).has("docapp-test-log");o&&(0,i.i_)("docapp-test-log","1");var a=o||n.Cu||"1"===(0,i.mI)("docapp-test-log"),c="",u=window["docapp-start"]||(new Date).getTime(),l=function(t,e){if(a){var r=c+t+" ms: "+((new Date).getTime()-u);e?console.log(r,e):console.log(r)}},d=function(t){c=t}},10827:(t,e,r)=>{"use strict";r.d(e,{E:()=>i});var n=r(69459),i=function t(e,r,i,o,a,c,u,l,d){window.Shopify&&window.Shopify.routes&&window.Shopify.routes.root&&window.Shopify.routes.root.length>1&&-1===e.indexOf(window.Shopify.routes.root)&&(e=window.Shopify.routes.root+("/"===e.charAt(0)?e.substring(1):e)),(0,n.M)("API CALL: "+e),u=void 0===u||u,l=void 0===l?u:l,o=o||"GET",a=a||null,d=d||0;var s=new XMLHttpRequest;s.isDocappHandledRequest=!0,s._url=e,s.open(o,e,!0),c&&c.forEach((function(t){s.setRequestHeader(t.name,t.value)})),u?(s.setRequestHeader("Content-Type","application/json"),l&&s.setRequestHeader("Accept","application/json,text/plain")):(s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9")),s.onload=function(){var n=s.status,p=s.response;if(n>=400){if(console.error("Failed to load request, status: "+n),405===n&&"GET"!==o.toUpperCase()&&d<3)return void t(e,r,i,o,a,c,u,l,d+1);i(p,n)}else l&&"string"==typeof s.response&&(p=JSON.parse(s.response)),r(p,n)},s.send(a),s.onerror=function(){console.error("Failed to load request"),i(null,503)}}},16222:(t,e,r)=>{"use strict";r.d(e,{F:()=>o,a:()=>i});var n=r(83777),i=function(t){var e=document.head,r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=t+(n.Cu?(t.includes("?")?"&":"?")+"cb="+Math.random():""),e.appendChild(r)},o=function(t){var e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)}},93894:(t,e,r)=>{"use strict";r.d(e,{A:()=>f});var n=r(42800),i=r(54522),o=r(65149);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e,r){var n;return n=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==a(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u={},l={};function d(t){var e;return"Gift"===t.product_type||(null===(e=t.handle)||void 0===e?void 0:e.includes("docapp-free-gift"))}var s=r(91569),p=r(96749);const f={generateCartItemChanges:function(t,e){var r=function(t,e){var r={};return t.items=t.items.filter((function(t){return!d(t)||(!!function(t,e){if(!t.properties||!t.properties[n.default.GIFT_ID])return!1;return function(t,e){return!!e.find((function(e){return e.id===t.properties[n.default.GIFT_ID]}))}(t,e)}(t,e)||(r[t.key]=0,!1))})),r}(t,e);return function(t,e,r){var a=[],s=[];if(e.forEach((function(e){var p=function(t,e){return t.items.filter((function(t){return!!d(t)&&t.properties[n.default.GIFT_ID]===e.id}))}(t,e),f=p.reduce((function(t,e){return t+e.quantity}),0);f+=(0,o.getDeclinedGiftsQuantity)(e),e.gifts_awarded!==f&&(e.reward_handling_type===i.RewardHandlingType.AUTOMATIC?function(t,e,r,i){(function(t){u={},l={},t.forEach((function(t){u[t.product_id]||(u[t.product_id]=0,l[t.product_id]=c({},t.variant_id,0)),l[t.product_id][t.variant_id]||(l[t.product_id][t.variant_id]=0),u[t.product_id]+=t.quantity,l[t.product_id][t.variant_id]+=t.quantity}))})(t),e.free_gifts.forEach((function(t){var a=t.product_id,d=t.quantity*e.times_awarded,s=(u[a]||0)+(0,o.getDeclinedGiftsQuantity)(e,a);d>s?function(t,e,r,i,o,a){var u,d=e.variant_id,s=(null===(u=l[e.product_id])||void 0===u?void 0:u[d])||0,p=r-i;s>0?o[d]=p+s:a.push({id:Number(d),quantity:p,properties:c({},n.default.GIFT_ID,t.id)})}(e,t,d,s,r,i):d<s&&function(t,e,r,n){var i=Object.keys(l[t]),o=e;i.forEach((function(e){if(o!==r)if(o<r)console.error("More items removed than expected!");else{var i=l[t][e],a=o-r,c=Math.min(i,a);o-=c,n[e]=i-c}}))}(a,s,d,r)}))}(p,e,r,a):function(t,e,r,n,i){t.gifts_awarded<e?r.forEach((function(r){e=function(t,e,r,n){if(t===e.gifts_awarded)return t;if(r.final_price>=101)return t;var i=Math.min(t-e.gifts_awarded,r.quantity);return n[r.key]=r.quantity-i,t-i}(e,t,r,n)})):i.push({quantity:t.gifts_awarded-e,totalAwardedQuantity:t.gifts_awarded,previouslyDeclinedQuantity:(0,o.getDeclinedGiftsQuantity)(t),products:t.free_gifts,goalId:t.id})}(e,f,p,r,s))})),!a.length&&!Object.keys(r).length&&!s.length)return null;return{additions:a,quantityChanges:r,giftChoices:s}}(t,e,r)},swapGiftVariant:function(t,e,r,i,o){var a=e.product_id,c=e.variant_id,u=t.items.find((function(t){return t.product_id&&t.product_id.toString()===a.toString()&&t.variant_id.toString()===r.id.toString()}));if(e.properties&&e.properties[n.default.GIFT_ID])!function(t,e,r,i,o){var a=t.variant_id,c=t.quantity;if(r&&r.properties[n.default.GIFT_ID]===t.properties[n.default.GIFT_ID]){var u={};return u[a]=c-i,u[e.id]=i+r.quantity,void(0,s.applyCartUpdates)(u,o)}var l=[{id:e.id,quantity:i,properties:t.properties}],d={};d[t.key]=c-i,(0,s.applyCartUpdatesWithProperties)(l,d,(function(t){o(t),p.A.runCartChange(t)}))}(e,r,u,i,o);else{var l=0;u&&(l=u.quantity);var d={};d[c]=e.quantity-i,d[r.id]=i+l,(0,s.applyCartUpdates)(d,o)}}}},65149:(t,e,r)=>{"use strict";r.r(e),r.d(e,{getDeclinedGiftsQuantity:()=>p,putDeclinedGiftsForAutomaticGoal:()=>l,putDeclinedGiftsForMultipleGoals:()=>u,removeOutdatedDeclinedGifts:()=>d,resetDeclinedGifts:()=>f});var n=r(94240),i=r(54522),o="docapp-declined-gifts",a=(0,n.LQ)(o),c=a?JSON.parse(a):[],u=function(t,e){c=c.filter((function(e){return!t.includes(e.goalId)})),s(e)},l=function(t,e,r){c=c.filter((function(r){return!(t===r.goalId&&e===r.productId)})),s(r)},d=function(t){var e=t.filter((function(t){return!t.gifts_awarded})).map((function(t){return t.id}));c=c.filter((function(t){return!e.includes(t.goalId)})),s([])},s=function(t){t.forEach((function(t){var e=t.goal,r=t.productId,n=t.declinedQuantity;if(null==e||!e.id)throw new Error("Trying to set a declined gift without providing required declinedGift.goal");if(!n)throw new Error("Trying to set a declined gift without providing required declinedGift.declinedQuantity");if(e.reward_handling_type===i.RewardHandlingType.MANUAL&&null!==r)throw new Error("productId must be null for manual choice goals");if(e.reward_handling_type===i.RewardHandlingType.AUTOMATIC&&null===r)throw new Error("productId must be set for automatic choice goals");var o=e.reward_handling_type===i.RewardHandlingType.AUTOMATIC?e.free_gifts.find((function(t){var e;return(null===(e=t.product_id)||void 0===e?void 0:e.toString())===(null==r?void 0:r.toString())})).quantity*e.times_awarded:e.gifts_awarded;n>o&&console.error("Free gift app. Bad scenario detected during decline action. declinedQuantity > awardedQuantity"),o>0&&c.push({goalId:e.id,productId:r,declinedQuantity:Math.min(n,o),awardedQuantity:o})})),c.length?(0,n.Fn)(o,JSON.stringify(c)):(0,n.n9)(o)},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return c.filter((function(r){var n;return r.goalId===t.id&&(!e||(null===(n=r.productId)||void 0===n?void 0:n.toString())===e.toString())})).reduce((function(e,r){var n=r.productId,i=r.declinedQuantity,o=r.awardedQuantity;i>o&&console.error("Free gift app. Bad scenario detected during calculation. declinedQuantity > awardedQuantity");var a=Math.max(0,o-i),c=null!==n?t.free_gifts.find((function(t){var e;return(null===(e=t.product_id)||void 0===e?void 0:e.toString())===(null==n?void 0:n.toString())})).quantity*t.times_awarded:t.gifts_awarded;return c>=o?e+Math.min(i,o):e+Math.max(0,c-a)}),0)},f=function(){c=[],(0,n.n9)(o)}},1048:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>x});var n,i,o,a=r(69459),c=r(91569),u=r(16283),l=r(18263),d=r(95333),s=r(55882),p=r(93894),f=r(14956),m=r(54522),g=r(5613),h=r(65149),_=r(42800),y='<div class="docapp-variant-options-trigger">{LABEL}</div>',v='<div class="docapp-variant-options"><div class="docapp-variant-options-selects docapp-contains-options-{COUNT}">{OPTIONS}</div><div class="docapp-variant-options-bottom"><div class="docapp-variant-options-button"><button class="btn bttn button button-primary Button Button--primary">{LABEL}</button></div><div class="docapp-variant-options-image"></div></div></div>',w=null,b="Select options",C="Save",S="Sold out!",A="Items to change",E=!0,q=[".cart__info .cart__qty",".product-image img",".upcart-product-item > .Stack:first-child > .Stack__item:first-child > div:first-child",".cart__item__info .cart__item__meta",".line-item__info .quantity-selector.quantity-selector--small",".t4s-mini_cart__meta",".t4s-cart_meta_prices",".line-item-details .line-item-options","a.embed-responsive","ul + footer","section ul + p.stock",".cart__image .image-element__wrap"].join(","),P=[".line-item__image-wrapper div",".product-image",".cart__image",".go-cart-item__price",".gt_product-img--inner",".gt_item_detail .gt_variant_product",".cart-item__image-container",".cart__item--image .image-wrap","li .item-image",".icartProductContainer .icart-item-content > div:last-child",".icart-pg-item-img .icart-pg-item-detail > *:last-child",".rimage-outer-wrapper",".cart--item--image a",".ajax-item-meta .ajax-price-container",".icart-item-content > span:last-child",".cart__product-image-wrap .cart__product-image",".sf-cart__item-product-image",".ajax-cart__item-image__wrapper",".card__img--container .card__img--ratio",".cart__items__image a div.overflow-hidden",".cart__item--image .image-element__wrap"].join(",");const T={injectVariantSelectionTriggers:function(t){var e=this;t&&(E=t.variant_change_enabled,b=t.variant_change_trigger_label||b,C=t.variant_change_save_button_text||C,S=t.variant_change_sold_out_text||S,A=t.variant_change_quantity_label||A),E&&x.runWithGiftVariantsData((function(t){w=t,e.removeTriggersFromInvalidCartItems(),e.injectTriggersIntoKnownCartItems()}))},removeTriggersFromInvalidCartItems:function(){document.querySelectorAll("[docapp-data-trigger]").forEach((function(t){var e=t.closest("[docapp-data-cart-item]");e&&t.getAttribute("docapp-data-trigger")===e.getAttribute("docapp-data-cart-item")||t.remove()}))},injectTriggersIntoKnownCartItems:function(){var t=this;document.querySelectorAll("[docapp-data-cart-item]").forEach((function(e){var r=e.getAttribute("docapp-data-cart-item").split("-"),n=r[0],i=r[1],o=w[n],u=o&&o.variants.length>1,l=f.default.getGoalsData().giftGoals,d=null;l.find((function(t){var e;return!!t&&(t.reward_handling_type===m.RewardHandlingType.MANUAL||(null===(e=t.free_gifts)||void 0===e?void 0:e.length)>1||!!t.enable_gift_removable)}))&&(d=l.find((function(t){return!!t.free_gifts.find((function(t){var e;return(null===(e=t.product_id)||void 0===e?void 0:e.toString())===(null==n?void 0:n.toString())}))&&!!(0,c.getLastCartResponse)().items.find((function(e){var r,i;return(null===(r=e.product_id)||void 0===r?void 0:r.toString())===(null==n?void 0:n.toString())&&t.id===(null===(i=e.properties)||void 0===i?void 0:i[_.default.GIFT_ID])}))})));var s=d&&(d.reward_handling_type===m.RewardHandlingType.MANUAL||!!d.enable_gift_removable);if((u||s)&&!e.querySelector(".docapp-variant-options-trigger")){var p=t.findProductImage(e);if(p){var g=p.parentNode;if(!g.querySelector(".docapp-variant-options-trigger")){var h=window.getComputedStyle(g);if("flex"===h.display&&"row"===h.flexDirection){var v=document.createElement("div");g.insertBefore(v,p),v.appendChild(p);var C=document.createElement("div");C.classList.add("docapp-variant-options-trigger-container"),C.setAttribute("docapp-data-trigger",e.getAttribute("docapp-data-cart-item")),C.innerHTML=y.replace("{LABEL}",b),v.appendChild(C);var S=p.getAttribute("class");S&&!S.toLowerCase().includes("lazy")&&(v.setAttribute("class",S),p.setAttribute("class",""))}else{var A=document.createElement("div");A.classList.add("docapp-variant-options-trigger-container"),A.setAttribute("docapp-data-trigger",e.getAttribute("docapp-data-cart-item")),A.innerHTML=y.replace("{LABEL}",b),g.insertBefore(A,p.nextSibling)}t.addVariantOptionsTriggerEventListener(g,n,i,d),(0,a.M)("VariantOptions: Injecting variant UI trigger")}}}}))},addVariantOptionsTriggerEventListener:function(t,e,r,u){var l=this;t.querySelector(".docapp-variant-options-trigger").addEventListener("click",(function(t){if(t.stopPropagation(),t.preventDefault(),!u||u.reward_handling_type!==m.RewardHandlingType.MANUAL&&!u.enable_gift_removable){i=e,o=r;var p=w[e].variants.find((function(t){return t.id.toString()===r})),f=w[e].options.reduce((function(t,e){var r=p?p.selectedOptions.find((function(t){return t.name.toLowerCase()===e.name.toLowerCase()})):null,n=e.values.map((function(t){var e=r&&r.value.toLowerCase()===t.toLowerCase()?"selected":"";return'<option value="'.concat(t.replace(/"/g,"&quot;"),'" ').concat(e,">").concat((0,d.toTitleCase)(t),"</option>")})).join("");return"".concat(t,"<label>\n<span>").concat((0,d.toTitleCase)(e.name),'</span> <select class="docapp-real-select" name="').concat(e.name.toLowerCase(),'" onclick="(function (e) {e.stopPropagation()})(event)" onfocus="(function (e) {e.stopPropagation()})(event)">\n').concat(n,"</select>\n</label>")}),""),g=(0,c.getLastCartResponse)().items.find((function(t){return t.product_id&&t.product_id.toString()===i&&t.variant_id.toString()===o})).quantity;if(g>1){for(var h="",_=0;_<g;_++)h+="<option>".concat(g-_,"</option>");f+="<label><span>".concat(A,'</span> <select class="docapp-real-select" name="docapp-quantity" onclick="(function (e) {e.stopPropagation()})(event)" onfocus="(function (e) {e.stopPropagation()})(event)">').concat(h,"</select></label>")}n=s.default.openModal(v.replace("{OPTIONS}",f).replace("{LABEL}",C).replace("{COUNT}",w[e].options.length)),(0,a.M)("VariantOptions: Injecting variant UI modal"),l.setVariantImage(),l.addVariantOptionsModalEventListeners()}else l.openGiftChoiceModal(e,r,u)}))},addVariantOptionsModalEventListeners:function(){var t=this;n.querySelector(".docapp-variant-options-bottom button").addEventListener("click",(function(t){t.stopPropagation(),t.preventDefault();var e=(0,c.getLastCartResponse)(),r=e.items.find((function(t){return t.product_id&&t.product_id.toString()===i&&t.variant_id.toString()===o})),u=w[i].variants.find((function(t){return 0===t.selectedOptions.filter((function(t){var e=n.querySelector('[name="'+t.name.toLowerCase()+'"]');return t.value!==e.value})).length}));if(u&&u.available||console.error("Dr. Free Gift & BOGO: Trying to select unavailable gift!"),o===u.id.toString())return(0,a.M)("VariantOptions: No change needed"),void s.default.removeModal();var l=r.quantity,d=n.querySelector('[name="docapp-quantity"]');d&&(l=parseInt(d.value)),p.A.swapGiftVariant(e,r,u,l,k)})),n.querySelectorAll(".docapp-variant-options-selects select").forEach((function(e){e.innerHTML+="",e.addEventListener("change",(function(r){r.stopPropagation(),"docapp-quantity"!==e.getAttribute("name")&&t.setVariantImage()})),e.addEventListener("click",(function(t){t.stopPropagation()})),e.addEventListener("focus",(function(t){t.stopPropagation()}),{capture:!0}),e.addEventListener("focusin",(function(t){t.stopPropagation()}),{capture:!0})}))},findProductImage:function(t){var e=t.querySelector(".docapp-free-gift-variant-select");if(e)return e;var r=t.querySelector(q)||t.querySelector(P)||t.querySelector("img"),n=r?r.querySelector(P):null;if(n&&(r=n),!r)return null;for(var i=3;i>0&&r.parentNode!==t&&(0===r.offsetHeight&&0===r.offsetWidth||"absolute"===window.getComputedStyle(r).position);)r=r.parentNode,i--;return 0===r.offsetHeight&&0===r.offsetWidth?null:("flex"===window.getComputedStyle(r.parentNode).display&&r.children.length>0&&(r=r.children[r.children.length-1]),r)},setVariantImage:function(){var t="",e=w[i].variants.find((function(t){return 0===t.selectedOptions.filter((function(t){var e=n.querySelector('[name="'+t.name.toLowerCase()+'"]');return t.value!==e.value})).length})),r=n.querySelector(".docapp-variant-options-image"),o=n.querySelector(".docapp-variant-options-bottom button");if(!e||!e.available)return r.innerHTML='<span class="docapp-variant-sold-out">'.concat(S,"</span>"),r.style.display="inline-block",void(o.disabled=!0);o.disabled=!1,e.image?(t='<img src="'.concat(e.image,'" alt="Selected variant"/>'),r.style.display="inline-block"):r.style.display="none",r.innerHTML=t},removeVariantSelectionTriggers:function(){document.querySelectorAll(".docapp-variant-options-trigger-container").forEach((function(t){return t.remove()}))},openGiftChoiceModal:function(t,e,r){var n=(0,c.getLastCartResponse)(),i=n.items.find((function(r){return r.product_id&&r.product_id.toString()===t&&r.variant_id.toString()===e})),o=i.quantity,a=r.reward_handling_type===m.RewardHandlingType.AUTOMATIC?t:null,u={quantity:o,totalAwardedQuantity:r.gifts_awarded,previouslyDeclinedQuantity:(0,h.getDeclinedGiftsQuantity)(r,a),products:r.free_gifts,goalId:r.id,replacesCartItem:i};g.A.openModal([u],n,k)}};function k(t){(0,a.M)("VariantOptions: Cart updates applied!"),u.A.updateCartState(t)?((0,c.setLastCartResponse)(t),l.A.blockWidgetGeneration()):(s.default.removeModal(),window.freeGiftCartUpsellProApp.updateWidgets(t))}var O=r(73573),D=r(10827),M=r(83777),I=null,L=[];const x={runWithGiftVariantsData:function(t){null!==I?t(I):(L.push(t),function(){!0;var t={};(0,O.D1)()&&(t["docapp-free-gift-test"]=1);(0,D.E)(M.D_+"gift-variants",(function(t){for(I=t;L.length;)L.pop()(I)}),(function(t){console.error("Error while trying to get gift variants",t)}),"POST",JSON.stringify(t))}())},injectVariantSelectionTriggers:T.injectVariantSelectionTriggers.bind(T),removeVariantSelectionTriggers:T.removeVariantSelectionTriggers.bind(T)}},95219:(t,e,r)=>{"use strict";r.r(e),r.d(e,{getAppDisabledAfterLoad:()=>A,getApplyingCartUpdates:()=>l,getCartVerificationData:()=>q,getFixingZIndex:()=>S,getGiftDomProtector:()=>o,getGiftPriceReplacer:()=>a,getGiftPromotionType:()=>b,getInactiveGifts:()=>f,getInitIntervalRef:()=>E,getInitialCheckForInactiveGiftsDone:()=>p,getInitialCheckForLiquidCartDataDone:()=>c,getIntegrationWaitSet:()=>v,getLastCartHashHandled:()=>h,getLastCartTotalPrice:()=>y,getLastDiscountHandled:()=>_,getOnCartChange:()=>g,getPopupWidget:()=>w,getProxyIpOverride:()=>m,getRedirectCart:()=>s,getShopCurrency:()=>d,getShouldWaitForDiscountApp:()=>C,getWaitingForRefresh:()=>u,setAppDisabledAfterLoad:()=>V,setApplyingCartUpdates:()=>D,setCartVerificationData:()=>J,setFixingZIndex:()=>z,setGiftDomProtector:()=>P,setGiftPriceReplacer:()=>T,setGiftPromotionType:()=>B,setInactiveGifts:()=>x,setInitIntervalRef:()=>Q,setInitialCheckForInactiveGiftsDone:()=>L,setInitialCheckForLiquidCartDataDone:()=>k,setIntegrationWaitSet:()=>H,setLastCartHashHandled:()=>N,setLastCartTotalPrice:()=>R,setLastDiscountHandled:()=>G,setOnCartChange:()=>U,setPopupWidget:()=>F,setProxyIpOverride:()=>j,setRedirectCart:()=>I,setShopCurrency:()=>M,setShouldWaitForDiscountApp:()=>W,setWaitingForRefresh:()=>O});var n=r(94240),i={giftDomProtector:null,giftPriceReplacer:null,initialCheckForLiquidCartDataDone:!1,waitingForRefresh:!1,applyingCartUpdates:!1,shopCurrency:null,redirectCart:!1,initialCheckForInactiveGiftsDone:!1,inactiveGifts:[],proxyIpOverride:null,onCartChange:null,lastCartHashHandled:null,lastDiscountHandled:null,lastCartTotalPrice:(0,n.LQ)(n.ep)||"0",integrationWaitSet:!1,popupWidget:null,giftPromotionType:"",shouldWaitForDiscountApp:!1,fixingZIndex:!1,appDisabledAfterLoad:!1,initIntervalRef:null,cartVerificationData:null},o=function(){return i.giftDomProtector},a=function(){return i.giftPriceReplacer},c=function(){return i.initialCheckForLiquidCartDataDone},u=function(){return i.waitingForRefresh},l=function(){return i.applyingCartUpdates},d=function(){return i.shopCurrency},s=function(){return i.redirectCart},p=function(){return i.initialCheckForInactiveGiftsDone},f=function(){return i.inactiveGifts},m=function(){return i.proxyIpOverride},g=function(){return i.onCartChange},h=function(){return i.lastCartHashHandled},_=function(){return i.lastDiscountHandled},y=function(){return i.lastCartTotalPrice},v=function(){return i.integrationWaitSet},w=function(){return i.popupWidget},b=function(){return i.giftPromotionType},C=function(){return i.shouldWaitForDiscountApp},S=function(){return i.fixingZIndex},A=function(){return i.appDisabledAfterLoad},E=function(){return i.initIntervalRef},q=function(){return i.cartVerificationData},P=function(t){i.giftDomProtector=t},T=function(t){i.giftPriceReplacer=t},k=function(t){i.initialCheckForLiquidCartDataDone=t},O=function(t){i.waitingForRefresh=t},D=function(t){i.applyingCartUpdates=t},M=function(t){i.shopCurrency=t},I=function(t){i.redirectCart=t},L=function(t){i.initialCheckForInactiveGiftsDone=t},x=function(t){i.inactiveGifts=t},j=function(t){i.proxyIpOverride=t},U=function(t){i.onCartChange=t},N=function(t){i.lastCartHashHandled=t},G=function(t){i.lastDiscountHandled=t},R=function(t){i.lastCartTotalPrice=t},H=function(t){i.integrationWaitSet=t},F=function(t){i.popupWidget=t},B=function(t){i.giftPromotionType=t},W=function(t){i.shouldWaitForDiscountApp=t},z=function(t){i.fixingZIndex=t},V=function(t){i.appDisabledAfterLoad=t},Q=function(t){i.initIntervalRef=t},J=function(t){i.cartVerificationData=t}},65606:t=>{var e,r,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var c,u=[],l=!1,d=-1;function s(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var t=a(s);l=!0;for(var e=u.length;e;){for(c=u,u=[];++d<e;)c&&c[d].run();d=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new f(t,e)),1!==u.length||l||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=r(69459),e=r(73573),n=r(10827),i=r(91569),o=r(16222),a=['[name="checkout"]','[href="/checkout"]','[href*="/checkout?"]','[href*="/checkout/"]','[href*=".myshopify.com/checkout"]',"#dropdown-cart button.btn-checkout",'form[action*="/checkout"] [type="submit"]',"[onclick*=window\\.location\\=\\'\\/checkout]",".docapp-checkout-button",'[name="checkout-default"]',".dynamic-checkout-cart","#dynamic-checkout-cart",".cart__dynamic-checkout-buttons",'[data-shopify="dynamic-checkout-cart"]',"button.rebuy-cart__checkout-button",".rebuy-cart__flyout-footer .rebuy-cart__flyout-actions:last-child > button.rebuy-button:first-child","button#checkout",'button[onclick*="onCheckoutClick"]',"button.buy_now_btn","#slidecarthq footer.footer button.button.full","button#cart-checkout",'[data-ocu-checkout="true"], [data-ocu-checkout="true"] + .submit-overlay','.quick-cart__buy-now[href*="/cart/"][href*=":"]',"#corner-cowi-cart-summary-card-cta-button",".shiprocket-headless button.sr-headless-checkout",'#checkout[type="submit"]','[name="checkout-route-3"]',"#qikify-stickycart-v2-app button.qsc2-checkout-button"],c=r(64640),u=!0,l=!1,d=!1,s=[];function p(r,n){var i=(0,c.zh)();if(!(i&&i.id===r.id||!r.is_active&&!(0,e._l)()||(0,e._l)()&&(0,e._l)()!==r.id.toString()))if(document.querySelector(".docapp-int-"+r.id))f(r)&&(d=!0);else{var o=function(t){var e=null,r=document.querySelectorAll(t.inject_selector_1);0===r.length&&t.inject_selector_2&&(r=document.querySelectorAll(t.inject_selector_2));var n=t.inject_selector_1.includes("giraffly_Off-Canvas");r.length>1&&n&&(r=[r.pop()]);return r.forEach((function(r){e||r.classList.toString().includes(t.div_class)||r.parentNode.querySelector("."+t.div_class)||r.closest("."+t.div_class)||(e=r)})),e}(r);if(o)f(r)&&(d=!0),function(e,r){var n,i=r.getAttribute("docapp-has-injected");(i=i||"").includes(e.div_class)||(i+="|"+e.div_class,r.setAttribute("docapp-has-injected",i));if((0,t.M)("Injected ".concat(e.div_class,", method: ").concat(e.action)),"li"===r.tagName.toLowerCase()){n=document.createElement("li");var o=document.createElement("div");o.classList.add(e.div_class),n.append(o)}else(n=document.createElement("div")).classList.add(e.div_class);switch(n.classList.add("docapp-widget"),n.classList.add("docapp-int-"+e.id),n.id="docapp-int-"+e.id,e.action){case"replace":r.parentNode.insertBefore(n,r),m(e,r)&&(d=!0);break;case"above":r.parentNode.insertBefore(n,r);break;case"below":r.parentNode.insertBefore(n,r.nextSibling)}}(r,o),l=!0;else{if(n)return;s.push(r)}}}function f(t){var e=!1;return t.replace_selector&&t.replace_selector.length>0&&t.replace_selector.split(",").forEach((function(r){r&&0!==r.trim().length&&document.querySelectorAll(r).forEach((function(r){m(t,r)&&(e=!0)}))})),e}function m(e,r){if(1===r["docapp-data-not-replaced"])return!1;if(r.classList.contains("docapp-replaces"))return!1;if(r.closest("."+e.div_class))return r["docapp-data-not-replaced"]=1,!1;var n=r.querySelector(a.join(","));return n&&!n.classList.contains("gt_button_apply_discount")||r.closest('#sticky-app-client [data-cl="mini-cart"]')&&r.querySelector("button")||r.querySelector('[type="checkbox"]')?(r["docapp-data-not-replaced"]=1,!1):(r.classList.add("docapp-replaces"),r.style.setProperty("display","none","important"),(0,t.M)("Replacing "+r.className),!0)}var g=r(29691),h=r(83777),_=null,y=function(e,r){if(e.items&&e.items.length){var i=(0,g.getCartHash)(e)+(r?"|"+r:"");if(i!==_){_=i;var o={cart:e};void 0!==r&&r&&(o.discount_code=r),(0,n.E)(h.D_+"track-cart",(function(){(0,t.M)("Cart impression tracked!")}),(function(){(0,t.M)("Error while trying to record the cart.")}),"POST",JSON.stringify(o))}}},v=r(45858),w=r(16283),b=r(68889),C=r(17057),S=r(67805),A=r(38278),E=[".ajax-cart__item-line-price",".ajax-cart__price",".ajaxcart__price",".ajaxcart__product .money",".ajaxcart__product .price",".ajaxcart_product-price",".ajaxcart .ajaxcart-right.ajax-rtinnerright",".auto-cart-item-line-price",".auto-cart-item-price",".bag-item__price",".bcpo-cart-item-line-price",".bcpo-cart-item-original-line-price",".bcpo-cart-item-original-price",".bcpo-cart-item-price",".bold_cart_item_price",".booster-cart-item-line-price",".cart--item--price",".cart--item--total",".cart--price",".cart--total",".cart-collateral .price",".cart-drawer__item-price",".cart-final-line-price",".cart-item--total",".cart-item-cost",".cart-item-price",".cart-item__price",".cart-item-quantity-edit .money",".cart-item-total",".cart-item-total-line__inner",".cart-item__original-price",".cart-item__price-current",".cart-item__price-wrapper",".cart-line-price",".cart-original-price",".cart-price",".cart-product-price",".cart-product-subtotal",".cart-product-total-price",".cart-product__price",".cart-product__total-price",".cart-sale-price--with-discount",".cart-table-line-price",".cart-table-prd-price-total",".cart-table-price",".cart-template__line-price",".cart-total-label",".cart-tot",".cart__final-price",".cart__item-price",".cart__item-total",".cart__items__total",".cart__price",".cart__price-wrapper",".cart__ptotal",".cart__punit",".cart__subtotal",".cart__table-cell--line-price",".cart__table-cell--price",".cart__total",".cart_price ins",".cart_price",".CartItem__LinePrice",".CartItem__Price",".CartItem__PriceList .Price",".cartLineItem_price",".final-price",".go-cart-item__price",".gt_total_price",".hs-original-price-total",".hs-price-total",".hulkapps-cart-item-line-price",".hulkapps-cart-item-price",".icart-product-price",".item_price",".item-price",".item-total",".item__price--final",".line__price",".line__price mark",".line-item-final-price",".line-item-total",".line-item-line-prices .line-item-final-line-price",".line-item__line-price",".line-item__price",".line-total",".main-bottom .price",".mini-cart-product-price",".mini-cart__item--content .price",".mini-cart__price-list",".minicart-prd-price",".minicart__price",".modal_price",".new_price",".pn-price-item",".pn-total-line-item",".pplr_item_line_price",".price--highlight",".price-item",".price-money",".price-quantity-flex .price",".price.converted",".price_mobile",".price_product",".price_total",".priceProduct",".price price-money bdi",".product-cart__price-value",".product-details .price",".product-details-price",".product-line-price",".product-price",".product-subtotal",".psh-Item_Price",".quick-cart__product-price-value",".right.price",".saso-cart-item-price",".saso-cart-item-line-price",".satcb-cs-item-price",".scd-item__original_line_price",".scd-item__prices",".shopify-Price-amount",".th_item_price",".theme-money",".total_current_price",".total_price_product",".total-item",".total-price-item",".tt-price",".upcart-item-price",".ws-cs-item-price","[data-cart-item-price]","[data-cart-item-regular-price]","[data-js-product-price]",'[data-label="Price"]',"[data-line-price-discounted]","[data-line-price]","[data-cart-item-original-price]",'[x-html="formatMoney(item.final_line_price)"]',"li .price","sale-price","td.column_price","td.column_total","td.total","td.pro-price .amount","td.pro-subtotal .amount",".pt-price",".eam-cc-item-price",".quantity .amount .money",".price-list .money",".cart-mini-item-prices .money",".cart__form-item-price",".column_total_sum  .money",".drawer__cart-item__totals .price",".ajaxcart__product-price",".pprice"].join(","),q=new URLSearchParams(window.location.search),P=function(e){var r=this,n=e.replace_gift_amount&&e.replace_gift_amount_pattern&&e.replace_gift_amount_pattern.length>0,o=e.replace_gift_amount_pattern,a={},c=e.gift_goals.map((function(t){var e;return(null===(e=t.free_gifts)||void 0===e?void 0:e.map((function(t){return a[t.product_id]=t.compare_at_price,t.product_id})))||[]})).flat(),u=!1;this.replaceGiftPrices=function(){if(!q.has("docapp-price-replacer-disabled")&&n&&c.length)if(u)(0,t.M)("Replacer: Already running. END.");else{u=!0;var e=(0,i.getLastCartResponse)();if(e&&e.items&&e.items.length){var o=[],a={};e.items.forEach((function(e){e.product_id&&c.toString().includes(e.product_id.toString())&&(o.push(e.variant_id),a[e.variant_id||0]=e.product_id||0,document.querySelectorAll('[docapp-data-item-price="'+e.variant_id+'"]').forEach((function(n){n.hasAttribute("docapp-data-price-replaced")||((0,t.M)("Replacer: Replacing gift price near custom-marked quantity input"),r.replacePriceWithCustomFormat(n,e.product_id),n.setAttribute("docapp-data-price-replaced","true"))})))})),document.querySelectorAll("[docapp-data-cart-item]").forEach((function(t){var e;if(!t.querySelector(".docapp-free-gift-cart-price")){var n=t.querySelectorAll(E);if(n.length){var i=null===(e=t.getAttribute("docapp-data-cart-item"))||void 0===e?void 0:e.split("-")[0];n.forEach((function(t){return r.attemptToReplacePriceInElement(t,i)}))}}})),document.querySelectorAll(C.Ri).forEach((function(e){if(!e.hasAttribute("docapp-data-price-replaced")){var n=(0,g.getQuantityInputVariantId)(e);if(n){for(var i in o)if(n.toString().includes(o[i]))return(0,t.M)("Replacer: Replacing gift price near quantity input"),r.replacePriceNearElement(a[o[i]]||0,e),void e.setAttribute("docapp-data-price-replaced","true");e.setAttribute("docapp-data-price-replaced","true")}}})),u=!1}else u=!1}},this.replacePriceNearElement=function(t,e,n,i){if(n=n||e,!((i=i||0)>5||e.querySelector(".docapp-free-gift-cart-price"))){var o=e.querySelectorAll(E);o.length?o.forEach((function(e){return r.attemptToReplacePriceInElement(e,t)})):r.replacePriceNearElement(t,e.parentNode,n,i+1)}},this.attemptToReplacePriceInElement=function(t,e){var n,i=t.querySelector(".money:not(:empty), .price:not(:empty), .jsPrice:not(:empty), .theme-money:not(:empty), .transcy-money:not(:empty)");i&&(t=i),null===(n=t.querySelector("span.sr-only"))||void 0===n||n.remove();var o=t.querySelector("span:not(:empty)");o&&(t=o);var a=t.textContent.trim();a.split(" ").find((function(t){return t.match(/[^0-9.,\s]{5,}/)}))||0===(0,S.extractAmount)(a)&&r.replacePriceWithCustomFormat(t,e)},this.replacePriceWithCustomFormat=function(t,e){var r=document.createElement(t.nodeName);t.classList.forEach((function(t){"price"!==t&&"money"!==t&&"jsPrice"!==t&&"theme-money"!==t&&r.classList.add(t)})),r.classList.add("docapp-free-gift-cart-price");var n=o;if(o.includes("[[amount]]")){var i=(0,S.formatAmount)(0,(0,A.getMoneyFormat)(),(0,A.getCurrencyName)());n=n.replace(/\[\[amount]]/g,i)}if(o.includes("[[compare_amount]]")&&e&&a[e]){var c=(0,S.formatAmount)(Math.round(100*a[e]),(0,A.getMoneyFormat)(),(0,A.getCurrencyName)());n=n.replace(/\[\[compare_amount]]/g,c)}r.innerHTML=n,t.parentNode&&t.parentNode.replaceChild(r,t)}},T=r(18263),k=r(14956),O=r(84659),D=r(1048),M=r(18335);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function L(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t,e,r){var n;return n=function(t,e){if("object"!=I(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==I(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var j="docapp-location",U=null,N=(0,O.mI)(j);if(N){var G=JSON.parse(N);if(G){var R=new Date;G&&G.timestamp&&(R-new Date(G.timestamp))/1e3/60>10?(0,O._y)(j):U=G}}var H=function(){return U},F=function(t){var e=U?U.timestamp:new Date;U=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?L(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({userLocation:U?U.userLocation:null,userIp:U?U.userIp:null,timestamp:e},t),(0,O.i_)(j,JSON.stringify(U))},B=function(){try{var t=window.ShopifyAnalytics.meta.page.customerId;if(null!=t&&""!==t)return t}catch(t){}try{var e=window.meta.page.customerId;if(null!=e&&""!==e)return e}catch(t){}try{var r=window.__st.cid;if(null!=r&&""!==r)return r}catch(t){}return null};function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}var z=function(t,e){if(!t&&!e)return!0;if(!t||!e)return!1;if(t.length&&!e.length)return!1;if(!t.length&&e.length)return!1;if(t.length&&e.length&&t.length!==e.length)return!1;var r=!0;return Object.keys(t).forEach((function(n){V(t[n],e[n])&&V(e[n],t[n])||(r=!1)})),r};function V(t,e){return!t&&!e||!(!t||!e)&&("object"===W(t)?z(t,e):t.toString().trim()===e.toString().trim())}function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function J(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function X(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J(Object(r),!0).forEach((function(e){K(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function K(t,e,r){var n;return n=function(t,e){if("object"!=Q(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Q(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Z=function(t){var e,r,n=(e="",document.querySelectorAll('textarea[name="note"]').forEach((function(t){e||t.value&&t.value.trim().length>0&&(e=t.value.trim())})),e),o=(r={},document.querySelectorAll('[name*="attributes["]').forEach((function(t){if(t.name&&t.value&&("boolean"!=typeof t.checked||t.checked)){var e=t.name.replace("attributes[","").replace("]","");r[e]=t.value}})),r);(n||Object.keys(o).length)&&(t.note===n&&z(o,t.attributes)||(t.note=n,t.attributes=X(X({},t.attributes),o),(0,i.applyCartUpdatesWithoutReProcessing)({note:n,attributes:o})))};var Y=r(49646);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function tt(t){return function(t){if(Array.isArray(t))return et(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var rt=new URLSearchParams(window.location.search),nt=!0,it=!1,ot=!1,at=!1,ct=!1,ut=!0,lt=null;const dt={interceptCheckoutActions:function(){var e=this,r=!1;if((window.bndlr&&window.bndlr.getCheckoutInfo||window.lbUpsell&&window.lbUpsell.isInitialized||window.upcartSettings)&&(r=!0),!it&&(r||window.docappUseAggressiveCheckoutBlocker)){it=!0;var n=function(t){t.target&&t.target.getAttribute("docapp-data-free-gift-handling")&&e.handleCheckoutAction(t)};window.addEventListener("click",n,{capture:!0}),window.addEventListener("mousedown",n,{capture:!0}),window.docappSkipTouchstartCheckoutEvent||window.addEventListener("touchstart",n,{capture:!0})}document.querySelectorAll([].concat(tt(a),["[docapp-data-free-gift-handling]"]).join(",")).forEach((function(r){var n;r.dataDocappFreeGiftHandling||(r.onclick&&r.onclick.toString().includes("ShippingCalendar.init")?r.dataDocappFreeGiftHandling=!0:r.classList.contains("Button--disable")&&document.querySelector("#ShippingCalendarWrapper")||(r.getAttribute("docapp-data-ignore")||r.getAttribute("data-docapp-ignore")?r.dataDocappFreeGiftHandling=!0:"a"===r.tagName.toLowerCase()&&null!==(n=r.getAttribute("href"))&&void 0!==n&&n.includes("/cart")?r.dataDocappVolumeDiscountHandling=!0:(r.addEventListener("click",e.handleCheckoutAction.bind(e),{capture:!0}),window.docappSkipTouchstartCheckoutEvent||r.addEventListener("touchstart",e.handleCheckoutAction.bind(e),{capture:!0}),r.addEventListener("mousedown",e.handleCheckoutAction.bind(e),{capture:!0}),r.addEventListener("submit",e.handleCheckoutAction.bind(e),{capture:!0}),r.setAttribute("docapp-data-free-gift-handling","true"),r.dataDocappFreeGiftHandling=!0,(0,t.M)("CHECKOUT: Checkout action override set up!"))))})),ot||(ot=!0,window.addEventListener("selleasy-checkout-popup-completed",(function(t){var r,n;if(at){document.body.dispatchEvent(new CustomEvent("docapp-checkout-start")),document.body.style.setProperty("cursor","wait","important");var o=null===(r=t.detail)||void 0===r||null===(r=r.discount)||void 0===r?void 0:r.code;o&&null!==(n=window.discountOnCartProApp)&&void 0!==n&&n.applyCodeAndCheckout?window.discountOnCartProApp.applyCodeAndCheckout(o):(0,i.getCart)(null,(function(t){return e.goToCheckout(t)}))}})))},handleCheckoutAction:function(e){var r,n,o=this;if(ut){if(nt&&(e.target.classList.contains("docapp-blocked-checkout")||e.target.closest(".docapp-blocked-checkout")))return(0,t.M)("CHECKOUT: "+e.type+" captured on blocked button!"),e.stopImmediatePropagation(),void e.preventDefault();(0,t.M)("CHECKOUT: Start handling Checkout event "+e.type);var a=(0,i.getLastCartResponse)()||window.docappCart;if(a&&a.items){var c=k.default.getGoalsData(),u=c.useDraftOrders,l=c.giftGoals,d=[];if(l.forEach((function(t){t.goal_type===M.A.GIFT&&t.free_gifts.forEach((function(t){return d.push(t.product_id)}))})),a.items.some((function(t){var e,r;return d.includes(null===(e=t.product_id)||void 0===e?void 0:e.toString())||(null===(r=t.handle)||void 0===r?void 0:r.includes("docapp-free-gift"))}))){if(nt&&this.blockCartChangeElements()){var s=Date.now()+8e3;lt=setTimeout((function(){return o.unblockPageAfterCheckoutLoaded(s)}),1e3)}if(!window.pplr_draftorder&&!(window.bcpo&&window.bcpo.addedCartEvent&&!0===window.bcpo.addedCartEvent||window.zakekeProductAdvancedProcessingDraftOrder))if(window.zakekeProductAdvancedProcessing)console.error("Free Gift On Cart app cannot create a draft order! Please ensure that Zakeke product customization app is used in Draft Order mode!");else if(!(window.BSS_PO&&window.BSS_PO.enable&&window.bssProductOptionsPrices&&Object.keys(window.bssProductOptionsPrices).length>1&&!1!==window.bssCreateDraftOrder||window.hulkapps&&window.hulkapps.discounts&&window.hulkapps.discounts.is_draft_order)){if(window.Zapiet&&window.ZapietWidgetConfig&&window.ZapietWidgetConfig.shop_identifier&&document.querySelector("#storePickupApp:not(:empty)")&&window.Zapiet.Widget&&"function"==typeof window.Zapiet.Widget.checkoutEnabled&&!window.Zapiet.Widget.checkoutEnabled())return e.preventDefault(),this.unBlockCheckoutButtons(),this.unBlockCartChangeElements(),void(0,t.M)("CHECKOUT: Zapiet says checkout is not ready. STOP!");if(window.trynowEnabled&&"object"===$(window.TryNowComponents)&&console.error("Free Gift On Cart Warning: TryNow app detected! Free Gift On Cart's draft order functionality will collide with TryNow products whenever they are in the cart."),!document.querySelector('[name*="attributes[Terms"]:not(:checked)')||document.querySelector('[name*="attributes[Terms"]:checked'))if(!document.querySelector('#CartTermsDrawer[type="checkbox"]:not(:checked)')||document.querySelector('#CartTermsDrawer[type="checkbox"]:checked'))if(!document.querySelector('#cart_agree[type="checkbox"]:not(:checked)')||document.querySelector('#cart_agree[type="checkbox"]:checked'))if(!document.querySelector('[type="checkbox"][name="agree_terms"]:not(:checked)')||document.querySelector('[type="checkbox"][name="agree_terms"]:checked'))if(!document.querySelector('.rale-checkbox [type="checkbox"][id*="rale-"]:not(:checked)')||document.querySelector('.rale-checkbox [type="checkbox"][id*="rale-"]:checked'))if(!document.querySelector('#CartTerms[type="checkbox"]:not(:checked)')||document.querySelector('#CartTerms[type="checkbox"]:checked')){if(null!==(r=window.otDDSettings)&&void 0!==r&&r.required_enable&&""===(null===(n=document.querySelector("#ot-datepicker[required]"))||void 0===n?void 0:n.value))return e.preventDefault(),e.stopImmediatePropagation(),void(0,t.M)("CHECKOUT: Omega app required delivery date is not selected. STOP!");if(u&&!Y.A.cartIsIncompatibleWithDraftOrders(a))if(e.preventDefault(),e.stopImmediatePropagation(),e.target.disabled)(0,t.M)("CHECKOUT: SKIP Disabled Checkout element event "+e.type);else if(st()||(e.target.disabled=!0,e.target.style.setProperty("cursor","wait","important"),e.target.classList.add("docapp-checkout-button-disabled")),ct)(0,t.M)("CHECKOUT: SKIP DUPLICATE Checkout event "+e.type);else{if(ct=!0,setTimeout((function(){ct=!1}),100),st()&&!at&&!document.querySelector("lb-upsell-modal, lb-upsell-addon-popup"))return at=!0,(0,t.M)("CHECKOUT: Upsell & Cross Sell ‑ Selleasy. Open the upsell and STOP."),void window.lbUpsellComponents.renderSelleasyCheckoutPopup();document.body.dispatchEvent(new CustomEvent("docapp-checkout-start")),document.body.style.setProperty("cursor","wait","important"),(0,i.getCart)(null,(function(t){return o.goToCheckout(t)}))}else(0,t.M)("CHECKOUT: Draft orders disabled, nothing else to do.")}else(0,t.M)("CHECKOUT: Terms checkbox CartTerms is not checked. STOP!");else(0,t.M)("CHECKOUT: Terms checkbox rale-checkbox is not checked. STOP!");else(0,t.M)("CHECKOUT: Terms checkbox agree_terms is not checked. STOP!");else(0,t.M)("CHECKOUT: Terms checkbox cart_agree is not checked. STOP!");else(0,t.M)("CHECKOUT: Terms checkbox drawer is not checked. STOP!");else(0,t.M)("CHECKOUT: Terms checkbox is not checked. STOP!")}}else(0,t.M)("CHECKOUT: No gift in cart, so no draft order, no checkout handling.")}else(0,t.M)("CHECKOUT: No cart, nothing to do.")}},goToCheckout:function(r){var o,a=this;(0,t.M)("CHECKOUT: Creating draft order for redirect"),Z(r);var c={cart:r||(0,i.getLastCartResponse)(),docapp_integration:(null===(o=window.discountOnCartProApp)||void 0===o?void 0:o.docappIntegration)||v.A.getDocappIntegration(),customer_id:B(),item_discounts:v.A.getItemDiscounts(),discount_codes:v.A.getAllDiscountsApplied().map((function(t){return t.title})),using_discount_app:v.A.isDiscountOnCartAppActive()};"1"===rt.get("docapp-verbose")&&(c.docapp_verbose=1);var u=H();u&&u.userIp&&(c.ip_override=u.userIp),(0,e.D1)()&&(c["docapp-free-gift-test"]=1),lt&&(clearTimeout(lt),lt=null),(0,n.E)(h.D_+"create-draft-order",(function(e){var r=e.invoice_url;"function"==typeof window.docappModifyCheckoutUrl&&(r=window.docappModifyCheckoutUrl(r)),(0,t.M)("CHECKOUT: Redirecting to "+r),r+=a.getLocaleParam(r),window.location.href=r;var n=Date.now()+5e3;setTimeout((function(){return a.unblockPageAfterCheckoutLoaded(n)}),1e3)}),(function(e){window.lastDocappDraftOrderError=e,(0,t.M)("CHECKOUT: Error while trying to create draft order",e),alert("Ops! Please refresh the page and try again. We apologize for the inconvenience.")}),"POST",JSON.stringify(c))},fixLoginAndRegisterRedirects:function(){if(rt.has("checkout_url")){var t=window.location.search;document.querySelectorAll('a[href="/account/register"]').forEach((function(e){return e.setAttribute("href","/account/register"+t)})),document.querySelectorAll('a[href="/account/login"]').forEach((function(e){return e.setAttribute("href","/account/login"+t)}));var e=document.querySelectorAll('#create_customer, form[action$="/account"][method="post"]'),r=rt.get("checkout_url");e.length&&r.includes(window.location.hostname)&&e.forEach((function(t){if(!t.querySelector('[name="return_to"]')){var e=document.createElement("input");e.setAttribute("name","return_to"),e.setAttribute("type","hidden"),e.value=r.split(window.location.hostname,2)[1],t.appendChild(e)}}))}},blockCheckoutButtons:function(){if(!st()||!document.querySelector("lb-upsell-modal, lb-upsell-addon-popup")){if(document.querySelector("input[docapp-data-protected][readonly]"))return document.querySelectorAll([].concat(tt(a),["[docapp-data-free-gift-handling]"]).join(",")).forEach((function(t){return t.classList.add("docapp-blocked-checkout")})),void(0,t.M)("CHECKOUT BLOCKED DUE TO FORM INPUT!");var e=(0,i.getLastCartResponse)()||window.docappCart;if(e&&e.items){var r=k.default.getGoalsData().giftGoals,n=[];r.forEach((function(t){t.goal_type===M.A.GIFT&&t.free_gifts.forEach((function(t){return n.push(t.product_id)}))})),e.items.some((function(t){var e,r;return n.includes(null===(e=t.product_id)||void 0===e?void 0:e.toString())||(null===(r=t.handle)||void 0===r?void 0:r.includes("docapp-free-gift"))}))?(document.querySelectorAll([].concat(tt(a),["[docapp-data-free-gift-handling]"]).join(",")).forEach((function(t){return t.classList.add("docapp-blocked-checkout")})),(0,t.M)("CHECKOUT BLOCKED!")):(0,t.M)("CHECKOUT: No gift in cart, so nothing to block.")}else(0,t.M)("CHECKOUT: No cart data/items, so cannot block.")}},unBlockCheckoutButtons:function(){document.querySelectorAll(".docapp-blocked-checkout").forEach((function(t){return t.classList.remove("docapp-blocked-checkout")})),document.querySelectorAll(".docapp-checkout-button-disabled").forEach((function(t){t.disabled=!1,t.style.removeProperty("cursor"),t.classList.remove("docapp-checkout-button-disabled")})),(0,t.M)("CHECKOUT BLOCKS REMOVED!")},blockCartChangeElements:function(){var e=!1;return document.querySelectorAll(C.TB+","+C.Ri+',a[href*="/cart/change"]').forEach((function(t){t.readOnly||(t.classList.add("docapp-blocked-cart-change"),t.readOnly=!0,e=!0)})),(0,t.M)("CART CHANGE BLOCKED!"),e},unBlockCartChangeElements:function(){document.querySelectorAll(".docapp-blocked-cart-change").forEach((function(t){t.classList.remove("docapp-blocked-cart-change"),t.readOnly=!1})),(0,t.M)("CART CHANGE BLOCKS REMOVED!")},setUseCheckoutBlocker:function(t){nt=t},getLocaleParam:function(t){var e=(t.includes("?")?"&":"?")+"locale=";return"object"===$(window.Weglot)&&"function"==typeof window.Weglot.getCurrentLang?e+window.Weglot.getCurrentLang():"object"===$(window.Shopify)&&"string"==typeof window.Shopify.locale?e+window.Shopify.locale:""},blockCheckoutHandler:function(){ut=!1},unBlockCheckoutHandler:function(){ut=!0},resetHandlingCheckoutAction:function(){ct=!1},unblockPageAfterCheckoutLoaded:function(e){var r=this;if(Date.now()<e)return(0,t.M)("Skip checkout UNBLOCK!"),void setTimeout((function(){return r.unblockPageAfterCheckoutLoaded(e)}),1e3);(0,t.M)("UNBLOCK page after checkout has loaded."),this.unBlockCheckoutButtons(),this.unBlockCartChangeElements(),document.body.style.removeProperty("cursor")}};function st(){return window.lbUpsellComponents&&window.lbUpsellComponents.isEnabled&&"function"==typeof window.lbUpsellComponents.renderSelleasyCheckoutPopup}var pt,ft=r(92173),mt='\n<svg class="docapp-free-gift-star" width="14" height="13" viewBox="0 0 14 13" fill="white" xmlns="http://www.w3.org/2000/svg">\n    <path d="M7 0L9.4687 3.60213L13.6574 4.83688L10.9944 8.29787L11.1145 12.6631L7 11.2L2.8855 12.6631L3.00556 8.29787L0.342604 4.83688L4.5313 3.60213L7 0Z"/>\n</svg>\n',gt={gift:'\n        <div class="docapp-free-gift-float-icon docapp-promo-widget-variables {CLASS}">\n            <div class="docapp-free-gift-float-x">&times;</div>\n            <div class="docapp-free-gift-float-content docapp-hidden">\n                <div class="docapp-free-gift-float-message"></div>\n                <div class="docapp-watermark" title="Dr. Free Gift & BOGO">\n                    <a href="https://apps.shopify.com/free-gift-on-cart-manager-pro" target="_blank">Powered by Dr. Free Gift <div class="docapp-watermark-image"></div></a>\n                </div>\n            </div>\n        </div>\n    ',text:'\n        <div class="docapp-free-gift-float-text docapp-promo-widget-variables {CLASS}">\n            <div class="docapp-free-gift-float-text-container">\n                '.concat(mt,'\n                <div class="docapp-free-gift-float-text-content"></div>\n                ').concat(mt,'\n            </div>\n            <div class="docapp-free-gift-float-content docapp-hidden">\n                <div class="docapp-free-gift-float-message"></div>\n                <div class="docapp-watermark" title="Dr. Free Gift & BOGO">\n                    <a href="https://apps.shopify.com/free-gift-on-cart-manager-pro" target="_blank">\n                        Powered by Dr. Free Gift <div class="docapp-watermark-image"></div>\n                    </a>\n                </div>\n            </div>\n        </div>\n    '),"text-preview":'\n        <div class="docapp-free-gift-float-text {CLASS}">\n            <div class="rotation-helper-outer">\n                <div class="rotation-helper-inner">\n                    <div class="docapp-free-gift-float-text-container">\n                        '.concat(mt,'\n                        <div class="docapp-free-gift-float-text-content"></div>\n                        ').concat(mt,'\n                    </div>\n                </div>\n            </div>\n            <div class="docapp-free-gift-float-content docapp-hidden">\n                <div class="docapp-free-gift-float-message"></div>\n            </div>\n        </div>\n    ')},ht="docapp-free-gift-float-disabled",_t=!!(0,ft.Ri)(ht),yt=null;const vt={injectFloatingAnnouncement:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!_t||r){(r=r||document.body).querySelectorAll(".docapp-free-gift-float").forEach((function(t){return t.remove()})),(pt=document.createElement("div")).classList.add("docapp-free-gift-float","docapp-widget");var i=e.gift_float_type||"gift";"text"===i&&e.is_preview&&(i="text-preview");var o=gt[i];pt.innerHTML=o.replace("{CLASS}",e.gift_float_class);var a=".docapp-free-gift-float-icon",c=null;return i.includes("text")&&(a=".docapp-free-gift-float-text",pt.querySelector(".docapp-free-gift-float-text-content").innerText=e.gift_float_text,c=pt.querySelector(".docapp-free-gift-float-text-container")),r.append(pt),(0,t.M)("injectFloatingAnnouncement - widget added to DOM"),this.addEventListeners(a,e.gift_float_position,n,c),e.gift_float_class.includes("docapp-free-gift-auto-show-contents")&&(yt&&clearTimeout(yt),yt=setTimeout((function(){return document.querySelectorAll(".docapp-free-gift-auto-show-contents").forEach((function(t){return t.classList.remove("docapp-free-gift-auto-show-contents")}))}),5e3)),pt}},addEventListeners:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".docapp-free-gift-float-icon",r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=pt.querySelector(e),a=pt.querySelector(".docapp-free-gift-float-content"),c=null!=n,u=null,l=pt.querySelector(".docapp-free-gift-float-text-container");(o.addEventListener("mouseover",(function(){if(u&&clearTimeout(u),c){if(!n.withSlider)return;n.showGiftPromotion()}if(a.classList.add("docapp-flex-column-center"),r&&"3"!==r){var t=Number(r)<3?"left":"right";l&&a.style.setProperty(t,l.offsetHeight+10+"px","important")}})),o.addEventListener("mouseleave",(function(){u=setTimeout((function(){if(c){if(!n.withSlider)return;n.hideGiftPromotion()}a.classList.remove("docapp-flex-column-center")}),1500)})),c)&&((i||o).addEventListener("click",(function(t){t.target.closest(".docapp-slider")||n.showGiftPopup()})),pt.showPopup=n.showGiftPopup);pt.querySelectorAll(".docapp-free-gift-float-x").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),o.classList.add("docapp-hidden"),t.disableFloat()})),e.addEventListener("mouseover",(function(t){t.stopPropagation(),a.classList.remove("docapp-active")}))}))},setMessage:function(t){pt.querySelectorAll(".docapp-free-gift-float-message").forEach((function(e){e.innerHTML=t}))},disableFloat:function(){_t=!0,(0,ft.TV)(ht,!0,1/24/12)}};var wt=r(6696),bt=r(65806),Ct=r(54522);function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function At(t){return function(t){if(Array.isArray(t))return Et(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Et(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(r),!0).forEach((function(e){Tt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Tt(t,e,r){return(e=Mt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mt(n.key),n)}}function Dt(t,e,r){return e&&Ot(t.prototype,e),r&&Ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mt(t){var e=function(t,e){if("object"!=St(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==St(e)?e:e+""}var It=function(t){var e=t.title,r=t.body,n=t.continueLabel,i=t.hide_branding;return'\n    <div class="docapp-promo-popup">\n        <div class="docapp-promo-popup__header">\n            <button class="docapp-promo-close">&times;</button>\n            '.concat(e?'<div class="docapp-promo-popup__header__title">'.concat(e,"</div>"):"","\n            ").concat(r?'<div class="docapp-promo-popup__header__body">'.concat(r,"</div>"):"",'\n        </div>\n        <div class="docapp-promo-offers">\n        </div>\n       ').concat(n?'<button class="docapp-promo-popup__continue">'.concat(n,"</button>"):"","\n    \n       ").concat(i?"":'<div class="docapp-watermark" title="Dr. Free Gift & BOGO"><a href="https://apps.shopify.com/free-gift-on-cart-manager-pro" target="_blank">Powered by Dr. Free Gift <div class="docapp-watermark-image"></div></a></div>'," \n    </div>\n")};function Lt(t){return t.goal_type===M.A.DISCOUNT||t.goal_type===M.A.GIFT&&t._ignoreDiscounts?t.current_progress_pre_discount:t.current_progress}function xt(t,e){var r=Lt(t),n=Lt(e),i=100*r/t.current_requires;return 100*n/e.current_requires-i}function jt(t,e){return t.current_requires-e.current_requires}var Ut=function(){return Dt((function t(e){var r=e.container,n=e.showPopup,i=e.isPreview,o=e.shopOptions;kt(this,t),r.innerHTML='\n    <button class="docapp-slider-close">&times;</button>\n    <div class="docapp-slider-slides"></div>\n    <button class="docapp-slider-arrow-button docapp-slider-left-button"></button>\n    <button class="docapp-slider-see-all-button"></button>\n    <button class="docapp-slider-arrow-button docapp-slider-right-button"></button>\n',i&&r.classList.add("docapp-slider"),this.mainContainer=r,this.sliderContainer=r.querySelector("div.docapp-slider-slides"),this.isPreview=i,this.showPopup=n,this.shopOptions=o,this.currentSlide=null,this.doInitialSlide=!1}),[{key:"_formatAmount",value:function(t){var e=(0,A.getMoneyFormat)()||this.shopOptions.money_format_pattern,r=(0,A.getCurrencyName)()||this.shopOptions.currency;return(0,S.formatAmount)(t,e,r)}},{key:"showSlider",value:function(){this.mainContainer.style.setProperty("display","block","important"),this.doInitialSlide&&this.initialSlideIndex&&(this.sliderContainer.scrollLeft+=this.sliderContainer.offsetWidth*(this.initialSlideIndex+1),this.doInitialSlide=!1)}},{key:"hideSlider",value:function(){this.mainContainer.style.display="none"}},{key:"showPreview",value:function(t){var e=k.default.getGoalsData().giftGoals.filter((function(t){return t.comparing!==wt.A.DISCOUNT})).slice().sort(jt);if(1===e.length){var r=e[0],n=r.comparing===wt.A.COUNT?r.current_requires:100;return this.render([Pt(Pt({},r),{},{current_progress:Math.floor(t*r.current_requires/n),complete:t===n})])}var i=e.map((function(t,e){return 0===e?Pt(Pt({},t),{},{current_progress:t.current_requires,current_progress_pre_discount:t.current_requires,complete:!0}):1===e?Pt(Pt({},t),{},{current_progress:Math.floor(t.current_requires/2),current_progress_pre_discount:Math.floor(t.current_requires/2)}):t}));this.render(i)}},{key:"render",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.currentSlide||(this.doInitialSlide=!0,this.currentSlide=r+1,this.initialSlideIndex=r),this.sliderContainer.innerHTML="";var n=t.length,i=this.mainContainer.querySelector(".docapp-slider-left-button"),o=this.mainContainer.querySelector(".docapp-slider-right-button"),a=function(){i.style.display="block",o.style.display="block",1===e.currentSlide&&(i.style.display="none"),e.currentSlide===n&&(o.style.display="none")};a(),t.forEach((function(r,n){var i,o=document.createElement("div");o.id="docapp-slide-".concat(n+1),o.className="docapp-slider-item ".concat(r.complete&&!r.complete_and_removed?"docapp-slider-item--completed":""," ").concat(r.complete_and_removed?"docapp-slider-item--completed-and-removed":""),o.innerHTML='\n    <div class="docapp-slider-item-info">\n        <div class="docapp-slider-item-info-text">\n            <div class="docapp-slider-item-info-text-main"></div>\n        </div>\n        <div class="docapp-slider-item-info-image">\n            <img alt="goal pic">\n        </div>\n    </div>\n    <div class="docapp-slider-item-progress">\n        <div class="docapp-slider-item-progress-bar">\n            <div class="docapp-slider-item-progress-bar-current"></div>\n        </div>\n        <div class="docapp-slider-item-progress-numbers">\n            <div class="docapp-slider-item-progress-amount">\n                🛒 <span class="docapp-slider-item-progress-amount-current"></span>/<span\n                    class="docapp-slider-item-progress-amount-total"></span>\n            </div>\n            <span class="docapp-slider-item-progress-percent">\n            </span>\n        </div>\n    </div>\n',o.querySelector(".docapp-slider-item-info-text-main").textContent=r.name;var a=o.querySelector(".docapp-slider-item-info-image img");null!==(i=r.free_gifts)&&void 0!==i&&null!==(i=i[0])&&void 0!==i&&i.image?a.src=r.free_gifts[0].image:r.goal_type===M.A.SHIPPING?(a.parentNode.classList.add("docapp-free-shipping-image-slider"),a.remove()):r.goal_type===M.A.DISCOUNT&&(a.parentNode.classList.add("docapp-discount-image-slider"),a.remove());var c=Lt(r),u=Math.min(100,100*c/r.current_requires).toFixed(0)+"%";o.querySelector(".docapp-slider-item-progress-bar-current").style.width=u;var l=o.querySelector(".docapp-slider-item-progress-amount-current");r.comparing===wt.A.SUBTOTAL?l.innerHTML=e._formatAmount(c):l.innerText=c;var d=o.querySelector(".docapp-slider-item-progress-amount-total");r.comparing===wt.A.SUBTOTAL?d.innerHTML=e._formatAmount(r.current_requires):d.innerText=r.current_requires,r.complete_and_removed?o.querySelector(".docapp-slider-item-progress-percent").innerHTML="":o.querySelector(".docapp-slider-item-progress-percent").innerHTML=r.complete?e.shopOptions.gift_promotion_popup_completed_label||"":"".concat(u," ").concat(e.shopOptions.gift_promotion_popup_in_progress_label||""),1===t.length&&o.style.setProperty("height","unset","important"),e.sliderContainer.appendChild(o)}));var c=this.mainContainer.querySelector(".docapp-slider-see-all-button");(c.innerHTML="".concat(this.shopOptions.gift_promotion_slider_see_all_label," (").concat(t.length,")"),1===t.length&&(c.style.display="none"),this.isPreview)||(this.mainContainer.addEventListener("click",(function(t){if(t.target===i||t.target===o)return null;e.mainContainer.style.display="none",e.showPopup(),setTimeout(e.hideSlider.bind(e),0)})),this.mainContainer.querySelector(".docapp-slider-close").addEventListener("click",(function(t){t.stopImmediatePropagation(),setTimeout(e.hideSlider.bind(e),0)})));i.addEventListener("click",(function(){e.sliderContainer.scrollLeft-=e.sliderContainer.offsetWidth,a()})),o.addEventListener("click",(function(){e.sliderContainer.scrollLeft+=e.sliderContainer.offsetWidth,a()}));var u=null;this.sliderContainer.addEventListener("scroll",(function(){clearTimeout(u),u=setTimeout(l,100)}));var l=function(){At(e.sliderContainer.children).forEach((function(t,r){Math.abs(t.getBoundingClientRect().left-e.sliderContainer.getBoundingClientRect().left)<10&&(e.currentSlide=r+1,i.href="#docapp-slide-".concat(Math.max(e.currentSlide-1,1)),o.href="#docapp-slide-".concat(Math.min(e.currentSlide+1,n)),a())}))}}}])}(),Nt=function(){return Dt((function t(e){var r=this,n=e.container,i=e.shopOptions;kt(this,t),Tt(this,"_hidePopupAndShowFloat",(function(){r._hidePopup(),r.giftFloatContainer.style.setProperty("display","block","important")})),Tt(this,"_showSlider",(function(){var t;null===(t=r.sliderRenderer)||void 0===t||t.showSlider()})),Tt(this,"_hideSlider",(function(){var t;null===(t=r.sliderRenderer)||void 0===t||t.hideSlider()})),t.instance||(t.instance=this),this.container=n,this.shopOptions=i,this.lastCartHashHandled=null,this.lastDiscount=null,this.widgetHTMLMounted=!1,this.sliderRenderer=null}),[{key:"shouldRender",value:function(e){var r=e.cartResponse,n=e.shopCurrency;if(!r)return!1;if(n!==r.currency&&!(0,bt.m)(r))return(0,t.M)("PopupRenderer: Need cart currency rate! End."),!1;if(!(0,A.isReadyToFormatMoney)())return!1;var i=(0,g.getCartHash)(r),o=v.A.getTotalDiscount();return(this.lastCartHashHandled!==i||this.lastDiscount!==o)&&(this.lastCartHashHandled=i,this.lastDiscount=o,!0)}},{key:"renderUsingCartResponse",value:function(t){var e=t.cartResponse,r=t.shopCurrency,n=t.force,i=t.withSlider;if(n||this.shouldRender({cartResponse:e,shopCurrency:r})){var o=xt;e.total_price||(o=jt);var a=k.default.getGoalsData().giftGoals.filter((function(t){return t.comparing!==wt.A.DISCOUNT})).slice().sort(o),c=[],u=[];a.forEach((function(t){t.complete_and_removed||(t.complete?c.push(t):u.push(t))})),this.widgetHTMLMounted||this._mountPopupAndSliderHTML(i),this.renderOffers(c,u)}}},{key:"_mountPopupAndSliderHTML",value:function(t){var e=this;this.container=document.createElement("div"),this.container.className="docapp-free-gift-popup-widget docapp-promo-widget-variables",window.document.body.append(this.container),this.bigWidget=document.createElement("div"),this.bigWidget.className="docapp-promo-popup-container",this.bigWidget.innerHTML=It({title:this.shopOptions.gift_promotion_popup_header_title,body:this.shopOptions.gift_promotion_popup_header_subtitle,continueLabel:this.shopOptions.gift_promotion_popup_continue_shopping_button_label,hide_branding:this.shopOptions.hide_branding}),this.container.appendChild(this.bigWidget);var r=this.container.querySelector(".docapp-promo-popup__continue"),n=this.container.querySelector(".docapp-promo-close");if(this.giftFloatContainer=vt.injectFloatingAnnouncement(this.shopOptions,null,{withSlider:t,showGiftPromotion:function(){if(t)return e._showSlider();e._showPopup()},hideGiftPromotion:function(){if(t)return e._hideSlider();e._hidePopup()},showGiftPopup:this._showPopup.bind(this)}),t){var i=this.giftFloatContainer.querySelector(".docapp-free-gift-float-content");i.classList.add("docapp-slider","docapp-promo-widget-variables"),this.sliderRenderer=new Ut({container:i,showPopup:this._showPopup.bind(this),shopOptions:this.shopOptions}),this.sliderRenderer._formatAmount=this._formatAmount}null==r||r.addEventListener("click",this._hidePopupAndShowFloat),null==n||n.addEventListener("click",this._hidePopupAndShowFloat),this.bigWidget.addEventListener("click",(function(t){t.target===e.bigWidget&&e._hidePopupAndShowFloat()})),this.widgetHTMLMounted=!0}},{key:"_handlePreviewWithProgress",value:function(t,e){var r=e.comparing===wt.A.COUNT?e.current_requires:100;if(e.comparing!==wt.A.COUNT||t!==r){var n=Math.floor(t*e.current_requires/r);this.renderOffers([],[Pt(Pt({},e),{},{current_progress:n})])}else this.renderOffers([Pt(Pt({},e),{},{complete:!0,current_progress:e.current_requires,current_progress_pre_discount:e.current_requires})],[])}},{key:"showPreview",value:function(t){this.container.innerHTML=It({title:this.shopOptions.gift_promotion_popup_header_title,body:this.shopOptions.gift_promotion_popup_header_subtitle,continueLabel:this.shopOptions.gift_promotion_popup_continue_shopping_button_label,hide_branding:this.shopOptions.hide_branding});var e=k.default.getGoalsData().giftGoals.filter((function(t){return t.comparing!==wt.A.DISCOUNT})).slice().sort(jt);if(1===e.length)return this._handlePreviewWithProgress(t,e[0]);var r=[],n=[];e.forEach((function(t,e){0===e?r.push(Pt(Pt({},t),{},{complete:!0,current_progress:t.current_requires,current_progress_pre_discount:t.current_requires})):1===e?n.push(Pt(Pt({},t),{},{current_progress:Math.floor(t.current_requires/2),current_progress_pre_discount:Math.floor(t.current_requires/2)})):n.push(t)})),this.renderOffers(r,n)}},{key:"_hidePopup",value:function(){this.container.style.width="0",this.container.style.height="0",this.bigWidget.style.display="none"}},{key:"_showPopup",value:function(){this.giftFloatContainer.style.setProperty("display","none","important"),this.giftFloatContainer.querySelectorAll(".docapp-free-gift-bounce").forEach((function(t){return t.classList.remove("docapp-free-gift-bounce")})),this.container.style.width="100%",this.container.style.height="100%",this.bigWidget.style.display="flex"}},{key:"renderOffers",value:function(t,e){var r=this,n=this.container.querySelector(".docapp-promo-offers");if(n.innerHTML="",t.length>0){var i=document.createElement("div");i.className="docapp-promo-popup__earned",i.innerHTML="".concat(this.shopOptions.gift_promotion_popup_earned_offers_label," (").concat(t.length,")"),n.appendChild(i)}if(t.forEach((function(t){var e=Lt(t),i=r.createOfferDiv(t,e);i.classList.add("docapp-promo-offer-card--completed"),i.querySelector(".docapp-promo-offer-progress-bar-current").style.width="100%",i.querySelector(".docapp-promo-offer-progress-percent").innerHTML=r.shopOptions.gift_promotion_popup_completed_label||"",n.appendChild(i)})),e.length>0){var o=document.createElement("div");o.className="docapp-promo-popup__more",o.innerHTML="".concat(this.shopOptions.gift_promotion_popup_more_offers_label," (").concat(e.length,")"),n.appendChild(o)}if(e.forEach((function(t){var e=Lt(t),i=r.createOfferDiv(t,e),o=(100*e/t.current_requires).toFixed(0)+"%";if(i.querySelector(".docapp-promo-offer-progress-percent").innerHTML="".concat(o," ").concat(r.shopOptions.gift_promotion_popup_in_progress_label||""),i.querySelector(".docapp-promo-offer-progress-bar-current").style.width=o,t.details){var a=r.createMoreDetails(t);i.appendChild(a)}n.appendChild(i)})),this.sliderRenderer){var a=e.slice().sort(jt),c=t.length;e.length||(c-=1),this.sliderRenderer.render(t.concat(a),c)}this.emitWidgetUpdatedEvent()}},{key:"_formatAmount",value:function(t){var e=(0,A.getMoneyFormat)()||this.shopOptions.money_format_pattern,r=(0,A.getCurrencyName)()||this.shopOptions.currency;return(0,S.formatAmount)(t,e,r)}},{key:"createOfferDiv",value:function(t,e){var r,n=document.createElement("div");n.className="docapp-promo-offer-card",n.innerHTML='\n    <div class="docapp-promo-offer">\n        <div class="docapp-promo-offer-info">\n            <div class="docapp-promo-offer-info-text">\n                <div class="docapp-promo-offer-info-text-main">\n                </div>\n            </div>\n        </div>\n        <div class="docapp-promo-offer-progress">\n            <div class="docapp-promo-offer-progress-bar">\n                <div class="docapp-promo-offer-progress-bar-current"></div>\n            </div>\n            <div class="docapp-promo-offer-progress-numbers">\n                <div class="docapp-promo-offer-progress-amount">\n                    🛒 <span class="docapp-promo-offer-progress-amount-current"></span>/<span\n                        class="docapp-promo-offer-progress-amount-total"></span>\n                </div>\n                <div class="docapp-promo-offer-progress-percent"> </div>\n            </div>\n        </div>\n        <div class="docapp-promo-offer-info-image">\n            <img alt="goal pic">\n        </div>\n    </div>\n';var i,o,a=n.querySelector(".docapp-promo-offer-info-text-main"),c=t.name;t.reward_handling_type===Ct.RewardHandlingType.MANUAL?i=t.gift_quantity||0:i=null===(o=t.free_gifts)||void 0===o?void 0:o.reduce((function(t,e){return t+e.quantity}),0);if(-1===t.max_applications||t.max_applications>1||i>1){var u=t.times_awarded;(-1===t.max_applications||t.max_applications>t.times_awarded)&&(u+=1),c+=" x"+u*i}a.innerText=c;var l=n.querySelector(".docapp-promo-offer-progress-amount-current");t.comparing===wt.A.SUBTOTAL?l.innerHTML=this._formatAmount(e):l.innerText=e;var d=n.querySelector(".docapp-promo-offer-progress-amount-total");t.comparing===wt.A.SUBTOTAL?d.innerHTML=this._formatAmount(t.current_requires):d.innerText=t.current_requires;var s=n.querySelector(".docapp-promo-offer-info-image img");return null!==(r=t.free_gifts)&&void 0!==r&&null!==(r=r[0])&&void 0!==r&&r.image?s.src=t.free_gifts[0].image:t.goal_type===M.A.SHIPPING?(s.parentNode.classList.add("docapp-free-shipping-image"),s.remove()):t.goal_type===M.A.DISCOUNT&&(s.parentNode.classList.add("docapp-discount-image"),s.remove()),n}},{key:"createMoreDetails",value:function(t){var e=document.createElement("div");e.className="docapp-promo-more-details";var r=document.createElement("div");if(r.className="docapp-promo-more-details__header",r.innerText=t.details,e.appendChild(r),t.detailsBody){var n=document.createElement("input");n.id="docapp-promo-"+t.id,n.className="docapp-promo-hidden",n.type="checkbox";var i=document.createElement("div");if(i.className="docapp-promo-more-details__body",i.innerHTML="<p>".concat(t.detailsBody,"</p>"),t.detailsLink){var o=document.createElement("a");o.className="docapp-promo-more-details__body__link",o.href=t.detailsLink.address,o.innerText=t.detailsLink.text,i.appendChild(o)}var a=document.createElement("label");a.className="docapp-promo-more-details__expand",a.setAttribute("for","docapp-promo-"+t.id),a.innerText="More Details",e.appendChild(n),e.appendChild(i),e.appendChild(a);var c=document.createElement("style");c.innerHTML="\n                #docapp-promo-".concat(t.id,":checked~.docapp-promo-more-details__body {\n                    display: block;\n                }\n\n                #docapp-promo-").concat(t.id,':checked~.docapp-promo-more-details__expand::after {\n                    content: "⬆";\n                }\n            '),document.head.appendChild(c)}return e}},{key:"emitWidgetUpdatedEvent",value:function(){var t=new Event("docapp-free-gift-popup-updated");document.body.dispatchEvent(t)}}])}(),Gt=r(96749),Rt=r(47846);var Ht=[];function Ft(){document.querySelectorAll("[data-theme-app-extension-gift-progress]").forEach((function(t){var e=t.closest("div.shopify-app-block.shopify-block");if(!Ht.includes(e.id)){Ht.push(e.id);var r=t.getAttribute("data-primary-bar-color"),n=t.getAttribute("data-secondary-bar-color"),i=t.getAttribute("data-text-color"),a=t.getAttribute("data-text-size"),c=t.getAttribute("data-progress-bar-height"),u="\n            #".concat(e.id," .docapp-fg-progress-track .docapp-fg-active-track,\n            #").concat(e.id," .docapp-fg-progress-track .docapp-fg-active-track,\n            #").concat(e.id," .docapp-fg-progress-goal.docapp-fg-goal-completed .docapp-fg-goal-bubble {\n                border-color: ").concat(r," !important;\n                background: ").concat(r," !important;\n            }\n            \n            #").concat(e.id," .docapp-fg-progress-goal.docapp-fg-goal-completed .docapp-fg-pin svg {\n                fill: ").concat(r," !important;\n            }\n\n            #").concat(e.id," .docapp-fg-progress-track, \n            #").concat(e.id," .docapp-fg-progress-track,\n            #").concat(e.id," .docapp-fg-progress-goal .docapp-fg-goal-bubble, \n            #").concat(e.id," .docapp-fg-progress-goal .docapp-fg-goal-bubble {\n                border-color: ").concat(n," !important;\n                background: ").concat(n," !important;\n                color: ").concat(n," !important;\n            }\n            \n            #").concat(e.id," .docapp-fg-progress-goal .docapp-fg-pin svg {\n                fill: ").concat(n," !important;\n            }\n\n            #").concat(e.id," .docapp-fg-progress-goal .docapp-fg-goal-title,\n            #").concat(e.id," .docapp-fg-current .docapp-fg-current-amount,\n            #").concat(e.id," .docapp-fg-progress-goal .docapp-fg-pin-label,\n            #").concat(e.id," .docapp-fg-progress-goal .docapp-fg-goal-target,\n            #").concat(e.id," .docapp-fg-progress-custom-note,\n            #").concat(e.id," .docapp-fg-progress-label {\n                color: ").concat(i," !important;\n            }\n            #").concat(e.id," .docapp-fg-current svg,\n            #").concat(e.id," .docapp-fg-progress-goal .docapp-fg-goal-target svg {\n                fill: ").concat(i," !important;\n            }\n\n            #").concat(e.id," .docapp-free-gift-progress .docapp-fg-progress-goal .docapp-fg-goal-text-content,\n            #").concat(e.id," .docapp-free-gift-progress .docapp-fg-progress-track .docapp-fg-current .docapp-fg-current-amount,\n            #").concat(e.id," .docapp-free-gift-progress .docapp-fg-progress-goal .docapp-fg-pin-label {\n                background: ").concat("#ffffff"===i.toLowerCase()?"#000000":"#ffffff"," !important;\n            }\n\n            #").concat(e.id," .docapp-fg-progress-goal .docapp-fg-goal-title,\n            #").concat(e.id," .docapp-fg-progress-goal .docapp-fg-pin-label,\n            #").concat(e.id," .docapp-fg-progress-custom-note,\n            #").concat(e.id," .docapp-free-gift-progress .docapp-fg-progress-goal .docapp-fg-goal-target,\n            #").concat(e.id," .docapp-free-gift-progress .docapp-fg-current .docapp-fg-current-amount,\n            #").concat(e.id," .docapp-fg-progress-label {\n                font-size: ").concat(a,"px !important;\n            }\n\n            #").concat(e.id," .docapp-fg-progress-track, \n            #").concat(e.id," .docapp-fg-active-track {\n                border-width: calc(").concat(c,"px / 2) !important;\n            }\n\n            #").concat(e.id," .docapp-fg-progress-track {\n                width: calc(100% - ").concat(c,"px) !important;\n            }\n            \n            #").concat(e.id," .docapp-fg-active-track {\n                top: calc(").concat(c,"px / -2) !important;\n                left: calc(").concat(c,"px / -2) !important;\n            }\n\n            #").concat(e.id," .docapp-fg-progress-goal {\n                bottom: calc(").concat(c,"px / -2) !important;\n            }\n\n            #").concat(e.id," .docapp-fg-progress-goal .docapp-fg-goal-bubble {\n                width: ").concat(c,"px !important;\n                height: ").concat(c,"px !important;\n                line-height: ").concat(c,"px !important;\n                font-size: calc(").concat(c,"px * 0.8) !important;\n            }\n\n            #").concat(e.id," .docapp-fg-current {\n                top: calc(").concat(c,"px / 2) !important;\n            }\n        ");(0,o.F)(u)}}))}var Bt=r(94240);const Wt=function(t){if(!t||!t.gift_float_enabled||window.docappFreeGiftPopupDisabled)return!1;if(!t.gift_float_excluded_page_matches||!t.gift_float_excluded_page_matches.trim().length)return!0;var e=t.gift_float_excluded_page_matches.split(",").map((function(t){return t.trim()})),r=window.location.pathname;return!e.find((function(t){var e=t[0],n=t[t.length-1],i=t.replace(/\*/g,"");return"*"===e&&"*"===n?r.includes(i):"*"===e?r.endsWith(i):"*"===n?r.startsWith(i):r===i}))};var zt=r(95219);const Vt={ALL:1,COLLECTIONS:2,PRODUCTS:3,VARIANTS:4};var Qt=r(45345),Jt=r(95333);const Xt={EMPTY_CART:1,SOME_ITEMS:2,MINUS_1_ITEM:3,ALL_ITEMS:4};const Kt={EXCLUDE:1,INCLUDE:2};var Zt="docapp-removed-coupons",Yt=(0,O.mI)(Zt);Yt&&JSON.parse(Yt);const $t=function(t){var e=(0,O.mI)(Zt);return(e?JSON.parse(e):[]).includes(t.toUpperCase())};var te=r(93894),ee=r(65149);function re(t){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(t)}function ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ie(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(r),!0).forEach((function(e){oe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oe(t,e,r){var n;return n=function(t,e){if("object"!=re(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==re(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ae(t){return function(t){if(Array.isArray(t))return ce(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ce(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const ue={generateCartUpdates:function(e,r,n,i,o){var a=this;if(!e.items)return(0,t.M)("ENGINE: Cart invalid - no items array. Goals Engine End."),null;(0,t.M)("ENGINE: generateCartUpdates Start!");var c=function(e,r){if(!e||e===r.currency)return 1;var n=(0,bt.m)(r);if(n)return n;return(0,t.M)("ENGINE: Need cart currency rate! Goals Engine End. "+e+" vs "+r.currency),null}(n,e);if(!c)return null;var u=!1,l=[];r&&r.forEach((function(t){var e;t.filter_type&&(u=!0),t.goal_type===M.A.GIFT&&(null===(e=t.free_gifts)||void 0===e||e.forEach((function(t){l.push(parseInt(t.product_id))})))})),i&&i.length&&(i=(0,Qt.X)(i)),o&&o.length&&(o=(0,Qt.X)(o));var d=o&&o.length||i&&i.length;return!((u||d)&&e.items.length>0)||e.items[0].hasOwnProperty("final_line_price")&&e.items[0].hasOwnProperty("original_line_price")?(e=function(t){if(v.A.isDiscountOnCartAppActive()||v.A.getItemDiscounts())try{t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"automatic",r=[];t.cart_level_discount_applications&&t.cart_level_discount_applications.forEach((function(n,i){n.type||(n.type="automatic"),n.type===e&&(r.push(n.title),delete t.cart_level_discount_applications[i])}));var n=0;return t.items.forEach((function(i,o){if(i.discounts||i.line_level_discount_allocations){var a=0,c=[];i.discounts&&(c=i.discounts.filter((function(t){var e=r.includes(t.title);return e&&(a+=t.amount),!e}))),i.line_level_discount_allocations&&i.line_level_discount_allocations.forEach((function(r,n){r.hasOwnProperty("discount_application")&&(r=ie(ie({},r.discount_application),{},{amount:r.amount})),r.type||(r.type="automatic"),r.type&&r.type===e&&(a+=r.amount,t.items[o].final_price+=parseInt(r.amount/i.quantity),t.items[o].final_line_price+=r.amount,t.items[o].line_level_discount_allocations=t.items[o].line_level_discount_allocations.splice(n,1),c=c.filter((function(t){return t.title!==r.title})),t.items[o].discounts=ae(c))})),t.items[o].total_discount-=a,t.items[o].line_price+=a,n+=a}})),t.total_discount-=n,t.total_price+=n,t}(JSON.parse(JSON.stringify(t)),"discount_code")}catch(t){console.error("Failed to clean up manual discount cart data",t)}return t}(e),r.forEach((function(t){a.calculateGoalProgressUsingCartResponse(t,e,c,o,i,l)})),k.default.saveGoalsData(),(0,ee.removeOutdatedDeclinedGifts)(r),this.handleCustomDiscountGoals(r),de(r)?te.A.generateCartItemChanges(e,r):this.generateCartUpdatesForCalculatedGoals(e,r)):((0,t.M)("ENGINE: Pre-loaded cart cannot be used with included or excluded products. Goals Engine End."),null)},generateCartUpdatesUsingApi:function(r,i){var o=this;(0,t.M)("ENGINE: generateCartUpdatesUsingApi Start!");var a={cart:r,item_discounts:v.A.getItemDiscounts(),discount_codes:v.A.getAllDiscountsApplied().map((function(t){return t.title})),using_discount_app:v.A.isDiscountOnCartAppActive()},c=H();c&&c.userIp&&(a.ip_override=c.userIp),(0,e.D1)()&&(a["docapp-free-gift-test"]=1),(0,n.E)(h.D_+"goal-progress",(function(t){var e=t.goals||[],n=k.default.getGoalsData().giftGoals;n.forEach((function(t){var r=e.find((function(e){return e.id===t.id}));r&&(t.current_progress=r.current_progress,t.current_progress_pre_discount=r.current_progress_pre_discount,t.current_message=r.current_message,t.times_awarded=r.times_awarded,t.gifts_awarded=r.gifts_awarded,t.current_requires=r.current_requires,t.complete=r.complete,t.complete_and_removed=r.complete_and_removed)})),k.default.saveGoalsData(),(0,ee.removeOutdatedDeclinedGifts)(n),o.handleCustomDiscountGoals(n),de(n)?i(te.A.generateCartItemChanges(r,n)):i(o.generateCartUpdatesForCalculatedGoals(r,n))}),(function(e){dt.unBlockCheckoutButtons(),(0,t.M)("Error while trying to calculate goals!",e)}),"POST",JSON.stringify(a))},calculateGoalProgressUsingCartResponse:function(e,r,n,i,o,a){var c=this,u=0,l=0,d=0,s=0,p=i&&i.length||o&&o.length,f=!!e.filter_type;if(p||f){var m=v.A.getItemDiscounts();null===m&&(m=r.items.reduce((function(t,e){var r=(e.discounts||[]).reduce((function(t,e){return t+(e.amount||0)}),0);return t.hasOwnProperty(e.key)?t[e.key]+=r:t[e.key]=r,t}),{})),d=r.items.reduce((function(t,n){var d,p=i&&i.length&&!i.includes(n.product_id),g=o&&o.length&&o.includes(n.product_id),h=a.includes(n.product_id)||!(null===(d=n.handle)||void 0===d||!d.includes("docapp-free-gift"));if(f){var _=!1;e.filter_applies_to_type===Vt.PRODUCTS?_=(0,Qt.X)(e.filter_applies_to_ids).includes(n.product_id):e.filter_applies_to_type===Vt.VARIANTS&&(_=(0,Qt.X)(e.filter_applies_to_ids).includes(n.variant_id)),e.filter_type===Kt.INCLUDE?_||(p=!0):e.filter_type===Kt.EXCLUDE&&_&&(g=!0)}if(p||g||h)return t;if(!(n.original_line_price>0))return t;t+=parseInt(n.quantity),u+=n.original_line_price;var y=n.key&&m.hasOwnProperty(n.key)&&!c.discountAppliesToAnotherItem(m[n.key],r.items,n),v=y?m[n.key]:0,w=n.original_line_price-v;return w>0?(l+=w,s+=parseInt(n.quantity),y&&delete m[n.key]):w<0?m[n.key]-=n.original_line_price:y&&delete m[n.key],t}),0)}else{u=r.original_total_price;var g=v.A.getTotalDiscount(r);(l=g>0?r.original_total_price-g:r.total_price)<0&&(l=0),s=r.items.reduce((function(t,e){var r;return a.includes(e.product_id)||!(null===(r=e.handle)||void 0===r||!r.includes("docapp-free-gift"))?t:(d+=parseInt(e.quantity),e.hasOwnProperty("final_price")&&e.final_price<=0||e.final_line_price<=0?t:t+parseInt(e.quantity))}),0)}l<=0&&(l=0,s=0),(0,t.M)("ENGINE: Goal: ".concat(e.id," itemCount: ").concat(d," discountedItemCount: ").concat(s," subtotal: ").concat(u," discountedSubtotal: ").concat(l)),this.calculateGoalProgress(e,u,l,d,s,n)},calculateGoalProgress:function(e,r,n,o,a,c){var u,l,d=r/c,s=n/c,p=0;void 0!==e.max_applications&&(0,Jt.isNumeric)(e.max_applications)||(e.max_applications=1),-1===e.max_applications&&(e.max_applications=Number.MAX_SAFE_INTEGER),void 0!==e.max_requires&&(0,Jt.isNumeric)(e.max_requires)||(e.max_requires=0),e.complete_and_removed=!1;var f=e.goal_type===M.A.DISCOUNT||e.goal_type===M.A.GIFT&&!!e._ignoreDiscounts;if(e.comparing===wt.A.SUBTOTAL){var m,g;e.current_progress=n,e.current_progress_pre_discount=r,f?(m=d,g=o):(m=s,g=a),0===(l=(0,S.amountToInt)(e.requires))?(p=g>0?1:0,e.max_applications=1):p=Math.floor(m/l);var h=(0,S.amountToInt)(e.max_requires);h>0&&m>=h&&(u=Math.min(p,e.max_applications),p=0,e.complete_and_removed=!0)}else if(e.comparing===wt.A.COUNT){var _;_=f?o:a,e.current_progress=a,e.current_progress_pre_discount=o,(l=1*e.requires)<=0?(p=_>0?1:0,e.max_applications=1):p=Math.floor(_/l),e.max_requires>0&&_>=e.max_requires&&(u=Math.min(p,e.max_applications),p=0,e.complete_and_removed=!0)}else if(e.comparing===wt.A.DISCOUNT){var y,w=e.requires;if(y=v.A.isDiscountOnCartAppActive()?v.A.getAllDiscountsApplied():[].concat(ae(v.A.getAllDiscountsApplied()),ae(le((0,i.getLastCartResponse)()).map((function(t){return{title:t}})))),(0,t.M)("ENGINE: allAppliedDiscounts: ",y),w&&r>0){var b=!1;w.split("||").forEach((function(t){if(!b){var e=t.endsWith("*"),r=t.startsWith("*");t=t.replace(/^\*+|\*+$/g,"").toUpperCase(),b=e&&r?y.some((function(e){var r;return null===(r=e.title)||void 0===r?void 0:r.toUpperCase().includes(t)})):e?y.some((function(e){var r;return null===(r=e.title)||void 0===r?void 0:r.toUpperCase().startsWith(t)})):r?y.some((function(e){var r;return null===(r=e.title)||void 0===r?void 0:r.toUpperCase().endsWith(t)})):y.some((function(e){var r;return(null===(r=e.title)||void 0===r?void 0:r.toUpperCase())===t}))}})),p=b?1:0}l=0,u=p,e.current_progress=0,e.current_progress_pre_discount=null,e.max_applications=1,e.complete_and_removed=!1}p=Math.min(p,e.max_applications),e.times_awarded=p,e.gifts_awarded=function(t){var e;void 0!==t.gift_quantity&&(0,Jt.isNumeric)(t.gift_quantity)||(t.gift_quantity=0);if(t.reward_handling_type===Ct.RewardHandlingType.AUTOMATIC&&null!==(e=t.free_gifts)&&void 0!==e&&e.length)return t.free_gifts.reduce((function(t,e){return t+e.quantity}),0);return t.gift_quantity}(e)*p,e.comparing===wt.A.SUBTOTAL&&(l*=c),e.awarded_requires=p*l,e.complete_and_removed?(e.complete=!0,e.current_requires=u*l,e.current_message=e.messages[Xt.ALL_ITEMS]):p<e.max_applications?(e.complete=!1,e.current_requires=(p+1)*l,e.current_message=this.generateGoalMessage(e)):(e.complete=!0,e.current_requires=p*l,e.current_message=e.messages[Xt.ALL_ITEMS])},generateGoalMessage:function(t){if(t.comparing===wt.A.DISCOUNT)return null;var e,r,n,i=Math.max(0,t.current_requires-t.current_progress);if((t.goal_type===M.A.DISCOUNT||t.goal_type===M.A.GIFT&&!!t._ignoreDiscounts)&&(i=Math.max(0,t.current_requires-t.current_progress_pre_discount)),t.comparing===wt.A.SUBTOTAL){if(e=this.formatAmount(i),r=this.formatAmount(t.current_requires),null===e)return null}else e=i.toFixed(0),r=t.current_requires.toFixed(0);return(n=0===t.current_progress?t.messages[Xt.EMPTY_CART]:t.comparing===wt.A.COUNT&&1===i?t.messages[Xt.MINUS_1_ITEM]:t.messages[Xt.SOME_ITEMS])&&n.includes("[[required]]")&&(n=n.replace(/\[\[required]]/g,r)),n&&n.includes("[[remaining]]")&&(n=n.replace(/\[\[remaining]]/g,e)),n},generateCartUpdatesForCalculatedGoals:function(e,r){var n={},i={},o=!1;if(r.forEach((function(t){t.goal_type===M.A.GIFT&&t.free_gifts.forEach((function(e){n[e.product_id]=n[e.product_id]||0,n[e.product_id]+=t.times_awarded*e.quantity-(0,ee.getDeclinedGiftsQuantity)(t,e.product_id),i[e.product_id]=e.variant_id,o=!0}))})),!o)return(0,t.M)("ENGINE: No GIFT goals provided. Goals Engine End."),null;(0,t.M)("ENGINE: expectedItemCounts: ".concat(JSON.stringify(n)));var a={},c={},u=[];e.items.forEach((function(t){t.product_id||(t.product_id=0),c[t.product_id]||(c[t.product_id]={}),c[t.product_id][t.variant_id]?c[t.product_id][t.variant_id]+=t.quantity:c[t.product_id][t.variant_id]=t.quantity,a[t.product_id]=a[t.product_id]||0,a[t.product_id]+=t.quantity,t.final_price>=101&&u.push(t.product_id.toString())}));var l=!1,d={};return Object.keys(n).forEach((function(e){var r=a[e]||0,o=n[e];if(o!==r&&!(o<r&&u.includes(e.toString())))if(l=!0,(0,t.M)("ENGINE: hasChange! ".concat(JSON.stringify({productId:e,expectedQuantity:o,currentQuantity:r,nonFreeProductIds:u}))),o>r){var s,p=i[e],f=(null===(s=c[e])||void 0===s?void 0:s[p])||0,m=o-r;d[p]=m+f}else{var g=Object.keys(c[e]),h=r;g.forEach((function(t){if(h!==o)if(h<o)console.error("More items removed than expected!");else{var r=c[e][t],n=h-o,i=Math.min(r,n);h-=i,d[t]=r-i}}))}})),l?((0,t.M)("ENGINE: cartChanges: ".concat(JSON.stringify(d))),{additions:[],quantityChanges:d}):((0,t.M)("ENGINE: No changes to cart items were needed. Goals Engine End."),null)},formatAmount:function(t,e){return(0,A.isReadyToFormatMoney)()?(0,S.formatAmount)(t,(0,A.getMoneyFormat)(),(0,A.getCurrencyName)(),e):null},handleCustomDiscountGoals:function(e){var r=e.filter((function(t){return t.goal_type===M.A.DISCOUNT})).sort((function(t,e){return 1*t.requires<1*e.requires?1:-1}));if(r.length){(0,t.M)("DISCOUNTS: Start handle discount goals");var n=!1,o=v.A.getDiscountCalculatedBy3rdPartyApp(),a=v.A.getManualDiscountsApplied().map((function(t){var e;return(null===(e=t.title)||void 0===e?void 0:e.toUpperCase())||""})),c=le((0,i.getLastCartResponse)());r.forEach((function(e){if(n)e.is_applied=!1;else if(e.times_awarded){(0,t.M)("DISCOUNTS: Reached goal with code: "+(e.code||"AUTOMATIC")),n=!0;var r=e.code&&(a.includes(e.code.toUpperCase())||c.includes(e.code.toUpperCase())),i=e.code&&$t(e.code.toUpperCase());(r||i)&&(e.is_applied=!0),o||e.is_applied||(e.code?((0,t.M)("DISCOUNTS: Start applying code: "+e.code),v.A.applyDiscountCode(e.code).then((function(){(0,t.M)("DISCOUNTS: Set applied code: "+e.code),e.is_applied=!0,k.default.saveGoalsData()}))):(e.is_applied=!0,v.A.clearDiscounts()))}else e.is_applied=!1})),k.default.saveGoalsData()}},discountAppliesToAnotherItem:function(t,e,r){var n=e.filter((function(t){return t.key===r.key}));if(1===n.length)return!1;var i=n.filter((function(e){return e.original_line_price-t==0}));return 0!==i.length&&(r.original_line_price-t!=0&&i.length>0)}};function le(t){var e=[];return t?(t.cart_level_discount_applications&&t.cart_level_discount_applications.forEach((function(t){if(t.title){var r=t.title.toUpperCase();e.includes(r)||e.push(r)}})),t.items.forEach((function(t){t.line_level_discount_allocations&&t.line_level_discount_allocations&&t.line_level_discount_allocations.forEach((function(t){if(t.hasOwnProperty("discount_application")&&(t=ie(ie({},t.discount_application),{},{amount:t.amount})),t.title){var r=t.title.toUpperCase();e.includes(r)||e.push(r)}}))})),e):e}function de(t){return!!t.find((function(t){var e;return!!t&&(t.reward_handling_type===Ct.RewardHandlingType.MANUAL||(null===(e=t.free_gifts)||void 0===e?void 0:e.length)>1||!!t.enable_gift_removable)}))}var se,pe,fe=r(5613),me=!1,ge=function(e,r){se=r,pe=e.external_integration,me=!1;var n=k.default.getGoalsData();if(n.giftGoals&&n.giftGoals.find((function(t){return!!t.filter_type&&t.filter_applies_to_type===Vt.COLLECTIONS})))return!!e.items&&(!(e.items.length>0)||e.items[0].hasOwnProperty("final_line_price")&&e.items[0].hasOwnProperty("original_line_price")?(function(t){dt.blockCheckoutButtons(),ue.generateCartUpdatesUsingApi(t,(function(e){e?(he(t,e),zt.setInitialCheckForLiquidCartDataDone(!0)):(zt.getWaitingForRefresh()||zt.getApplyingCartUpdates()||dt.unBlockCheckoutButtons(),se(t))}))}(e),!0):((0,t.M)("Pre-loaded cart cannot be used with async goals engine."),!1));var i=ue.generateCartUpdates(e,n.giftGoals,zt.getShopCurrency(),n.excludedProductIds,n.includedProductIds);return!!i&&(he(e,i),zt.setInitialCheckForLiquidCartDataDone(!0),!0)};var he=function(e,r){(0,t.M)("Start applying cart updates generated by the gift goal engine"),zt.setApplyingCartUpdates(!0),dt.blockCheckoutButtons();var n=r.additions,o=r.quantityChanges;return null!=n&&n.length||o&&Object.keys(o).length?(me=!0,(0,i.applyCartUpdatesWithProperties)(n,o,(function(t){return _e(t,r)}))):_e((0,i.getLastCartResponse)(),r)};function _e(e,r){var n,i;if((0,t.M)("updatesAppliedHandler start"),zt.setApplyingCartUpdates(!1),zt.setLastCartHashHandled((0,g.getCartHash)(e)),zt.getWaitingForRefresh()||dt.unBlockCheckoutButtons(),dt.unBlockCartChangeElements(),e.external_integration&&pe!==e.external_integration&&((0,t.M)("External integration detected right after cart update! STORE EI "+e.external_integration),i=e.external_integration,(0,O.i_)(O.E9,i),(0,ft.TV)(O.E9,i),ge(e,se)))return"function"==typeof zt.getOnCartChange()?((0,t.M)("Necessary Cart Changes + run onCartChange! STOP"),void zt.getOnCartChange()(e,!0)):void(0,t.M)("Necessary Cart Changes + app not running! STOP");null!==(n=r.giftChoices)&&void 0!==n&&n.length?fe.A.openModal(r.giftChoices,e,ye):ye(e)}function ye(e){(me||arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&w.A.updateCartState(e)?(T.A.blockWidgetGeneration(),dt.blockCheckoutButtons(),zt.setWaitingForRefresh(!0),(0,t.M)("Waiting for refresh after Necessary Cart Changes! STOP")):se(e)}var ve=!1;const we={applyCartUpdatesAndUpdateUI:he,evaluateGoalsForNecessaryCartChanges:ge,reloadDueToInactiveGifts:function(e,r,n){if(!e||!e.items)return!1;if(zt.getInitialCheckForInactiveGiftsDone())return!1;if(zt.setInitialCheckForInactiveGiftsDone(!0),!zt.getInactiveGifts().length)return!1;var o=!1,a={};return e.items.forEach((function(t){var e;zt.getInactiveGifts().includes(null===(e=t.product_id)||void 0===e?void 0:e.toString())&&(o=!0,a[t.variant_id]=0)})),o?((0,t.M)("Applying cart updates due to inactive items..."),(0,i.applyCartUpdates)(a,(function(i){zt.setLastCartHashHandled((0,g.getCartHash)(i)),zt.getWaitingForRefresh()||dt.unBlockCheckoutButtons(),dt.unBlockCartChangeElements(),(0,t.M)("Cart updates applied due to inactive items!"),w.A.updateCartState(i)?(T.A.blockWidgetGeneration(),dt.blockCheckoutButtons(),zt.setWaitingForRefresh(!0),(0,t.M)("Waiting for refresh after reloadDueToInactiveGifts! STOP"),r&&e.token&&y(i,null)):r&&"function"==typeof zt.getOnCartChange()&&n(i)})),!0):((0,t.M)("InactiveGiftCheck: No changed needed!"),!1)},replaceSoldOutGiftsInCart:function(e){if(!ve&&(ve=!0,e.items&&e.items.length))try{D.default.runWithGiftVariantsData((function(r){var n={},i=!1;e.items.forEach((function(t){var e=t.product_id,o=t.variant_id;if(e&&r.hasOwnProperty(e)&&r[e].variants&&!(r[e].variants.length<=1)){var a=r[e].variants.find((function(t){return t.id.toString()===o.toString()}));if(a&&!a.available){var c=r[e].variants.find((function(t){return!!t.available}));if(c){var u=c.id;n[o]=0,n.hasOwnProperty(u)||(n[u]=0),n[u]=n[u]+t.quantity,i=!0}}}})),i?((0,t.M)("Sold-out gifts are being replaced",n),we.applyCartUpdatesAndUpdateUI(e,n)):(0,t.M)("No sold-out gifts detected")}))}catch(t){console.error("Free gift on cart, error while trying to swap sold-out gifts!",t)}},shouldUpdateCartView:function(e){if(!zt.getInitialCheckForLiquidCartDataDone())return zt.setInitialCheckForLiquidCartDataDone(!0),!!zt.getCartVerificationData()&&(!Y.A.shippingProtectionAppIsPresent()&&(zt.getCartVerificationData().item_count!==e.item_count&&((0,t.M)("Liquid cart had different item count, update view."),!0)))}};(0,t.c)("FGUC: "),(0,t.M)("Start"),window.freeGiftCartUpsellProAppLoaded||function(){var e=function(e){e.target&&(e.target.closest(".docapp-variant-options-trigger")||(e.target.getAttribute("docapp-data-href")||e.target.classList.contains("docapp-blocked-checkout")||e.target.classList.contains("docapp-blocked-cart-change")||e.target.closest("[docapp-data-href],.docapp-blocked-checkout,.docapp-blocked-cart-change"))&&((0,t.M)(e.type+" captured on blocked link!"),e.stopImmediatePropagation(),e.preventDefault()))};document.addEventListener("click",e,{capture:!0}),document.addEventListener("mousedown",e,{capture:!0}),document.addEventListener("touchstart",e,{capture:!0});var r=function(e){e.target&&e.target.classList&&e.target.classList.contains&&e.target.classList.contains("docapp-real-select")&&((0,t.M)("focus captured on our select!"),e.stopImmediatePropagation())};document.addEventListener("focus",r,{capture:!0}),document.addEventListener("focusin",r,{capture:!0})}(),function(){var r,f;(function(){if(window.freeGiftCartUpsellProAppLoaded)return(0,t.M)("App already initialized. END"),!1;if(window.freeGiftCartUpsellProAppLoaded=!0,!(window.freeGiftCartUpsellProAppBlock||document.documentElement.innerHTML.includes("t\\/shop\\/js\\/free-gift-cart-upsell-pro.min.js")||document.documentElement.innerHTML.includes("o\\/shop\\/js\\/free-gift-cart-upsell-pro.min.js")||document.documentElement.innerHTML.includes("m\\/shop\\/js\\/free-gift-cart-upsell-pro.min.js")||document.documentElement.innerHTML.includes(',"https://d2fk970j0emtue.cloudfront.net/shop/js/free-gift-cart-upsell-pro.min.js')||document.documentElement.innerHTML.includes('<noscript type="text/javascript/defer" src="https://d2fk970j0emtue.cloudfront.net/shop/js/free-gift-cart-upsell-pro.min.js')))return console.info("Dr. Free Gift & BOGO APP:"),console.info("We've detected that our app is no longer installed. Please contact us at support@freegiftoncartmanager.com so we can help you clean up this message, or if the app is still installed but not activating."),(0,t.M)("App not installed. END"),!1;if("/password"===window.location.pathname)return(0,t.M)("App disabled on password page. END"),!1;var e=new URLSearchParams(window.location.search);if(window.freeGiftCartUpsellProAppDisabled||"1"===e.get("docapp-free-gift-disable"))return(0,t.M)("App forcefully disabled. END"),!1;return!0})()&&((0,t.M)("Initializing app"),Gt.A.start(),function(){if(window.docappCart&&0===window.docappCart.total_price&&window.docappCart.item_count>0&&!M()){!!window.docappCart.items.find((function(t){var e;return null===(e=t.handle)||void 0===e?void 0:e.includes("docapp-free-gift")}))&&((0,t.M)("Block checkout due to gift in pre-load cart and no paid items!"),dt.blockCheckoutButtons())}if(window.docappCart){var e,r,n={item_count:window.docappCart.item_count,total_price:window.docappCart.total_price,currency:window.docappCart.currency};null!==(e=window.docappCart.shop_currency)&&void 0!==e&&e.match(/[A-Z]{3}/)&&null!==(r=window.docappCart.currency)&&void 0!==r&&r.match(/[A-Z]{3}/)||(window.docappCart=null,(0,t.M)('Remove Pre-loaded window["docappCart"] due to bad currency!'),n.currency=null,n.total_price=null),zt.setCartVerificationData(n)}var i=k.default.getGoalsData();i&&i.giftGoals&&!window.freeGiftCartUpsellProAppDisabledForCustomer&&((0,t.M)("Pre-load goals exist!"),dt.interceptCheckoutActions(),window.docappCart?((0,t.M)("Pre-load cart data exists!"),zt.setShopCurrency(window.docappCart.shop_currency),"USD"===zt.getShopCurrency()&&((0,A.setDefaultCurrencyName)(zt.getShopCurrency()),(0,A.setDefaultMoneyFormat)("$[[amount]]")),(0,t.M)("Pre-load dom protector start!"),zt.setGiftDomProtector(new b.O(i.giftGoals,!1)),zt.getGiftDomProtector().protectGiftDom(window.docappCart)):(0,t.M)("Pre-load cart data missing"))}(),window.glopal?(r=function(e){(0,t.M)("IP from API detection: "+e),zt.setProxyIpOverride(e||null),m()},(f=new XMLHttpRequest).open("GET","https://www.cloudflare.com/cdn-cgi/trace",!0),f.send(),f.onload=function(){var t=f.status,e=f.response;if(t>=400)r(null,null);else{var n=null,i=null,o=e.split("\n").filter((function(t){return t.includes("ip=")}));o.length&&(n=o[0].split("=")[1]);var a=e.split("\n").filter((function(t){return t.includes("loc=")}));a.length&&(i=a[0].split("=")[1]),r(n,i)}},f.onerror=function(){r(null,null)}):m(),Ft(),v.A.subscribeToDiscountChanges());function m(){(0,t.M)("Getting options"),(0,n.E)(h.D_+"storefront-options",_,C,"POST",JSON.stringify(function(){var r={},n=H(),i=new URLSearchParams(window.location.search);(0,e.D1)()&&(r["docapp-free-gift-test"]=1);i.has("docapp-test-ip")?r.ip_override=i.get("docapp-test-ip"):!zt.getProxyIpOverride()||n&&n.userIp===zt.getProxyIpOverride()?n&&n.userLocation&&n.userLocation.country&&(r.country=n.userLocation.country,r.province=n.userLocation.province,r.zip=n.userLocation.zip,zt.getProxyIpOverride()&&(r.ip_override=zt.getProxyIpOverride())):r.ip_override=zt.getProxyIpOverride();(window.freeGiftCartUpsellProAppDisabledForCustomer||zt.getAppDisabledAfterLoad())&&((0,t.M)("App starting in disabled state!"),r["docapp-free-gift-disabled"]=1);return r}()))}function _(r){if(!r.allow_gift_page&&window.location.pathname.includes("products/docapp-free-gift-"))return(0,t.M)("On gift product page when not allowed! Redirecting to home page."),void(window.location.href="/");var n,a;if((0,c.wH)(r),(0,A.setDefaultMoneyFormat)(r.money_format),(0,A.setDefaultCurrencyName)(r.currency_name),zt.setInactiveGifts(r.inactive_gifts),zt.setGiftPromotionType(r.gift_promotion_type||""),zt.setShouldWaitForDiscountApp(!!r.should_wait_for_discount_app),r.use_cart_update_for_cart_data&&(0,i.setUseUpdateEndpoint)(!0),k.default.populateGoalsDataFromOptions(r),!(r.is_active&&r.asset_base_url&&r.gift_goals&&r.gift_goals.length)&&!(0,c.zh)())return null!==(n=zt.getInactiveGifts())&&void 0!==n&&n.length?((0,t.M)("App is not active, but needs to protect inactive gifts!"),(0,e.H7)(),zt.setGiftDomProtector(new b.O([],!1)),zt.setOnCartChange((function(e){zt.getWaitingForRefresh()||((0,t.M)("Handle inactive app cart change."),(0,i.setLastCartResponse)(e),x(e)||(zt.getGiftDomProtector().protectGiftDom(),we.reloadDueToInactiveGifts(e,!1,E)))})),zt.setInitIntervalRef(setInterval((function(){zt.getGiftDomProtector().protectGiftDom()}),700)),(0,i.getCart)(null,(function(t){return zt.getOnCartChange()(t)})),void Gt.A.onCartChange("free_gift_app",zt.getOnCartChange())):void(0,t.M)("App is not active AND no gifts to protect!");if(window.freeGiftCartUpsellProApp={disabledForReCharge:!!window.freeGiftCartUpsellProApp&&!!window.freeGiftCartUpsellProApp.disabledForReCharge,updateWidgets:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"function"==typeof zt.getOnCartChange()&&(t?zt.getOnCartChange()(t,e):(0,i.getCart)(null,(function(t){return zt.getOnCartChange()(t,e)})))},getDiscountedCart:function(){return v.A.getDiscountedCart()}},dt.fixLoginAndRegisterRedirects(),Gt.A.check(),Gt.A.onDiscountApplied("free_gift_app",v.A.handleExternalDiscountApplied.bind(v.A)),window.addEventListener("lb-upsell-added",(function(e){e.detail&&e.detail.discount&&e.detail.discount.code&&((0,t.M)("Detected lb-upsell-added code: "+e.detail.discount.code),v.A.handleExternalDiscountApplied(e.detail.discount.code))})),setTimeout((function(){v.A.getItemDiscounts()&&!v.A.isDiscountOnCartAppActive()&&((0,t.M)("Clear outdated item discounts due to discount on cart app not being present."),v.A.clearDiscounts())}),1e4),r.user_location&&F({userLocation:r.user_location,userIp:r.user_ip}),zt.setShopCurrency(r.currency_name),zt.setRedirectCart(r.redirect_to_cart),zt.setGiftDomProtector(new b.O(k.default.getGoalsData().giftGoals,!!r.gift_progress_add_link_to_gift)),zt.setGiftPriceReplacer(new P(r)),T.A.setShopOptions(r),fe.A.setConfiguration(r),(0,o.a)(r.asset_base_url+"/shop/css/free-gift-cart-upsell-pro.min.css"),r.styles&&(0,o.F)(r.styles),dt.setUseCheckoutBlocker(!!r.use_checkout_blocker),r.use_checkout_blocker&&document.body.addEventListener("docapp-cart-change",(function(){return dt.blockCheckoutButtons()})),document.body.addEventListener("docapp-free-gift-currency-change",(function(){window.freeGiftCartUpsellProApp.updateWidgets((0,i.getLastCartResponse)(),!0)})),S(r),Wt(r)&&(a=r,"text"===zt.getGiftPromotionType()?vt.injectFloatingAnnouncement(a):((0,o.a)(a.asset_base_url+"/shop/css/free-gift-popup-widget.min.css"),zt.setPopupWidget(new Nt({container:null,shopOptions:a})))),window.addEventListener("scroll",(function(){zt.getFixingZIndex()||(zt.setFixingZIndex(!0),setTimeout((function(){return zt.setFixingZIndex(!1)}),10),T.A.fixOtherZIndexContent())})),setTimeout((function(){zt.setInitIntervalRef(setInterval((function(){S(r)}),700))}),1e3),r.gift_goals_expect_schedule_change){var u=new Date,l=60*(60-u.getMinutes())*1e3-1e3*u.getSeconds();setTimeout((function(){!function(){if(zt.getAppDisabledAfterLoad())return;(0,t.M)("Reset app!"),zt.getInitIntervalRef()&&(clearInterval(zt.getInitIntervalRef()),zt.setInitIntervalRef(null));zt.setInitialCheckForInactiveGiftsDone(!1),j()}()}),l+3e3)}}function C(t,e){console.info("FreeGiftCartUpsellPro options failed to load. If you need help please contact \n            support@freegiftoncartmanager.com. Status: ".concat(e))}function S(e){if(!Y.A.shouldBeDisabledForRecharge()&&!zt.getWaitingForRefresh()){var r;if(function(e){if(u){if(!e.integrations||0===e.integrations.length)return u=!1,void(0,t.M)("Nothing to inject. Skip injections.");l=!1,d=!1,s=[],e.integrations.forEach((function(t){p(t)})),s.forEach((function(t){p(t,!0)})),l&&(0,t.M)("Elements found to inject!"),d&&(0,t.M)("Elements found to replace!")}}(e),zt.getGiftDomProtector().protectGiftDom(),zt.getGiftPriceReplacer().replaceGiftPrices(),D.default.injectVariantSelectionTriggers(e),dt.interceptCheckoutActions(),q(),T.A.populateWidgets((0,i.getLastCartResponse)(),zt.getShopCurrency()),null!=zt.getPopupWidget())zt.getPopupWidget().renderUsingCartResponse({cartResponse:(0,i.getLastCartResponse)(),shopCurrency:zt.getShopCurrency(),withSlider:null===(r=zt.getGiftPromotionType())||void 0===r?void 0:r.includes("slider")});if(Ft(),"function"!=typeof zt.getOnCartChange())zt.setOnCartChange((function(e,r){if((0,t.M)("onCartChange START"),function(t){return!(!t.item_count||!t.items.length)&&t.items.find((function(t){return null===t.product_id&&null===t.title&&null===t.handle&&0===t.price}))}(e))return(0,t.M)("cart.js contained item with null props! Retry in 2s."),void setTimeout((function(){return(0,i.getCart)(null,(function(t){return zt.getOnCartChange()(t,!0)}))}),2e3);if(!zt.getWaitingForRefresh()&&((0,i.setLastCartResponse)(e),!x(e))){q(),T.A.fixOtherZIndexContent(),we.replaceSoldOutGiftsInCart(e),e.item_count?e.external_integration&&M()!==e.external_integration&&((0,t.M)("On cart update STORE EI "+e.external_integration),I(e.external_integration)):((0,t.M)("When cart empty, remove STORE EI, reset loaded cart state"),L(),(0,ee.resetDeclinedGifts)(),w.A.setLoadedCartState(e));var n=(0,g.getCartHash)(e),o=v.A.getItemDiscounts()||{},c=v.A.getTotalDiscount()+":"+Object.keys(o).map((function(t){return t+":"+o[t]})).join(",");if(!r&&n===zt.getLastCartHashHandled()&&c===zt.getLastDiscountHandled())return(0,t.M)("onCartChange: skip duplicate update",{newCartHash:n,lastCartHashHandled:zt.getLastCartHashHandled(),newDiscountHash:c,lastDiscountHandled:zt.getLastDiscountHandled()}),void(zt.getWaitingForRefresh()||zt.getApplyingCartUpdates()||dt.unBlockCheckoutButtons());if(we.reloadDueToInactiveGifts(e,!0,E))(0,t.M)("onCartChange: Reload due to inactive gifts. Stop!");else{if(e.total_price>0&&function(t){var e=M();if(e===t.external_integration)return!1;return!!e}(e)){if((0,t.M)("onCartChange: Waiting for external integration - price modification!"),"hulkapps"===M()&&!document.querySelector(a.join(",")))return void(0,t.M)("Goals are sometimes only evaluated on cart when hulkapps is present! Skipping 6 seconds wait. We only continue if we detect hulkapps data later.");if(zt.getIntegrationWaitSet())return;return zt.setIntegrationWaitSet(!0),setTimeout((function(){(0,i.getLastCartResponse)().external_integration||((0,t.M)("onCartChange: No external integration after waiting. Force start! REMOVE STORE EI"),L(),(0,i.getCart)(null,(function(t){return zt.getOnCartChange()(t,!0)})))}),6e3),void(zt.getWaitingForRefresh()||zt.getApplyingCartUpdates()||dt.unBlockCheckoutButtons())}var u=e.items.some((function(t){var e;return t.original_price<=0||(null===(e=t.handle)||void 0===e?void 0:e.includes("docapp-free-gift"))}));if(!r&&!u&&zt.getShouldWaitForDiscountApp()&&v.A.isDiscountOnCartAppActive()&&parseInt(zt.getLastCartTotalPrice())<=e.total_price)return(0,t.M)("onCartChange: Waiting for discount app!"),v.A.setWaitingForDiscountsToComplete(!0),void setTimeout((function(){v.A.getWaitingForDiscountsToComplete()&&(0,i.getCart)(null,(function(t){return zt.getOnCartChange()(t)}))}),5e3);if(v.A.getWaitingForDiscountsToComplete()&&(0,t.M)("onCartChange: Waiting for discount app - RESUME!"),function(t){var e=new Event("docapp-free-gift-cart-change");e.cart=t,document.body.dispatchEvent(e)}(e),zt.setLastCartHashHandled(n),zt.setLastDiscountHandled(c),zt.setLastCartTotalPrice(e.total_price),(0,Bt.Fn)(Bt.ep,e.total_price),v.A.setWaitingForDiscountsToComplete(!1),(0,t.M)("onCartChange: Start updating cart."),zt.getWaitingForRefresh()||zt.getApplyingCartUpdates()||dt.unBlockCheckoutButtons(),we.evaluateGoalsForNecessaryCartChanges(e,E))(0,t.M)("onCartChange: Necessary Cart Changes! STOP onCartChange");else{if(we.shouldUpdateCartView(e)){if(w.A.updateCartState(e))return T.A.blockWidgetGeneration(),zt.setWaitingForRefresh(!0),void(0,t.M)("onCartChange: Liquid cart not matching JS cart, page reload.");(0,t.M)("Liquid cart not matching JS cart, NO reload needed!")}E(e)}}}})),(0,i.getCart)(null,(function(t){return zt.getOnCartChange()(t,!0)})),Gt.A.onCartChange("free_gift_app",zt.getOnCartChange());else if((0,Rt.uz)()){var n=(0,i.getLastCartResponse)().external_integration;(0,t.M)("Should apply 3rd party apps pricing! STORE EI "+n),I(n),(0,i.getCart)(null,(function(t){return zt.getOnCartChange()(t)}))}}}function E(e){var r,n;if((0,t.M)("onCartChange: postCartChangeUpdate Start!"),"function"==typeof zt.getOnCartChange()){if(!zt.getWaitingForRefresh()){w.A.setLoadedCartState(e),D.default.removeVariantSelectionTriggers(),null===(r=zt.getGiftDomProtector())||void 0===r||r.protectGiftDom();var i,o=!0;if(T.A.populateWidgets(e,zt.getShopCurrency(),o),null!=zt.getPopupWidget())zt.getPopupWidget().renderUsingCartResponse({cartResponse:e,shopCurrency:zt.getShopCurrency(),force:o,withSlider:null===(i=zt.getGiftPromotionType())||void 0===i?void 0:i.includes("slider")});null===(n=zt.getGiftPriceReplacer())||void 0===n||n.replaceGiftPrices();var a=v.A.getAllDiscountsApplied(),c=e&&e.items.length&&a.length?a.map((function(t){return t.title})).join(" + "):null;e.token&&y(e,c),(0,t.M)("onCartChange: postCartChangeUpdate End!")}}else(0,t.M)("onCartChange not set up yet. Stop here!")}function q(){T.A.detectWidgets()}function M(){var t=(0,O.mI)(O.E9);return t||(0,ft.Ri)(O.E9)}function I(t){(0,O.i_)(O.E9,t),(0,ft.TV)(O.E9,t)}function L(){(0,O._y)(O.E9),(0,ft.TV)(O.E9,"",-1)}function x(e){var r=Y.A.shouldBeDisabledForRecharge(e);return r&&!zt.getAppDisabledAfterLoad()?(function(){(0,t.M)("Disabling app!"),zt.setAppDisabledAfterLoad(!0),zt.getInitIntervalRef()&&(clearInterval(zt.getInitIntervalRef()),zt.setInitIntervalRef(null));U(),zt.setInitialCheckForInactiveGiftsDone(!1),dt.blockCheckoutHandler(),zt.setLastCartHashHandled(null),zt.setOnCartChange(null),m()}(),!0):!(r||!zt.getAppDisabledAfterLoad())&&(j(),!0)}function j(){(0,t.M)("Re-enabling app!"),zt.setAppDisabledAfterLoad(!1),U(),dt.unBlockCheckoutHandler(),zt.setLastCartHashHandled(null),zt.setOnCartChange(null),m()}function U(){document.querySelectorAll(".docapp-free-gift-progress, .docapp-free-gift-float, .docapp-free-gift-popup-widget").forEach((function(t){return t.innerHTML=""})),document.querySelectorAll(".docapp-free-gift-progress").forEach((function(t){t.style.removeProperty("display")})),document.querySelectorAll(".docapp-replaces").forEach((function(t){t.classList.remove("docapp-replaces"),t.style.removeProperty("display")}))}}()})()})();